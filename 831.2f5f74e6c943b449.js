(self.webpackChunkiframe_player=self.webpackChunkiframe_player||[]).push([[831],{1831:function(S){S.exports=function(){"use strict";var I={732:function(C,n,h){var v=this&&this.__awaiter||function(o,e,i,t){return new(i||(i=Promise))(function(r,y){function l(d){try{E(t.next(d))}catch(s){y(s)}}function c(d){try{E(t.throw(d))}catch(s){y(s)}}function E(d){var s;d.done?r(d.value):(s=d.value,s instanceof i?s:new i(function(w){w(s)})).then(l,c)}E((t=t.apply(o,e||[])).next())})},_=this&&this.__generator||function(o,e){var i,t,r,y,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return y={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function c(E){return function(d){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;y&&(y=0,s[0]&&(l=0)),l;)try{if(i=1,t&&(r=2&s[0]?t.return:s[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,s[1])).done)return r;switch(t=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,t=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){l=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){l.label=s[1];break}if(6===s[0]&&l.label<r[1]){l.label=r[1],r=s;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(s);break}r[2]&&l.ops.pop(),l.trys.pop();continue}s=e.call(o,l)}catch(w){s=[6,w],t=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([E,d])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.WaterBaseCommon=void 0;var b=h(598),g=h(758),u=h(20),a=h(230),f=["1","true","yes","on"],p=function(){function o(){this.client=null,this.initialized=!1,this.defaultParams={},this._version=b.version,this.storage=this.initStorage()}return Object.defineProperty(o.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentConfig",{get:function(){var e;return(null===(e=this.storage.getConfig())||void 0===e?void 0:e.parameters)||this.defaultParams},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fetchStatus",{get:function(){if(!this.client)throw new g.WBCError(g.ErrorCode.NO_CLIENT);return this.client.status},enumerable:!1,configurable:!0}),o.prototype.init=function(e){e.logFn&&u.Logger.setLogFunction(e.logFn),this.finishInitialization(e),this.initialized=!0},o.prototype.setDefaultConfig=function(e){this.defaultParams=e},o.prototype.fetchConfig=function(e){return v(this,void 0,void 0,function(){var i,t;return _(this,function(r){switch(r.label){case 0:if(!this.initialized)throw new g.WBCError(g.ErrorCode.NOT_INITIALIZED);if(!this.client)throw new g.WBCError(g.ErrorCode.NO_CLIENT);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.client.fetchConfig(e)];case 2:return i=r.sent(),this.setConfig(i),u.Logger.info("Config was successfully retrieved"),[2,i];case 3:return t=r.sent(),u.Logger.error(t),[2,{parameters:this.defaultParams,experiments:[],fetchStatus:a.WBCFetchStatus.FAILED}];case 4:return[2]}})})},o.prototype.setConfig=function(e){this.storage.saveConfig(e)},o.prototype.getValue=function(e){var i,t=this.storage.getValue(e);if(t)return t;var r=null!==(i=this.defaultParams[e])&&void 0!==i?i:"";return r||u.Logger.info("There is no value for ".concat(e," key")),r},o.prototype.isEnabled=function(e){var i=this.getValue(e);return"string"==typeof i?f.indexOf(i.toString())>=0:!!i},o.prototype.enableDebugger=function(e){u.Logger.enableDebug(e)},o}();n.WaterBaseCommon=p},251:function(C,n,h){var v,_=this&&this.__extends||(v=function(o,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])})(o,e)},function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=o}v(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(n,"__esModule",{value:!0}),n.WaterBaseWeb=void 0;var b=h(411),g=h(798),u=h(485),a=h(836),f=h(432),p=function(o){function e(){var i=null!==o&&o.apply(this,arguments)||this;return i.client=null,i}return _(e,o),e.prototype.finishInitialization=function(i){var t;try{t=new b.FetchAdapter}catch{t=new g.XhrHttpAdapter}var r=new u.FetchClient(i,t);this.client=new a.RepeatableClient(r,this.storage)},e.prototype.setConfig=function(i){var t,r,y=null===(t=i.parameters)||void 0===t?void 0:t.remoteConfigFetchInterval_ms;y&&(null===(r=this.client)||void 0===r||r.changeFetchInterval(y)),o.prototype.setConfig.call(this,i)},e.prototype.initStorage=function(){return new f.InMemoryStorage},e}(h(732).WaterBaseCommon);n.WaterBaseWeb=p},411:function(C,n,h){var v=this&&this.__assign||function(){return v=Object.assign||function(o){for(var e,i=1,t=arguments.length;i<t;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o},v.apply(this,arguments)},_=this&&this.__awaiter||function(o,e,i,t){return new(i||(i=Promise))(function(r,y){function l(d){try{E(t.next(d))}catch(s){y(s)}}function c(d){try{E(t.throw(d))}catch(s){y(s)}}function E(d){var s;d.done?r(d.value):(s=d.value,s instanceof i?s:new i(function(w){w(s)})).then(l,c)}E((t=t.apply(o,e||[])).next())})},b=this&&this.__generator||function(o,e){var i,t,r,y,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return y={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function c(E){return function(d){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;y&&(y=0,s[0]&&(l=0)),l;)try{if(i=1,t&&(r=2&s[0]?t.return:s[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,s[1])).done)return r;switch(t=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,t=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){l=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){l.label=s[1];break}if(6===s[0]&&l.label<r[1]){l.label=r[1],r=s;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(s);break}r[2]&&l.ops.pop(),l.trys.pop();continue}s=e.call(o,l)}catch(w){s=[6,w],t=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([E,d])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FetchAdapter=void 0;var g=h(601),u=h(758),a=h(346),f=h(162),p=function(){function o(){if(this.controller=null,!f.isFetchSupport)throw new u.WBCError(u.ErrorCode.INCORRECT_ENVIRONMENT,{additionalMessage:"environment doesn't support Fetch"})}return o.prototype.get=function(e,i,t){return void 0===t&&(t=g.FETCH_CONFIG_TIMEOUT),_(this,void 0,void 0,function(){var r,y,l,c,E,d,s,w,F=this;return b(this,function(m){switch(m.label){case 0:this.controller=new AbortController,r=setTimeout(function(){var j;return null===(j=F.controller)||void 0===j?void 0:j.abort()},t),y={method:"GET",headers:v({},i),signal:this.controller.signal},m.label=1;case 1:return m.trys.push([1,4,5,6]),[4,fetch(e,v({},y))];case 2:return c=m.sent(),this.controller.signal.aborted?[2,Promise.reject(new u.WBCError(u.ErrorCode.FETCH_ABORTED))]:(l=c.status,c.ok?[4,c.json()]:(w=new u.WBCError(u.ErrorCode.FETCH_NETWORK,{additionalMessage:c.statusText,httpStatus:l}),[2,Promise.reject(w)]));case 3:return E=m.sent(),[2,Promise.resolve(E)];case 4:throw(d=m.sent())instanceof SyntaxError?(s=(0,a.getErrorMessage)(d),new u.WBCError(u.ErrorCode.CONFIG_PARSE,{additionalMessage:s,httpStatus:l})):d instanceof DOMException&&"AbortError"==d.name?new u.WBCError(u.ErrorCode.FETCH_ABORTED):w=new u.WBCError(u.ErrorCode.FETCH_NETWORK);case 5:return this.controller=null,clearTimeout(r),[7];case 6:return[2]}})})},o.prototype.abort=function(){var e;null===(e=this.controller)||void 0===e||e.abort()},o}();n.FetchAdapter=p},798:function(C,n,h){var v=this&&this.__awaiter||function(p,o,e,i){return new(e||(e=Promise))(function(t,r){function y(E){try{c(i.next(E))}catch(d){r(d)}}function l(E){try{c(i.throw(E))}catch(d){r(d)}}function c(E){var d;E.done?t(E.value):(d=E.value,d instanceof e?d:new e(function(s){s(d)})).then(y,l)}c((i=i.apply(p,o||[])).next())})},_=this&&this.__generator||function(p,o){var e,i,t,r,y={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(E){return function(d){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,d[0]&&(y=0)),y;)try{if(e=1,i&&(t=2&d[0]?i.return:d[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,d[1])).done)return t;switch(i=0,t&&(d=[2&d[0],t.value]),d[0]){case 0:case 1:t=d;break;case 4:return y.label++,{value:d[1],done:!1};case 5:y.label++,i=d[1],d=[0];continue;case 7:d=y.ops.pop(),y.trys.pop();continue;default:if(!((t=(t=y.trys).length>0&&t[t.length-1])||6!==d[0]&&2!==d[0])){y=0;continue}if(3===d[0]&&(!t||d[1]>t[0]&&d[1]<t[3])){y.label=d[1];break}if(6===d[0]&&y.label<t[1]){y.label=t[1],t=d;break}if(t&&y.label<t[2]){y.label=t[2],y.ops.push(d);break}t[2]&&y.ops.pop(),y.trys.pop();continue}d=o.call(p,y)}catch(s){d=[6,s],i=0}finally{e=t=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,E])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.XhrHttpAdapter=void 0;var b=h(601),g=h(758),u=h(346),a=h(162),f=function(){function p(){if(this.currentXhr=null,a.isNode)throw new g.WBCError(g.ErrorCode.INCORRECT_ENVIRONMENT,{additionalMessage:"XMLHttpRequest could be used only in browser"})}return p.prototype.get=function(o,e,i){return v(this,void 0,void 0,function(){var t=this;return _(this,function(r){return[2,new Promise(function(y,l){var c=t.currentXhr=new XMLHttpRequest;for(var E in c.open("GET",o),c.timeout=i||b.FETCH_CONFIG_TIMEOUT,e)c.setRequestHeader(E,e[E]);c.onload=function(){if(c.status>=200&&c.status<=299)try{var d=JSON.parse(c.response);t.currentXhr=null,y(d)}catch(F){var s=(0,u.getErrorMessage)(F);w=new g.WBCError(g.ErrorCode.CONFIG_PARSE,{additionalMessage:s,httpStatus:c.status}),l(w)}else{var w=new g.WBCError(g.ErrorCode.FETCH_NETWORK,{additionalMessage:c.statusText,httpStatus:c.status});l(w)}},c.onerror=function(){var d=new g.WBCError(g.ErrorCode.FETCH_NETWORK,{additionalMessage:c.statusText,httpStatus:c.status});l(d)},c.ontimeout=function(){var d=new g.WBCError(g.ErrorCode.FETCH_TIMEOUT);l(d)},c.onabort=function(){var d=new g.WBCError(g.ErrorCode.FETCH_ABORTED);l(d)},c.send()})]})})},p.prototype.abort=function(){var o;null===(o=this.currentXhr)||void 0===o||o.abort()},p}();n.XhrHttpAdapter=f},485:function(C,n,h){var v=this&&this.__awaiter||function(a,f,p,o){return new(p||(p=Promise))(function(e,i){function t(l){try{y(o.next(l))}catch(c){i(c)}}function r(l){try{y(o.throw(l))}catch(c){i(c)}}function y(l){var c;l.done?e(l.value):(c=l.value,c instanceof p?c:new p(function(E){E(c)})).then(t,r)}y((o=o.apply(a,f||[])).next())})},_=this&&this.__generator||function(a,f){var p,o,e,i,t={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(y){return function(l){return function(c){if(p)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(p=1,o&&(e=2&c[0]?o.return:c[0]?o.throw||((e=o.return)&&e.call(o),0):o.next)&&!(e=e.call(o,c[1])).done)return e;switch(o=0,e&&(c=[2&c[0],e.value]),c[0]){case 0:case 1:e=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,o=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(!((e=(e=t.trys).length>0&&e[e.length-1])||6!==c[0]&&2!==c[0])){t=0;continue}if(3===c[0]&&(!e||c[1]>e[0]&&c[1]<e[3])){t.label=c[1];break}if(6===c[0]&&t.label<e[1]){t.label=e[1],e=c;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(c);break}e[2]&&t.ops.pop(),t.trys.pop();continue}c=f.call(a,t)}catch(E){c=[6,E],o=0}finally{p=e=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([y,l])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FetchClient=void 0;var b=h(230),g=h(28),u=function(){function a(f,p){this.config=f,this.httpHandler=p,this._state=b.WBCFetchStatus.IDLE}return Object.defineProperty(a.prototype,"status",{get:function(){return this._state},enumerable:!1,configurable:!0}),a.prototype.fetchConfig=function(){return v(this,void 0,void 0,function(){var f,p=this;return _(this,function(o){return f=this.getUrl(),this.httpHandler.abort(),this._state=b.WBCFetchStatus.PENDING,[2,this.httpHandler.get(f,{Authorization:"Token ".concat(this.config.token),Accept:"*/*","Content-Type":"application/json"},this.config.fetchTimeoutInMs).then(function(e){var i;p._state=b.WBCFetchStatus.SUCCESS;var t=null===(i=e.groups)||void 0===i?void 0:i.map(function(r){return{experiment:r.experiment,group:r.group_name}});return{parameters:e.parameters||{},hash:e.parameters_hash,experiments:t,fetchStatus:b.WBCFetchStatus.SUCCESS}}).catch(function(e){throw p._state=b.WBCFetchStatus.FAILED,e})]})})},a.prototype.getUrl=function(){var f=this.config,p=f.deviceModel,o=f.deviceId,e=f.appVersion,i=f.os,r=new URL((0,g.getApiUrl)(f.apiUrl));return r.searchParams.set("device_model",p),r.searchParams.set("app_version",e),r.searchParams.set("operating_system",i),o&&r.searchParams.set("device_id",o),r.toString()},a}();n.FetchClient=u},836:function(C,n,h){Object.defineProperty(n,"__esModule",{value:!0}),n.RepeatableClient=void 0;var v=h(601),_=h(758),b=h(20),g=h(28),u={parameters:{},experiments:[]},a=function(){function f(p,o){this.client=p,this.storage=o,this.fetchInterval=v.DEFAULT_FETCH_INTERVAL,this.retryInterval=v.DEFAULT_RETRY_INTERVAL,this.fetchTimer=null,this.retryTimer=null}return Object.defineProperty(f.prototype,"status",{get:function(){return this.client.status},enumerable:!1,configurable:!0}),f.prototype.fetchConfig=function(p){var o,e=this;this.fetchTimer&&clearTimeout(this.fetchTimer);var i=this.storage.getLastUpdateTimestamp()||0,t=(new Date).getTime(),r=Promise.resolve(null!==(o=this.storage.getConfig())&&void 0!==o?o:u);return(p||t-i>=this.fetchInterval)&&(r=this.client.fetchConfig().then(function(l){var c,E;return e.fetchInterval=null!==(E=null===(c=l.parameters)||void 0===c?void 0:c.remoteConfigFetchInterval_ms)&&void 0!==E?E:e.fetchInterval,e.storage.saveConfig(l),l})),r.then(function(l){return e.retryInterval=v.DEFAULT_RETRY_INTERVAL,e.retryTimer&&clearTimeout(e.retryTimer),e.repeatFetch(),l}).catch(function(l){throw l instanceof _.WBCError&&l.code===_.ErrorCode.FETCH_ABORTED||(e.retryFetch(),e.retryInterval=(0,g.increaseDelayMS)(e.retryInterval,e.fetchInterval)),l})},f.prototype.changeFetchInterval=function(p){this.fetchInterval=p,this.repeatFetch()},f.prototype.repeatFetch=function(){var p=this;this.fetchTimer&&clearTimeout(this.fetchTimer),this.fetchTimer=setTimeout(function(){p.refetchConfig()},this.fetchInterval)},f.prototype.retryFetch=function(){var p=this;this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=setTimeout(function(){p.refetchConfig(!0)},this.retryInterval)},f.prototype.refetchConfig=function(p){this.fetchConfig(p).then(function(){b.Logger.info("Config was successfully retrieved")}).catch(function(o){b.Logger.error(o)})},f}();n.RepeatableClient=a},601:function(C,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FETCH_CONFIG_TIMEOUT=n.DEFAULT_RETRY_INTERVAL=n.DEFAULT_FETCH_INTERVAL=n.STORAGE_PREFIX=n.BACKEND_HOST=void 0,n.BACKEND_HOST="https://waterbase.kion.ru/waterbase",n.STORAGE_PREFIX="wb_",n.DEFAULT_FETCH_INTERVAL=36e5,n.DEFAULT_RETRY_INTERVAL=18e4,n.FETCH_CONFIG_TIMEOUT=250},758:function(C,n){var h,v,_=this&&this.__extends||(h=function(u,a){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var o in p)Object.prototype.hasOwnProperty.call(p,o)&&(f[o]=p[o])})(u,a)},function(u,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function f(){this.constructor=u}h(u,a),u.prototype=null===a?Object.create(a):(f.prototype=a.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0}),n.WBCError=n.ErrorCode=void 0,n.ErrorCode={NOT_INITIALIZED:"not-initialized",NO_CLIENT:"no-client",FETCH_NETWORK:"fetch-client-network",FETCH_ABORTED:"fetch-aborted",CONFIG_PARSE:"config-parse",FETCH_TIMEOUT:"fetch-timeout",INCORRECT_ENVIRONMENT:"incorrect-env",INTERNAL:"internal-error"};var b=((v={})[n.ErrorCode.NOT_INITIALIZED]="The SDK wasn't initialized by init method",v[n.ErrorCode.NO_CLIENT]="The is no client instance",v[n.ErrorCode.FETCH_NETWORK]="Fetch client failed to connect to a network.",v[n.ErrorCode.FETCH_ABORTED]="Request was aborted.",v[n.ErrorCode.CONFIG_PARSE]="Failed parse config from response",v[n.ErrorCode.FETCH_TIMEOUT]="Fetch timeout",v[n.ErrorCode.INCORRECT_ENVIRONMENT]="Incorrect environment",v[n.ErrorCode.INTERNAL]="internal error",v),g=function(u){function a(f,p){void 0===p&&(p={});var o,e=this,i=null!==(o=b[f])&&void 0!==o?o:"ERROR";return p.additionalMessage&&(i+=" ".concat(p.additionalMessage)),f===n.ErrorCode.FETCH_NETWORK&&p.httpStatus&&(i+=" [".concat(p.httpStatus,"]")),(e=u.call(this,i)||this).code=f,e.customData=p,e.name="WBCError",Object.setPrototypeOf(e,a.prototype),e}return _(a,u),a}(Error);n.WBCError=g},62:function(C,n,h){Object.defineProperty(n,"__esModule",{value:!0}),n.WBCFetchStatus=void 0;var v=h(230);Object.defineProperty(n,"WBCFetchStatus",{enumerable:!0,get:function(){return v.WBCFetchStatus}})},147:function(C,n,h){var v=this&&this.__createBinding||(Object.create?function(g,u,a,f){void 0===f&&(f=a);var p=Object.getOwnPropertyDescriptor(u,a);p&&!("get"in p?!u.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(g,f,p)}:function(g,u,a,f){void 0===f&&(f=a),g[f]=u[a]}),_=this&&this.__exportStar||function(g,u){for(var a in g)"default"===a||Object.prototype.hasOwnProperty.call(u,a)||v(u,g,a)};Object.defineProperty(n,"__esModule",{value:!0}),n.WaterBase=void 0;var b=h(251);Object.defineProperty(n,"WaterBase",{enumerable:!0,get:function(){return b.WaterBaseWeb}}),_(h(62),n)},20:function(C,n,h){var v=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(n,"__esModule",{value:!0}),n.Logger=void 0;var _=h(529);Object.defineProperty(n,"Logger",{enumerable:!0,get:function(){return v(_).default}})},529:function(C,n,h){var v=this&&this.__assign||function(){return v=Object.assign||function(u){for(var a,f=1,p=arguments.length;f<p;f++)for(var o in a=arguments[f])Object.prototype.hasOwnProperty.call(a,o)&&(u[o]=a[o]);return u},v.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var _=h(758),b=h(346),g=function(){function u(){this.customLogFn=null,this.forceLogs=!1}return u.prototype.log=function(a,f,p){this.customLogFn&&!this.forceLogs||console.log("[WBC] [".concat(a,"] ").concat(f)),this.customLogFn&&this.customLogFn(a,f,p)},u.prototype.info=function(a){this.log("info",a)},u.prototype.error=function(a){var f="string"==typeof a?a:(0,b.getErrorMessage)(a);this.log("error",f,v({originalError:a},a instanceof _.WBCError?a.customData:{}))},u.prototype.setLogFunction=function(a){a&&(this.customLogFn=a)},u.prototype.enableDebug=function(a){this.forceLogs=a},u}();n.default=new g},854:function(C,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStorage=void 0;var h=function(){function v(){this.cachedConfig=null,this.lastUpdateDate=null}return v.prototype.getConfig=function(){return this.cachedConfig},v.prototype.getValue=function(_){var b;return(null===(b=this.cachedConfig)||void 0===b?void 0:b.parameters[_])||null},v.prototype.getLastUpdateTimestamp=function(){return this.lastUpdateDate},v}();n.BaseStorage=h},432:function(C,n,h){var v,_=this&&this.__extends||(v=function(u,a){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var o in p)Object.prototype.hasOwnProperty.call(p,o)&&(f[o]=p[o])})(u,a)},function(u,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function f(){this.constructor=u}v(u,a),u.prototype=null===a?Object.create(a):(f.prototype=a.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0}),n.InMemoryStorage=void 0;var b=h(164),g=function(u){function a(){return null!==u&&u.apply(this,arguments)||this}return _(a,u),a.prototype.saveConfig=function(f){(0,b.isValidConfig)(f)&&(this.cachedConfig=f,this.lastUpdateDate=(new Date).getTime())},a.prototype.clear=function(){this.cachedConfig=null},a}(h(854).BaseStorage);n.InMemoryStorage=g},6:function(C,n){Object.defineProperty(n,"__esModule",{value:!0})},279:function(C,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WBCFetchStatus=void 0,n.WBCFetchStatus={IDLE:"idle",PENDING:"pending",SUCCESS:"success",FAILED:"failed"}},230:function(C,n,h){var v=this&&this.__createBinding||(Object.create?function(b,g,u,a){void 0===a&&(a=u);var f=Object.getOwnPropertyDescriptor(g,u);f&&!("get"in f?!g.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return g[u]}}),Object.defineProperty(b,a,f)}:function(b,g,u,a){void 0===a&&(a=u),b[a]=g[u]}),_=this&&this.__exportStar||function(b,g){for(var u in b)"default"===u||Object.prototype.hasOwnProperty.call(g,u)||v(g,b,u)};Object.defineProperty(n,"__esModule",{value:!0}),_(h(33),n),_(h(263),n),_(h(6),n),_(h(279),n)},33:function(C,n){Object.defineProperty(n,"__esModule",{value:!0})},263:function(C,n){Object.defineProperty(n,"__esModule",{value:!0})},28:function(C,n,h){Object.defineProperty(n,"__esModule",{value:!0}),n.increaseDelayMS=n.getApiUrl=void 0;var v=h(601);n.getApiUrl=function(_){return"".concat(_??v.BACKEND_HOST,"/api/core/config/config-by-experiment/")},n.increaseDelayMS=function(_,b){if(_>=b)return b;var g=5*_/100,u=2*_+Math.random()*g;return Math.min(u,b)}},346:function(C,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getErrorMessage=void 0,n.getErrorMessage=function(h){return h instanceof Error?h.message:"string"==typeof h?h:""}},162:function(C,n,h){Object.defineProperty(n,"__esModule",{value:!0}),n.isFetchSupport=n.isNode=void 0,n.isNode=typeof window>"u"&&typeof process<"u"&&void 0!==process.release&&"node"===process.release.name,n.isFetchSupport=n.isNode?!!h.g.AbortController:!!window.AbortController&&Object.hasOwnProperty.call(window.AbortController.prototype,"signal")},164:function(C,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidConfig=void 0,n.isValidConfig=function(h){return"object"==typeof h?.parameters}},598:function(C){C.exports=JSON.parse('{"name":"@kion/waterbase","version":"1.5.2","description":"KION WaterBase remote config SDK","main":"./dist/lib/bundles/waterbase.node.js","browser":"./dist/lib/bundles/waterbase.browser.js","types":"./dist/lib/types/src/index.web.d.ts","author":"MTS","license":"proprietary","homepage":"https://gitlab.services.mts.ru/media/projects/kion/smartweb/waterbase","scripts":{"start":"tsc -p tsconfig.example.json && node dist/example/server.js","lint":"eslint . --ext .ts","test":"jest","test-coverage":"CI=true npm test -- --coverage","build:sdk":"webpack --config ./webpack.sdk.ts --env type=production --profile","build:lib":"tsc -p ./tsconfig.types.json && webpack --config webpack.lib.ts --env type=production --profile","clean":"rm -rf ./dist","prettier":"prettier --write \\"**/*.ts\\"","prepare":"husky install","bundle-sdk-analize":"webpack --config ./webpack.sdk.ts --env type=production --profile --json > stats.json && webpack-bundle-analyzer stats.json dist/scripts","bundle-lib-analize":"tsc -p ./tsconfig.types.json && webpack --config webpack.lib.ts --env type=production --profile --json > stats.json && webpack-bundle-analyzer stats.json dist/bundles"},"devDependencies":{"@shopify/jest-dom-mocks":"^5.0.0","@types/express":"4.17.17","@types/jest":"^29.5.2","@types/node":"^18.15.12","@typescript-eslint/eslint-plugin":"^5.59.6","@typescript-eslint/parser":"^5.59.6","eslint":"^8.40.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-prettier":"^4.2.1","express":"4.18.2","husky":"^8.0.0","jest":"^29.5.0","jest-environment-jsdom":"^29.5.0","lint-staged":"^13.2.2","prettier":"^2.8.8","ts-jest":"^29.1.0","ts-loader":"^9.4.2","ts-node":"10.9.1","typescript":"5.0.4","webpack":"^5.80.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1"},"engines":{"node":">=18.16.0"},"lint-staged":{"*.ts":["eslint --fix","prettier --ignore-unknown --write"]},"files":["dist/lib"],"exports":{".":{"types":{"node":"./dist/lib/types/src/index.node.d.ts","browser":"./dist/lib/types/src/index.web.d.ts"},"browser":"./dist/lib/bundles/waterbase.browser.js","node":"./dist/lib/bundles/waterbase.node.js"}}}')}},T={};function O(C){var n=T[C];if(void 0!==n)return n.exports;var h=T[C]={exports:{}};return I[C].call(h.exports,h,h.exports,O),h.exports}return O.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),O(147)}()}}]);