(self.webpackChunkiframe_player=self.webpackChunkiframe_player||[]).push([[758],{3981:(Un,Ee)=>{"use strict";Ee.byteLength=function A(m){var K=g(m),Xe=K[1];return 3*(K[0]+Xe)/4-Xe},Ee.toByteArray=function G(m){var K,de,Ae=g(m),Xe=Ae[0],We=Ae[1],Ge=new Ie(function L(m,K,Ae){return 3*(K+Ae)/4-Ae}(0,Xe,We)),ut=0,Xt=We>0?Xe-4:Xe;for(de=0;de<Xt;de+=4)K=Z[m.charCodeAt(de)]<<18|Z[m.charCodeAt(de+1)]<<12|Z[m.charCodeAt(de+2)]<<6|Z[m.charCodeAt(de+3)],Ge[ut++]=K>>16&255,Ge[ut++]=K>>8&255,Ge[ut++]=255&K;return 2===We&&(K=Z[m.charCodeAt(de)]<<2|Z[m.charCodeAt(de+1)]>>4,Ge[ut++]=255&K),1===We&&(K=Z[m.charCodeAt(de)]<<10|Z[m.charCodeAt(de+1)]<<4|Z[m.charCodeAt(de+2)]>>2,Ge[ut++]=K>>8&255,Ge[ut++]=255&K),Ge},Ee.fromByteArray=function te(m){for(var K,Ae=m.length,Xe=Ae%3,We=[],ut=0,Xt=Ae-Xe;ut<Xt;ut+=16383)We.push(X(m,ut,ut+16383>Xt?Xt:ut+16383));return 1===Xe?We.push(me[(K=m[Ae-1])>>2]+me[K<<4&63]+"=="):2===Xe&&We.push(me[(K=(m[Ae-2]<<8)+m[Ae-1])>>10]+me[K>>4&63]+me[K<<2&63]+"="),We.join("")};for(var me=[],Z=[],Ie=typeof Uint8Array<"u"?Uint8Array:Array,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",we=0;we<64;++we)me[we]=O[we],Z[O.charCodeAt(we)]=we;function g(m){var K=m.length;if(K%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Ae=m.indexOf("=");return-1===Ae&&(Ae=K),[Ae,Ae===K?0:4-Ae%4]}function B(m){return me[m>>18&63]+me[m>>12&63]+me[m>>6&63]+me[63&m]}function X(m,K,Ae){for(var We=[],Ge=K;Ge<Ae;Ge+=3)We.push(B((m[Ge]<<16&16711680)+(m[Ge+1]<<8&65280)+(255&m[Ge+2])));return We.join("")}Z["-".charCodeAt(0)]=62,Z["_".charCodeAt(0)]=63},2020:(Un,Ee)=>{Ee.read=function(me,Z,Ie,O,we){var Y,g,A=8*we-O-1,L=(1<<A)-1,G=L>>1,B=-7,X=Ie?we-1:0,te=Ie?-1:1,m=me[Z+X];for(X+=te,Y=m&(1<<-B)-1,m>>=-B,B+=A;B>0;Y=256*Y+me[Z+X],X+=te,B-=8);for(g=Y&(1<<-B)-1,Y>>=-B,B+=O;B>0;g=256*g+me[Z+X],X+=te,B-=8);if(0===Y)Y=1-G;else{if(Y===L)return g?NaN:1/0*(m?-1:1);g+=Math.pow(2,O),Y-=G}return(m?-1:1)*g*Math.pow(2,Y-O)},Ee.write=function(me,Z,Ie,O,we,Y){var g,A,L,G=8*Y-we-1,B=(1<<G)-1,X=B>>1,te=23===we?Math.pow(2,-24)-Math.pow(2,-77):0,m=O?0:Y-1,K=O?1:-1,Ae=Z<0||0===Z&&1/Z<0?1:0;for(Z=Math.abs(Z),isNaN(Z)||Z===1/0?(A=isNaN(Z)?1:0,g=B):(g=Math.floor(Math.log(Z)/Math.LN2),Z*(L=Math.pow(2,-g))<1&&(g--,L*=2),(Z+=g+X>=1?te/L:te*Math.pow(2,1-X))*L>=2&&(g++,L/=2),g+X>=B?(A=0,g=B):g+X>=1?(A=(Z*L-1)*Math.pow(2,we),g+=X):(A=Z*Math.pow(2,X-1)*Math.pow(2,we),g=0));we>=8;me[Ie+m]=255&A,m+=K,A/=256,we-=8);for(g=g<<we|A,G+=we;G>0;me[Ie+m]=255&g,m+=K,g/=256,G-=8);me[Ie+m-K]|=128*Ae}},5454:(Un,Ee,me)=>{"use strict";me.d(Ee,{O:()=>g});var Z=me(1985),Ie=me(8750);const{isArray:O}=Array;var Y=me(4360);function g(...L){return 1===(L=function we(L){return 1===L.length&&O(L[0])?L[0]:L}(L)).length?(0,Ie.Tg)(L[0]):new Z.c(function A(L){return G=>{let B=[];for(let X=0;B&&!G.closed&&X<L.length;X++)B.push((0,Ie.Tg)(L[X]).subscribe((0,Y._)(G,te=>{if(B){for(let m=0;m<B.length;m++)m!==X&&B[m].unsubscribe();B=null}G.next(te)})))}}(L))}},8268:(Un,Ee,me)=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.parseDescriptor=Ee.SegmentationMessage=void 0;const Z=me(4424);var Ie=function(Y){return Y[Y.RESTRICT_GROUP_0=0]="RESTRICT_GROUP_0",Y[Y.RESTRICT_GROUP_1=1]="RESTRICT_GROUP_1",Y[Y.RESTRICT_GROUP_2=2]="RESTRICT_GROUP_2",Y[Y.NONE=3]="NONE",Y}(Ie||(Ee.SegmentationMessage=Ie={}));Ee.parseDescriptor=Y=>{const g=(Y=>{const g={};let A=0;for(g.spliceDescriptorTag=Y.getUint8(A++),g.descriptorLength=Y.getUint8(A++),g.identifier="";g.identifier.length<4;)g.identifier+=String.fromCharCode(Y.getUint8(A++));return g})(Y);let A=6;if(0===g.spliceDescriptorTag)A=g.descriptorLength+2,console.warn("scte35-js TODO: support spliceDescriptorTag: SpliceDescriptorTag.AVAIL_DESCRIPTOR");else if(1===g.spliceDescriptorTag)A=g.descriptorLength+2,console.warn("scte35-js TODO: support spliceDescriptorTag: SpliceDescriptorTag.DTMF_DESCRIPTOR");else if(2===g.spliceDescriptorTag){const L=g;if(L.segmentationEventId=Y.getUint32(A),A+=4,L.segmentationEventCancelIndicator=!!(128&Y.getUint8(A++)),!L.segmentationEventCancelIndicator){const G=Y.getUint8(A++);L.programSegmentationFlag=!!(128&G),L.segmentationDurationFlag=!!(64&G),L.deliveryNotRestrictedFlag=!!(32&G),L.deliveryNotRestrictedFlag||(L.webDeliveryAllowedFlag=!!(16&G),L.noRegionalBlackoutFlag=!!(8&G),L.archiveAllowedFlag=!!(4&G),L.deviceRestrictions=3&G),L.programSegmentationFlag||(L.componentCount=Y.getUint8(A++),console.warn("scte35-js TODO: segmentationDescriptor.componentCount: "+L.componentCount),A+=6*L.componentCount),L.segmentationDurationFlag&&(L.segmentationDuration=Z.shiftThirtyTwoBits(Y.getUint8(A++)),L.segmentationDuration+=Y.getUint32(A),A+=4),L.segmentationUpidType=Y.getUint8(A++),L.segmentationUpidLength=Y.getUint8(A++);let B=L.segmentationUpidLength;for(L.segmentationUpid=new Uint8Array(B);B>=0;)B--,L.segmentationUpid[B]=Y.getUint8(A+B);A+=L.segmentationUpidLength,L.segmentationTypeId=Y.getUint8(A++),L.segmentNum=Y.getUint8(A++),L.segmentsExpected=Y.getUint8(A++),A<g.descriptorLength+2&&(52===L.segmentationTypeId||54===L.segmentationTypeId)&&(L.subSegmentNum=Y.getUint8(A++),L.subSegmentsExpected=Y.getUint8(A++))}}else 3===g.spliceDescriptorTag?(A=g.descriptorLength+2,console.warn("scte35-js TODO: support spliceDescriptorTag: SpliceDescriptorTag.TIME_DESCRIPTOR")):(console.error(`scte35-js Unrecognized spliceDescriptorTag ${g.spliceDescriptorTag}`),A=g.descriptorLength+2);return A!==g.descriptorLength+2&&console.error(`scte35-js Error reading descriptor offset @${A} of ${g.descriptorLength+2}`),g}},1501:(Un,Ee,me)=>{"use strict";Ee.S=void 0;const Ie=me(8268),O=me(4424),we=me(1491);Ee.S=class Y{constructor(){this.buffer=we.Buffer}parseFromB64(A){const L=Uint8Array.from(this.parseBase64(A).split("").map(G=>G.charCodeAt(0)));return this.parseSCTE35Data(L)}parseFromHex(A){const L=A.match(/[a-f\d]{2}/gi)||[],G=Uint8Array.from(L.map(B=>parseInt(B,16)));return this.parseSCTE35Data(G)}parseBase64(A){return this.buffer.from(A,"base64").toString("binary")}spliceEvent(A,L,G){let B=0;if(A.spliceEventId=L.getUint32(B),B+=4,A.spliceEventCancelIndicator=!!(128&L.getUint8(B++)),A.spliceEventCancelIndicator)return B;let X=L.getUint8(B++);if(A.outOfNetworkIndicator=!!(128&X),A.programSpliceFlag=!!(64&X),A.durationFlag=!!(32&X),5===G&&(A.spliceImmediateFlag=!!(16&X)),A.programSpliceFlag)if(5!==G||A.spliceImmediateFlag)4===G&&(A.utcSpliceTime=L.getUint32(B),B+=4);else{const te=this.timeSignal(new DataView(L.buffer,L.byteOffset+B,5));A.spliceTime=te,B++,te.specified&&(B+=4)}else if(A.componentCount=L.getUint8(B++),4===G){const te=[];for(;te.length!==A.componentCount;)te.push({componentTag:L.getUint8(B++),utcSpliceTime:L.getUint32(B)}),B+=4;A.utcSpliceComponents=te}else console.warn("scte35-js TODO: support splice_insert");return A.durationFlag&&(X=L.getUint8(B++),A.breakDuration={autoReturn:!!(128&X),duration:(1&X?O.THIRTY_TWO_BIT_MULTIPLIER:0)+L.getUint32(B)},B+=4),A.uniqueProgramId=L.getUint16(B),B+=2,A.available=L.getUint8(B++),A.expected=L.getUint8(B++),B}spliceSchedule(A){const L={};L.spliceCount=A.getUint8(0),L.spliceEvents=[];let G=1;for(;L.spliceEvents.length!==L.spliceCount;){const B={};G+=this.spliceEvent(B,new DataView(A.buffer,A.byteOffset+G),4),L.spliceEvents.push(B)}return G!==A.byteLength&&console.error(`scte35-js Bad read splice_schedule actual: ${G} expected: ${A.byteLength}`),L}spliceInsert(A){const L={},G=this.spliceEvent(L,A,5);return G!==A.byteLength&&console.error(`scte35-js Bad read splice_insert actual: ${G} expected: ${A.byteLength}`),L}timeSignal(A){const L={},G=A.getUint8(0);return L.specified=!!(128&G),L.specified&&(L.pts=1&G?O.THIRTY_TWO_BIT_MULTIPLIER:0,L.pts+=A.getUint32(1)),L}privateCommand(A){const L={},G=A.getUint32(0),B=new Uint8Array(A.buffer,A.byteOffset+4,A.byteLength-4);return L.identifier=G,L.identifier&&(L.rawData=B),L}parseSCTE35Data(A){const L={},G=new DataView(A.buffer);let B=0;L.tableId=G.getUint8(B++);let X=G.getUint8(B++);if(L.selectionSyntaxIndicator=!!(128&X),L.privateIndicator=!!(64&X),L.sectionLength=((15&X)<<8)+G.getUint8(B++),L.sectionLength+3!==A.byteLength)throw new Error(`Binary read error sectionLength: ${L.sectionLength} + 3 !== data.length: ${A.byteLength}`);if(L.protocolVersion=G.getUint8(B++),X=G.getUint8(B++),L.encryptedPacket=!!(128&X),L.encryptedAlgorithm=(126&X)>>1,L.encryptedPacket&&console.error(`scte35-js splice_info_section encrypted_packet ${L.encryptedAlgorithm} not supported`),L.ptsAdjustment=1&X?O.THIRTY_TWO_BIT_MULTIPLIER:0,L.ptsAdjustment+=G.getUint32(B),B+=4,L.cwIndex=G.getUint8(B++),L.tier=G.getUint8(B++)<<4,X=G.getUint8(B++),L.tier+=(240&X)>>4,L.spliceCommandLength=((15&X)<<8)+G.getUint8(B++),L.spliceCommandType=G.getUint8(B++),4095===L.spliceCommandLength)if(6===L.spliceCommandType){const te=128&G.getUint8(B);L.spliceCommandLength=te?5:1}else if(0===L.spliceCommandType)L.spliceCommandLength=0;else if(5===L.spliceCommandType){let te=B;if(te+=4,!(128&G.getUint8(te++))){const K=G.getUint8(te++),Ae=16&K,Xe=32&K,We=64&K;if(We&&!Ae&&(te+=5),!We){const Ge=G.getUint8(te++);te+=Ge,te+=Ae?0:5*Ge}Xe&&(te+=5),te+=4,L.spliceCommandLength=te-B}}else console.error("scte35-js Unspecified length not supported in this context");if(0!==L.spliceCommandType){const te=new DataView(A.buffer,B,L.spliceCommandLength);4===L.spliceCommandType?L.spliceCommand=this.spliceSchedule(te):5===L.spliceCommandType?L.spliceCommand=this.spliceInsert(te):6===L.spliceCommandType?L.spliceCommand=this.timeSignal(te):255===L.spliceCommandType&&(L.spliceCommand=this.privateCommand(te))}if(B+=L.spliceCommandLength,L.descriptorLoopLength=G.getUint16(B),B+=2,L.descriptorLoopLength){let te=L.descriptorLoopLength;L.descriptors=[];try{for(;te;){const m=new DataView(A.buffer,B,te),K=Ie.parseDescriptor(m);te-=K.descriptorLength+2,B+=K.descriptorLength+2,L.descriptors.push(K)}}catch(m){console.error(`scte35-js Error reading descriptor @ ${B}, ignoring remaining bytes: ${te} in loop.`),console.error(m),B+=te,te=0}}return L.crc=G.getUint32(B),B+=4,B!==G.byteLength&&console.error(`scte35-js Bad SCTE35 read - remaining data: ${A.slice(B).join(", ")}`),L}}},4424:(Un,Ee)=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.shiftThirtyTwoBits=Ee.THIRTY_TWO_BIT_MULTIPLIER=Ee.bytesToUUID=void 0,Ee.bytesToUUID=Ie=>{if(16!==Ie.length)throw new Error(`scte35-js Uint8Array uuid bad size: ${Ie.length}`);return[].map.call(Ie,(O,we)=>{const Y=(O<=15?"0":"")+O.toString(16);return we>=4&&we<=10&&we%2==0?"-"+Y:Y}).join("")},Ee.THIRTY_TWO_BIT_MULTIPLIER=Math.pow(2,32),Ee.shiftThirtyTwoBits=Ie=>Ie*Ee.THIRTY_TWO_BIT_MULTIPLIER},1491:(Un,Ee,me)=>{"use strict";const Z=me(3981),Ie=me(2020),O="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ee.Buffer=A,Ee.SlowBuffer=function Ge(y){return+y!=y&&(y=0),A.alloc(+y)},Ee.INSPECT_MAX_BYTES=50;const we=2147483647;function g(y){if(y>we)throw new RangeError('The value "'+y+'" is invalid for option "size"');const f=new Uint8Array(y);return Object.setPrototypeOf(f,A.prototype),f}function A(y,f,h){if("number"==typeof y){if("string"==typeof f)throw new TypeError('The "string" argument must be of type string. Received type number');return X(y)}return L(y,f,h)}function L(y,f,h){if("string"==typeof y)return function te(y,f){if(("string"!=typeof f||""===f)&&(f="utf8"),!A.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const h=0|ut(y,f);let T=g(h);const k=T.write(y,f);return k!==h&&(T=T.slice(0,k)),T}(y,f);if(ArrayBuffer.isView(y))return function K(y){if(_t(y,Uint8Array)){const f=new Uint8Array(y);return Ae(f.buffer,f.byteOffset,f.byteLength)}return m(y)}(y);if(null==y)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(_t(y,ArrayBuffer)||y&&_t(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(y,SharedArrayBuffer)||y&&_t(y.buffer,SharedArrayBuffer)))return Ae(y,f,h);if("number"==typeof y)throw new TypeError('The "value" argument must not be of type number. Received type number');const T=y.valueOf&&y.valueOf();if(null!=T&&T!==y)return A.from(T,f,h);const k=function Xe(y){if(A.isBuffer(y)){const f=0|We(y.length),h=g(f);return 0===h.length||y.copy(h,0,0,f),h}return void 0!==y.length?"number"!=typeof y.length||hr(y.length)?g(0):m(y):"Buffer"===y.type&&Array.isArray(y.data)?m(y.data):void 0}(y);if(k)return k;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof y[Symbol.toPrimitive])return A.from(y[Symbol.toPrimitive]("string"),f,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}function G(y){if("number"!=typeof y)throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function X(y){return G(y),g(y<0?0:0|We(y))}function m(y){const f=y.length<0?0:0|We(y.length),h=g(f);for(let T=0;T<f;T+=1)h[T]=255&y[T];return h}function Ae(y,f,h){if(f<0||y.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<f+(h||0))throw new RangeError('"length" is outside of buffer bounds');let T;return T=void 0===f&&void 0===h?new Uint8Array(y):void 0===h?new Uint8Array(y,f):new Uint8Array(y,f,h),Object.setPrototypeOf(T,A.prototype),T}function We(y){if(y>=we)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+we.toString(16)+" bytes");return 0|y}function ut(y,f){if(A.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||_t(y,ArrayBuffer))return y.byteLength;if("string"!=typeof y)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const h=y.length,T=arguments.length>2&&!0===arguments[2];if(!T&&0===h)return 0;let k=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return _e(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return js(y).length;default:if(k)return T?-1:_e(y).length;f=(""+f).toLowerCase(),k=!0}}function Xt(y,f,h){let T=!1;if((void 0===f||f<0)&&(f=0),f>this.length||((void 0===h||h>this.length)&&(h=this.length),h<=0)||(h>>>=0)<=(f>>>=0))return"";for(y||(y="utf8");;)switch(y){case"hex":return zr(this,f,h);case"utf8":case"utf-8":return ne(this,f,h);case"ascii":return Ls(this,f,h);case"latin1":case"binary":return bs(this,f,h);case"base64":return ve(this,f,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bn(this,f,h);default:if(T)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),T=!0}}function de(y,f,h){const T=y[f];y[f]=y[h],y[h]=T}function On(y,f,h,T,k){if(0===y.length)return-1;if("string"==typeof h?(T=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),hr(h=+h)&&(h=k?0:y.length-1),h<0&&(h=y.length+h),h>=y.length){if(k)return-1;h=y.length-1}else if(h<0){if(!k)return-1;h=0}if("string"==typeof f&&(f=A.from(f,T)),A.isBuffer(f))return 0===f.length?-1:cr(y,f,h,T,k);if("number"==typeof f)return f&=255,"function"==typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(y,f,h):Uint8Array.prototype.lastIndexOf.call(y,f,h):cr(y,[f],h,T,k);throw new TypeError("val must be string, number or Buffer")}function cr(y,f,h,T,k){let je,b=1,P=y.length,se=f.length;if(void 0!==T&&("ucs2"===(T=String(T).toLowerCase())||"ucs-2"===T||"utf16le"===T||"utf-16le"===T)){if(y.length<2||f.length<2)return-1;b=2,P/=2,se/=2,h/=2}function be(Oe,Se){return 1===b?Oe[Se]:Oe.readUInt16BE(Se*b)}if(k){let Oe=-1;for(je=h;je<P;je++)if(be(y,je)===be(f,-1===Oe?0:je-Oe)){if(-1===Oe&&(Oe=je),je-Oe+1===se)return Oe*b}else-1!==Oe&&(je-=je-Oe),Oe=-1}else for(h+se>P&&(h=P-se),je=h;je>=0;je--){let Oe=!0;for(let Se=0;Se<se;Se++)if(be(y,je+Se)!==be(f,Se)){Oe=!1;break}if(Oe)return je}return-1}function Yr(y,f,h,T){h=Number(h)||0;const k=y.length-h;T?(T=Number(T))>k&&(T=k):T=k;const b=f.length;let P;for(T>b/2&&(T=b/2),P=0;P<T;++P){const se=parseInt(f.substr(2*P,2),16);if(hr(se))return P;y[h+P]=se}return P}function w(y,f,h,T){return Zr(_e(f,y.length-h),y,h,T)}function W(y,f,h,T){return Zr(function rn(y){const f=[];for(let h=0;h<y.length;++h)f.push(255&y.charCodeAt(h));return f}(f),y,h,T)}function ie(y,f,h,T){return Zr(js(f),y,h,T)}function In(y,f,h,T){return Zr(function _s(y,f){let h,T,k;const b=[];for(let P=0;P<y.length&&!((f-=2)<0);++P)h=y.charCodeAt(P),T=h>>8,k=h%256,b.push(k),b.push(T);return b}(f,y.length-h),y,h,T)}function ve(y,f,h){return Z.fromByteArray(0===f&&h===y.length?y:y.slice(f,h))}function ne(y,f,h){h=Math.min(y.length,h);const T=[];let k=f;for(;k<h;){const b=y[k];let P=null,se=b>239?4:b>223?3:b>191?2:1;if(k+se<=h){let be,je,Oe,Se;switch(se){case 1:b<128&&(P=b);break;case 2:be=y[k+1],128==(192&be)&&(Se=(31&b)<<6|63&be,Se>127&&(P=Se));break;case 3:be=y[k+1],je=y[k+2],128==(192&be)&&128==(192&je)&&(Se=(15&b)<<12|(63&be)<<6|63&je,Se>2047&&(Se<55296||Se>57343)&&(P=Se));break;case 4:be=y[k+1],je=y[k+2],Oe=y[k+3],128==(192&be)&&128==(192&je)&&128==(192&Oe)&&(Se=(15&b)<<18|(63&be)<<12|(63&je)<<6|63&Oe,Se>65535&&Se<1114112&&(P=Se))}}null===P?(P=65533,se=1):P>65535&&(P-=65536,T.push(P>>>10&1023|55296),P=56320|1023&P),T.push(P),k+=se}return function Wt(y){const f=y.length;if(f<=bt)return String.fromCharCode.apply(String,y);let h="",T=0;for(;T<f;)h+=String.fromCharCode.apply(String,y.slice(T,T+=bt));return h}(T)}Ee.kMaxLength=we,!(A.TYPED_ARRAY_SUPPORT=function Y(){try{const y=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(y,f),42===y.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}}),A.poolSize=8192,A.from=function(y,f,h){return L(y,f,h)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array),A.alloc=function(y,f,h){return function B(y,f,h){return G(y),y<=0?g(y):void 0!==f?"string"==typeof h?g(y).fill(f,h):g(y).fill(f):g(y)}(y,f,h)},A.allocUnsafe=function(y){return X(y)},A.allocUnsafeSlow=function(y){return X(y)},A.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==A.prototype},A.compare=function(f,h){if(_t(f,Uint8Array)&&(f=A.from(f,f.offset,f.byteLength)),_t(h,Uint8Array)&&(h=A.from(h,h.offset,h.byteLength)),!A.isBuffer(f)||!A.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let T=f.length,k=h.length;for(let b=0,P=Math.min(T,k);b<P;++b)if(f[b]!==h[b]){T=f[b],k=h[b];break}return T<k?-1:k<T?1:0},A.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return A.alloc(0);let T;if(void 0===h)for(h=0,T=0;T<f.length;++T)h+=f[T].length;const k=A.allocUnsafe(h);let b=0;for(T=0;T<f.length;++T){let P=f[T];if(_t(P,Uint8Array))b+P.length>k.length?(A.isBuffer(P)||(P=A.from(P)),P.copy(k,b)):Uint8Array.prototype.set.call(k,P,b);else{if(!A.isBuffer(P))throw new TypeError('"list" argument must be an Array of Buffers');P.copy(k,b)}b+=P.length}return k},A.byteLength=ut,A.prototype._isBuffer=!0,A.prototype.swap16=function(){const f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)de(this,h,h+1);return this},A.prototype.swap32=function(){const f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)de(this,h,h+3),de(this,h+1,h+2);return this},A.prototype.swap64=function(){const f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)de(this,h,h+7),de(this,h+1,h+6),de(this,h+2,h+5),de(this,h+3,h+4);return this},A.prototype.toLocaleString=A.prototype.toString=function(){const f=this.length;return 0===f?"":0===arguments.length?ne(this,0,f):Xt.apply(this,arguments)},A.prototype.equals=function(f){if(!A.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||0===A.compare(this,f)},A.prototype.inspect=function(){let f="";const h=Ee.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},O&&(A.prototype[O]=A.prototype.inspect),A.prototype.compare=function(f,h,T,k,b){if(_t(f,Uint8Array)&&(f=A.from(f,f.offset,f.byteLength)),!A.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===h&&(h=0),void 0===T&&(T=f?f.length:0),void 0===k&&(k=0),void 0===b&&(b=this.length),h<0||T>f.length||k<0||b>this.length)throw new RangeError("out of range index");if(k>=b&&h>=T)return 0;if(k>=b)return-1;if(h>=T)return 1;if(this===f)return 0;let P=(b>>>=0)-(k>>>=0),se=(T>>>=0)-(h>>>=0);const be=Math.min(P,se),je=this.slice(k,b),Oe=f.slice(h,T);for(let Se=0;Se<be;++Se)if(je[Se]!==Oe[Se]){P=je[Se],se=Oe[Se];break}return P<se?-1:se<P?1:0},A.prototype.includes=function(f,h,T){return-1!==this.indexOf(f,h,T)},A.prototype.indexOf=function(f,h,T){return On(this,f,h,T,!0)},A.prototype.lastIndexOf=function(f,h,T){return On(this,f,h,T,!1)},A.prototype.write=function(f,h,T,k){if(void 0===h)k="utf8",T=this.length,h=0;else if(void 0===T&&"string"==typeof h)k=h,T=this.length,h=0;else{if(!isFinite(h))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h>>>=0,isFinite(T)?(T>>>=0,void 0===k&&(k="utf8")):(k=T,T=void 0)}const b=this.length-h;if((void 0===T||T>b)&&(T=b),f.length>0&&(T<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let P=!1;for(;;)switch(k){case"hex":return Yr(this,f,h,T);case"utf8":case"utf-8":return w(this,f,h,T);case"ascii":case"latin1":case"binary":return W(this,f,h,T);case"base64":return ie(this,f,h,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return In(this,f,h,T);default:if(P)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),P=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const bt=4096;function Ls(y,f,h){let T="";h=Math.min(y.length,h);for(let k=f;k<h;++k)T+=String.fromCharCode(127&y[k]);return T}function bs(y,f,h){let T="";h=Math.min(y.length,h);for(let k=f;k<h;++k)T+=String.fromCharCode(y[k]);return T}function zr(y,f,h){const T=y.length;(!f||f<0)&&(f=0),(!h||h<0||h>T)&&(h=T);let k="";for(let b=f;b<h;++b)k+=on[y[b]];return k}function Bn(y,f,h){const T=y.slice(f,h);let k="";for(let b=0;b<T.length-1;b+=2)k+=String.fromCharCode(T[b]+256*T[b+1]);return k}function tt(y,f,h){if(y%1!=0||y<0)throw new RangeError("offset is not uint");if(y+f>h)throw new RangeError("Trying to access beyond buffer length")}function ht(y,f,h,T,k,b){if(!A.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>k||f<b)throw new RangeError('"value" argument is out of bounds');if(h+T>y.length)throw new RangeError("Index out of range")}function D(y,f,h,T,k){Fn(f,T,k,y,h,7);let b=Number(f&BigInt(4294967295));y[h++]=b,b>>=8,y[h++]=b,b>>=8,y[h++]=b,b>>=8,y[h++]=b;let P=Number(f>>BigInt(32)&BigInt(4294967295));return y[h++]=P,P>>=8,y[h++]=P,P>>=8,y[h++]=P,P>>=8,y[h++]=P,h}function Ct(y,f,h,T,k){Fn(f,T,k,y,h,7);let b=Number(f&BigInt(4294967295));y[h+7]=b,b>>=8,y[h+6]=b,b>>=8,y[h+5]=b,b>>=8,y[h+4]=b;let P=Number(f>>BigInt(32)&BigInt(4294967295));return y[h+3]=P,P>>=8,y[h+2]=P,P>>=8,y[h+1]=P,P>>=8,y[h]=P,h+8}function mt(y,f,h,T,k,b){if(h+T>y.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Jr(y,f,h,T,k){return f=+f,h>>>=0,k||mt(y,0,h,4),Ie.write(y,f,h,T,23,4),h+4}function fr(y,f,h,T,k){return f=+f,h>>>=0,k||mt(y,0,h,8),Ie.write(y,f,h,T,52,8),h+8}A.prototype.slice=function(f,h){const T=this.length;(f=~~f)<0?(f+=T)<0&&(f=0):f>T&&(f=T),(h=void 0===h?T:~~h)<0?(h+=T)<0&&(h=0):h>T&&(h=T),h<f&&(h=f);const k=this.subarray(f,h);return Object.setPrototypeOf(k,A.prototype),k},A.prototype.readUintLE=A.prototype.readUIntLE=function(f,h,T){f>>>=0,h>>>=0,T||tt(f,h,this.length);let k=this[f],b=1,P=0;for(;++P<h&&(b*=256);)k+=this[f+P]*b;return k},A.prototype.readUintBE=A.prototype.readUIntBE=function(f,h,T){f>>>=0,h>>>=0,T||tt(f,h,this.length);let k=this[f+--h],b=1;for(;h>0&&(b*=256);)k+=this[f+--h]*b;return k},A.prototype.readUint8=A.prototype.readUInt8=function(f,h){return f>>>=0,h||tt(f,1,this.length),this[f]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(f,h){return f>>>=0,h||tt(f,2,this.length),this[f]|this[f+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(f,h){return f>>>=0,h||tt(f,2,this.length),this[f]<<8|this[f+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(f,h){return f>>>=0,h||tt(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(f,h){return f>>>=0,h||tt(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},A.prototype.readBigUInt64LE=jt(function(f){$t(f>>>=0,"offset");const h=this[f],T=this[f+7];(void 0===h||void 0===T)&&Pt(f,this.length-8);const k=h+256*this[++f]+65536*this[++f]+this[++f]*2**24,b=this[++f]+256*this[++f]+65536*this[++f]+T*2**24;return BigInt(k)+(BigInt(b)<<BigInt(32))}),A.prototype.readBigUInt64BE=jt(function(f){$t(f>>>=0,"offset");const h=this[f],T=this[f+7];(void 0===h||void 0===T)&&Pt(f,this.length-8);const k=h*2**24+65536*this[++f]+256*this[++f]+this[++f],b=this[++f]*2**24+65536*this[++f]+256*this[++f]+T;return(BigInt(k)<<BigInt(32))+BigInt(b)}),A.prototype.readIntLE=function(f,h,T){f>>>=0,h>>>=0,T||tt(f,h,this.length);let k=this[f],b=1,P=0;for(;++P<h&&(b*=256);)k+=this[f+P]*b;return b*=128,k>=b&&(k-=Math.pow(2,8*h)),k},A.prototype.readIntBE=function(f,h,T){f>>>=0,h>>>=0,T||tt(f,h,this.length);let k=h,b=1,P=this[f+--k];for(;k>0&&(b*=256);)P+=this[f+--k]*b;return b*=128,P>=b&&(P-=Math.pow(2,8*h)),P},A.prototype.readInt8=function(f,h){return f>>>=0,h||tt(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},A.prototype.readInt16LE=function(f,h){f>>>=0,h||tt(f,2,this.length);const T=this[f]|this[f+1]<<8;return 32768&T?4294901760|T:T},A.prototype.readInt16BE=function(f,h){f>>>=0,h||tt(f,2,this.length);const T=this[f+1]|this[f]<<8;return 32768&T?4294901760|T:T},A.prototype.readInt32LE=function(f,h){return f>>>=0,h||tt(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},A.prototype.readInt32BE=function(f,h){return f>>>=0,h||tt(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},A.prototype.readBigInt64LE=jt(function(f){$t(f>>>=0,"offset");const h=this[f],T=this[f+7];return(void 0===h||void 0===T)&&Pt(f,this.length-8),(BigInt(this[f+4]+256*this[f+5]+65536*this[f+6]+(T<<24))<<BigInt(32))+BigInt(h+256*this[++f]+65536*this[++f]+this[++f]*2**24)}),A.prototype.readBigInt64BE=jt(function(f){$t(f>>>=0,"offset");const h=this[f],T=this[f+7];(void 0===h||void 0===T)&&Pt(f,this.length-8);const k=(h<<24)+65536*this[++f]+256*this[++f]+this[++f];return(BigInt(k)<<BigInt(32))+BigInt(this[++f]*2**24+65536*this[++f]+256*this[++f]+T)}),A.prototype.readFloatLE=function(f,h){return f>>>=0,h||tt(f,4,this.length),Ie.read(this,f,!0,23,4)},A.prototype.readFloatBE=function(f,h){return f>>>=0,h||tt(f,4,this.length),Ie.read(this,f,!1,23,4)},A.prototype.readDoubleLE=function(f,h){return f>>>=0,h||tt(f,8,this.length),Ie.read(this,f,!0,52,8)},A.prototype.readDoubleBE=function(f,h){return f>>>=0,h||tt(f,8,this.length),Ie.read(this,f,!1,52,8)},A.prototype.writeUintLE=A.prototype.writeUIntLE=function(f,h,T,k){f=+f,h>>>=0,T>>>=0,k||ht(this,f,h,T,Math.pow(2,8*T)-1,0);let b=1,P=0;for(this[h]=255&f;++P<T&&(b*=256);)this[h+P]=f/b&255;return h+T},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(f,h,T,k){f=+f,h>>>=0,T>>>=0,k||ht(this,f,h,T,Math.pow(2,8*T)-1,0);let b=T-1,P=1;for(this[h+b]=255&f;--b>=0&&(P*=256);)this[h+b]=f/P&255;return h+T},A.prototype.writeUint8=A.prototype.writeUInt8=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,1,255,0),this[h]=255&f,h+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,2,65535,0),this[h]=255&f,this[h+1]=f>>>8,h+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=255&f,h+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=255&f,h+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=255&f,h+4},A.prototype.writeBigUInt64LE=jt(function(f,h=0){return D(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeBigUInt64BE=jt(function(f,h=0){return Ct(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeIntLE=function(f,h,T,k){if(f=+f,h>>>=0,!k){const be=Math.pow(2,8*T-1);ht(this,f,h,T,be-1,-be)}let b=0,P=1,se=0;for(this[h]=255&f;++b<T&&(P*=256);)f<0&&0===se&&0!==this[h+b-1]&&(se=1),this[h+b]=(f/P>>0)-se&255;return h+T},A.prototype.writeIntBE=function(f,h,T,k){if(f=+f,h>>>=0,!k){const be=Math.pow(2,8*T-1);ht(this,f,h,T,be-1,-be)}let b=T-1,P=1,se=0;for(this[h+b]=255&f;--b>=0&&(P*=256);)f<0&&0===se&&0!==this[h+b+1]&&(se=1),this[h+b]=(f/P>>0)-se&255;return h+T},A.prototype.writeInt8=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=255&f,h+1},A.prototype.writeInt16LE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,2,32767,-32768),this[h]=255&f,this[h+1]=f>>>8,h+2},A.prototype.writeInt16BE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=255&f,h+2},A.prototype.writeInt32LE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,4,2147483647,-2147483648),this[h]=255&f,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},A.prototype.writeInt32BE=function(f,h,T){return f=+f,h>>>=0,T||ht(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=255&f,h+4},A.prototype.writeBigInt64LE=jt(function(f,h=0){return D(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeBigInt64BE=jt(function(f,h=0){return Ct(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeFloatLE=function(f,h,T){return Jr(this,f,h,!0,T)},A.prototype.writeFloatBE=function(f,h,T){return Jr(this,f,h,!1,T)},A.prototype.writeDoubleLE=function(f,h,T){return fr(this,f,h,!0,T)},A.prototype.writeDoubleBE=function(f,h,T){return fr(this,f,h,!1,T)},A.prototype.copy=function(f,h,T,k){if(!A.isBuffer(f))throw new TypeError("argument should be a Buffer");if(T||(T=0),!k&&0!==k&&(k=this.length),h>=f.length&&(h=f.length),h||(h=0),k>0&&k<T&&(k=T),k===T||0===f.length||0===this.length)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),f.length-h<k-T&&(k=f.length-h+T);const b=k-T;return this===f&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(h,T,k):Uint8Array.prototype.set.call(f,this.subarray(T,k),h),b},A.prototype.fill=function(f,h,T,k){if("string"==typeof f){if("string"==typeof h?(k=h,h=0,T=this.length):"string"==typeof T&&(k=T,T=this.length),void 0!==k&&"string"!=typeof k)throw new TypeError("encoding must be a string");if("string"==typeof k&&!A.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(1===f.length){const P=f.charCodeAt(0);("utf8"===k&&P<128||"latin1"===k)&&(f=P)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(h<0||this.length<h||this.length<T)throw new RangeError("Out of range index");if(T<=h)return this;let b;if(h>>>=0,T=void 0===T?this.length:T>>>0,f||(f=0),"number"==typeof f)for(b=h;b<T;++b)this[b]=f;else{const P=A.isBuffer(f)?f:A.from(f,k),se=P.length;if(0===se)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(b=0;b<T-h;++b)this[b+h]=P[b%se]}return this};const qt={};function Qr(y,f,h){qt[y]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,delete this.name}get code(){return y}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}function zi(y){let f="",h=y.length;const T="-"===y[0]?1:0;for(;h>=T+4;h-=3)f=`_${y.slice(h-3,h)}${f}`;return`${y.slice(0,h)}${f}`}function Fn(y,f,h,T,k,b){if(y>h||y<f){const P="bigint"==typeof f?"n":"";let se;throw se=b>3?0===f||f===BigInt(0)?`>= 0${P} and < 2${P} ** ${8*(b+1)}${P}`:`>= -(2${P} ** ${8*(b+1)-1}${P}) and < 2 ** ${8*(b+1)-1}${P}`:`>= ${f}${P} and <= ${h}${P}`,new qt.ERR_OUT_OF_RANGE("value",se,y)}!function $(y,f,h){$t(f,"offset"),(void 0===y[f]||void 0===y[f+h])&&Pt(f,y.length-(h+1))}(T,k,b)}function $t(y,f){if("number"!=typeof y)throw new qt.ERR_INVALID_ARG_TYPE(f,"number",y)}function Pt(y,f,h){throw Math.floor(y)!==y?($t(y,h),new qt.ERR_OUT_OF_RANGE(h||"offset","an integer",y)):f<0?new qt.ERR_BUFFER_OUT_OF_BOUNDS:new qt.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${f}`,y)}Qr("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Qr("ERR_INVALID_ARG_TYPE",function(y,f){return`The "${y}" argument must be of type number. Received type ${typeof f}`},TypeError),Qr("ERR_OUT_OF_RANGE",function(y,f,h){let T=`The value of "${y}" is out of range.`,k=h;return Number.isInteger(h)&&Math.abs(h)>2**32?k=zi(String(h)):"bigint"==typeof h&&(k=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(k=zi(k)),k+="n"),T+=` It must be ${f}. Received ${k}`,T},RangeError);const Ps=/[^+/0-9A-Za-z-_]/g;function _e(y,f){let h;f=f||1/0;const T=y.length;let k=null;const b=[];for(let P=0;P<T;++P){if(h=y.charCodeAt(P),h>55295&&h<57344){if(!k){if(h>56319){(f-=3)>-1&&b.push(239,191,189);continue}if(P+1===T){(f-=3)>-1&&b.push(239,191,189);continue}k=h;continue}if(h<56320){(f-=3)>-1&&b.push(239,191,189),k=h;continue}h=65536+(k-55296<<10|h-56320)}else k&&(f-=3)>-1&&b.push(239,191,189);if(k=null,h<128){if((f-=1)<0)break;b.push(h)}else if(h<2048){if((f-=2)<0)break;b.push(h>>6|192,63&h|128)}else if(h<65536){if((f-=3)<0)break;b.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((f-=4)<0)break;b.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return b}function js(y){return Z.toByteArray(function Vn(y){if((y=(y=y.split("=")[0]).trim().replace(Ps,"")).length<2)return"";for(;y.length%4!=0;)y+="=";return y}(y))}function Zr(y,f,h,T){let k;for(k=0;k<T&&!(k+h>=f.length||k>=y.length);++k)f[k+h]=y[k];return k}function _t(y,f){return y instanceof f||null!=y&&null!=y.constructor&&null!=y.constructor.name&&y.constructor.name===f.name}function hr(y){return y!=y}const on=function(){const y="0123456789abcdef",f=new Array(256);for(let h=0;h<16;++h){const T=16*h;for(let k=0;k<16;++k)f[T+k]=y[h]+y[k]}return f}();function jt(y){return typeof BigInt>"u"?Ji:y}function Ji(){throw new Error("BigInt not supported")}},8495:(Un,Ee)=>{!function(){var me=typeof window<"u"?window:global,Z={};for(var Ie in function(O,we,Y){var g;function A(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var L="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},B=function G(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof O&&O,"object"==typeof self&&self,"object"==typeof we&&we];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function X(e,t){if(t)e:{for(var n=B,r=e.split("."),i=0;i<r.length-1;i++){var o=r[i];if(!(o in n))break e;n=n[o]}(o=t(i=n[r=r[r.length-1]]))!=i&&null!=o&&L(n,r,{configurable:!0,writable:!0,value:o})}}function te(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:A(e)}}function K(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}X("Symbol",function(e){function n(o,s){this.g=o,L(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(o||"")+"_"+i++,o)}}),X("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=B[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&L(r.prototype,e,{configurable:!0,writable:!0,value:function(){return te(A(this))}})}return e});var Xe,Ae="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)Xe=Object.setPrototypeOf;else{var We;e:{var ut={};try{ut.__proto__={a:!0},We=ut.a;break e}catch{}We=!1}Xe=We?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Xt=Xe;function de(e,t){if(e.prototype=Ae(t.prototype),e.prototype.constructor=e,Xt)Xt(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Pg=t.prototype}function On(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function cr(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function Yr(e,t){e.i={ke:t,re:!0},e.g=e.m||e.j}function w(e,t,n){return e.g=n,{value:t}}function W(e){e.g=0}function ie(e,t,n){e.m=t,null!=n&&(e.j=n)}function In(e){e.m=0,e.j=2}function ve(e,t){e.g=t,e.m=0}function ne(e){e.m=0;var t=e.i.ke;return e.i=null,t}function bt(e){e.u=[e.i],e.m=0,e.j=0}function Wt(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.re?e.g=e.m||e.j:null!=n.B&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function Ls(e){this.g=new On,this.h=e}function zr(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var o=i.value}catch(s){return e.g.l=null,Yr(e.g,s),Bn(e)}return e.g.l=null,r.call(e.g,o),Bn(e)}function Bn(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Yr(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.re)throw t.ke;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function tt(e){this.next=function(t){return cr(e.g),e.g.l?t=zr(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Bn(e)),t},this.throw=function(t){return cr(e.g),e.g.l?t=zr(e,e.g.l.throw,t,e.g.s):(Yr(e.g,t),t=Bn(e)),t},this.return=function(t){return function bs(e,t){cr(e.g);var n=e.g.l;return n?zr(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Bn(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function D(e){return function ht(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,i){!function o(s){s.done?r(s.value):Promise.resolve(s.value).then(t,n).then(o,i)}(e.next())})}(new tt(new Ls(e)))}function Ct(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jr(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{pe:i,v:o}}return{pe:-1,v:void 0}}function fr(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function qt(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}On.prototype.s=function(e){this.h=e},On.prototype.return=function(e){this.i={return:e},this.g=this.j},On.prototype.B=function(e){this.g=e},X("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function r(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(null==this.g){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var i=B.setTimeout;n.prototype.i=function(s){i(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.F),reject:s(this.l)}},t.prototype.F=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.I(s);else{e:switch(typeof s){case"object":var u=null!=s;break e;case"function":u=!0;break e;default:u=!1}u?this.D(s):this.m(s)}},t.prototype.D=function(s){var u=void 0;try{u=s.then}catch(a){return void this.l(a)}"function"==typeof u?this.L(u,s):this.m(s)},t.prototype.l=function(s){this.s(2,s)},t.prototype.m=function(s){this.s(1,s)},t.prototype.s=function(s,u){if(0!=this.h)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var s=this;i(function(){if(s.C()){var u=B.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var s=B.CustomEvent,u=B.Event,a=B.dispatchEvent;return typeof a>"u"||("function"==typeof s?s=new s("unhandledrejection",{cancelable:!0}):"function"==typeof u?s=new u("unhandledrejection",{cancelable:!0}):(s=B.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,s),s.promise=this,s.reason=this.i,a(s))},t.prototype.u=function(){if(null!=this.g){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.I=function(s){var u=this.j();s.zc(u.resolve,u.reject)},t.prototype.L=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(d,v){return"function"==typeof d?function(x){try{l(d(x))}catch(E){c(E)}}:v}var l,c,p=new t(function(d,v){l=d,c=v});return this.zc(a(s,l),a(u,c)),p},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.zc=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;null==this.g?o.h(a):this.g.push(a),this.o=!0},t.resolve=r,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=m(s),c=l.next();!c.done;c=l.next())r(c.value).zc(u,a)})},t.all=function(s){var u=m(s),a=u.next();return a.done?r([]):new t(function(l,c){function p(x){return function(E){d[x]=E,0==--v&&l(d)}}var d=[],v=0;do{d.push(void 0),v++,r(a.value).zc(p(d.length-1),c),a=u.next()}while(!a.done)})},t}),X("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=m(a);for(var l;!(l=a.next()).done;)this.set((l=l.value)[0],l[1])}}function n(){}function r(a){var l=typeof a;return"object"===l&&null!==a||"function"===l}function i(a){if(!mt(a,s)){var l=new n;L(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&i(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return 2==c.get(a)&&3==c.get(l)&&(c.delete(a),c.set(l,4),!c.has(a)&&4==c.get(l))}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!r(a))throw Error("Invalid WeakMap key");if(i(a),!mt(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return r(a)&&mt(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return r(a)&&mt(a,s)&&mt(a[s],this.g)},t.prototype.delete=function(a){return!!(r(a)&&mt(a,s)&&mt(a[s],this.g))&&delete a[s][this.g]},t}),X("Map",function(e){function t(){var u={};return u.Ra=u.next=u.head=u}function n(u,a){var l=u.g;return te(function(){if(l){for(;l.head!=u.g;)l=l.Ra;for(;l.next!=l.head;)return{done:!1,value:a(l=l.next)};l=null}return{done:!0,value:void 0}})}function r(u,a){var l=a&&typeof a;"object"==l||"function"==l?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u.h[l];if(c&&mt(u.h,l))for(var p=0;p<c.length;p++){var d=c[p];if(a!=a&&d.key!=d.key||a===d.key)return{id:l,list:c,index:p,ja:d}}return{id:l,list:c,index:-1,ja:void 0}}function i(u){if(this.h={},this.g=t(),this.size=0,u){u=m(u);for(var a;!(a=u.next()).done;)this.set((a=a.value)[0],a[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var u=Object.seal({x:4}),a=new e(m([[u,"s"]]));if("s"!=a.get(u)||1!=a.size||a.get({x:4})||a.set({x:4},"t")!=a||2!=a.size)return!1;var l=a.entries(),c=l.next();return!c.done&&c.value[0]==u&&"s"==c.value[1]&&!((c=l.next()).done||4!=c.value[0].x||"t"!=c.value[1]||!l.next().done)}catch{return!1}}())return e;var o=new WeakMap;i.prototype.set=function(u,a){var l=r(this,u=0===u?0:u);return l.list||(l.list=this.h[l.id]=[]),l.ja?l.ja.value=a:(l.ja={next:this.g,Ra:this.g.Ra,head:this.g,key:u,value:a},l.list.push(l.ja),this.g.Ra.next=l.ja,this.g.Ra=l.ja,this.size++),this},i.prototype.delete=function(u){return!(!(u=r(this,u)).ja||!u.list||(u.list.splice(u.index,1),u.list.length||delete this.h[u.id],u.ja.Ra.next=u.ja.next,u.ja.next.Ra=u.ja.Ra,u.ja.head=null,this.size--,0))},i.prototype.clear=function(){this.h={},this.g=this.g.Ra=t(),this.size=0},i.prototype.has=function(u){return!!r(this,u).ja},i.prototype.get=function(u){return(u=r(this,u).ja)&&u.value},i.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},i.prototype.keys=function(){return n(this,function(u){return u.key})},i.prototype.values=function(){return n(this,function(u){return u.value})},i.prototype.forEach=function(u,a){for(var c,l=this.entries();!(c=l.next()).done;)u.call(a,(c=c.value)[1],c[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),X("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||1!=r.size||r.add(n)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var i=r.entries(),o=i.next();return!o.done&&o.value[0]==n&&o.value[1]==n&&!(o=i.next()).done&&o.value[0]!=n&&4==o.value[0].x&&o.value[1]==o.value[0]&&i.next().done}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n=0===n?0:n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.keys=t.prototype.values=function(){return this.g.values()},t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var i=this;this.g.forEach(function(o){return n.call(r,o,o,i)})},t)}),X("Array.prototype.findIndex",function(e){return e||function(t,n){return Jr(this,t,n).pe}}),X("Object.is",function(e){return e||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}}),X("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var i=r.length,o=n||0;for(0>o&&(o=Math.max(o+i,0));o<i;o++){var s=r[o];if(s===t||Object.is(s,t))return!0}return!1}}),X("String.prototype.includes",function(e){return e||function(t,n){return-1!==fr(this,t,"includes").indexOf(t,n||0)}}),X("Array.prototype.find",function(e){return e||function(t,n){return Jr(this,t,n).v}}),X("String.prototype.startsWith",function(e){return e||function(t,n){for(var r=fr(this,t,"startsWith"),i=r.length,o=t.length,s=Math.max(0,Math.min(0|n,r.length)),u=0;u<o&&s<i;)if(r[s++]!=t[u++])return!1;return u>=o}}),X("Array.prototype.keys",function(e){return e||function(){return qt(this,function(t){return t})}});var Qr="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)mt(r,i)&&(e[i]=r[i])}return e};X("Object.assign",function(e){return e||Qr}),X("Array.from",function(e){return e||function(t,n,r){n=n??function(u){return u};var i=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if("function"==typeof o){t=o.call(t);for(var s=0;!(o=t.next()).done;)i.push(n.call(r,o.value,s++))}else for(o=t.length,s=0;s<o;s++)i.push(n.call(r,t[s],s));return i}}),X("Array.prototype.values",function(e){return e||function(){return qt(this,function(t,n){return n})}}),X("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),X("Array.prototype.entries",function(e){return e||function(){return qt(this,function(t,n){return[t,n]})}}),X("String.prototype.repeat",function(e){return e||function(t){var n=fr(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)1&t&&(r+=n),(t>>>=1)&&(n+=n);return r}}),X("Number.isNaN",function(e){return e||function(t){return"number"==typeof t&&isNaN(t)}}),X("Object.values",function(e){return e||function(t){var r,n=[];for(r in t)mt(t,r)&&n.push(t[r]);return n}}),X("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),X("Object.entries",function(e){return e||function(t){var r,n=[];for(r in t)mt(t,r)&&n.push([r,t[r]]);return n}});var zi=this||self;function $(e,t){var i,n=e.split("."),r=zi;n[0]in r||typeof r.execScript>"u"||r.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)n.length||void 0===t?r=r[i]&&r[i]!==Object.prototype[i]?r[i]:r[i]={}:r[i]=t}function Fn(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function $t(e){return e.h/(1-Math.pow(e.g,e.i))}function Pt(){this.h=new Fn(2),this.j=new Fn(5),this.g=0,this.i=128e3,this.l=16e3}function Ps(){}function Vn(){}function _e(){}function rn(e){var t=Ct.apply(1,arguments);hr.has(e)||(hr.add(e),_e.apply(Ps,K(t)))}function _s(){}Fn.prototype.sample=function(e,t){var n=Math.pow(this.g,e);n=t*(1-n)+n*this.h,isNaN(n)||(this.h=n,this.i+=e)},Pt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Pt.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e,r=e/1e3;this.g+=t,this.h.sample(r,n),this.j.sample(r,n)}},Pt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min($t(this.h),$t(this.j))};var hr=new Set;if(O.console&&O.console.log.bind){var on={},jt=(on[1]=console.error.bind(console),on[2]=console.warn.bind(console),on[3]=console.info.bind(console),on[4]=console.log.bind(console),on[5]=console.debug.bind(console),on[6]=console.debug.bind(console),on);_e=jt[2],Vn=jt[1]}function Ji(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function y(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function f(e,t,n){if(n||(n=Ji),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=m(e)).next();!i.done;r={ad:r.ad},i=e.next()){if(r.ad=i.value,-1==(i=t.findIndex(function(o){return function(s){return n(o.ad,s)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function h(e,t,n){if(n||(n=Ji),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function T(e,t,n){this.startTime=e,this.direction=Oe,this.endTime=t,this.payload=n,this.region=new pr,this.position=null,this.positionAlign=b,this.size=0,this.textAlign=P,this.writingMode=Se,this.lineInterpretation=Us,this.line=null,this.lineHeight="",this.lineAlign=Hn,this.displayAlign=be,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=cl,this.fontStyle=Bs,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function k(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!h(e.nestedCues,t.nestedCues,k))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!h(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}T.prototype.clone=function(){var t,e=new T(0,0,"");for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e},$("shaka.text.Cue",T);var b="auto";T.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:b};var P="center",se={LEFT:"left",RIGHT:"right",CENTER:P,START:"start",END:"end"};T.textAlign=se;var be="after",je={BEFORE:"before",CENTER:"center",AFTER:be};T.displayAlign=je;var Oe="ltr";T.direction={HORIZONTAL_LEFT_TO_RIGHT:Oe,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Se="horizontal-tb";T.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Se,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Us=0;T.lineInterpretation={LINE_NUMBER:Us,PERCENTAGE:1};var Hn="start",Os={CENTER:"center",START:Hn,END:"end"};T.lineAlign=Os;var al={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};T.defaultTextColor=al;var ll={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};T.defaultTextBackgroundColor=ll;var cl=400;T.fontWeight={NORMAL:cl,BOLD:700};var Bs="normal",fl={NORMAL:Bs,ITALIC:"italic",OBLIQUE:"oblique"};function pr(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Yt,this.scroll=hl}T.fontStyle=fl,T.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},$("shaka.text.CueRegion",pr);var Yt=1;pr.units={PX:0,PERCENTAGE:Yt,LINES:2};var hl="";function ei(){}function zt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Fs(e)==Fs(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=Te(e),r=Te(t),i=0;i<e.byteLength;i++)if(n[i]!=r[i])return!1;return!0}function Fs(e){return e instanceof ArrayBuffer?e:e.buffer}function Ut(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Te(e,t,n){return pl(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function vt(e,t,n){return pl(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function pl(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(Fs(e),t,Math.min(t+Math.max(n,0),i)-t)}function Vs(e,t){this.g=e,this.h=t}function yt(e,t){var n=new Vs(4,0),i=dl.g;(0<(n.g-i.g||n.h-i.h)?dl.i:dl.h)(dl.g,n,e,t)}function Kg(e,t,n,r){_e([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Gg(e,t,n,r){Vn([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}pr.scrollMode={NONE:hl,UP:"up"},$("shaka.util.BufferUtils",ei),ei.toDataView=vt,ei.toUint8=Te,ei.toArrayBuffer=Ut,ei.equal=zt,Vs.prototype.toString=function(){return"v"+this.g+"."+this.h};var dl=null;function Hs(e,t){return e.concat(t)}function Xg(){}function An(e){return null!=e}function Kn(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(yt("Factories requiring new","Factories should be plain functions"),n=t)}catch{yt("Factories requiring new","Factories should be plain functions"),n=new e}return n}function Qi(){}$("shaka.dependencies",Qi),Qi.has=function(e){return ti.has(e)},Qi.add=function(e,t){if(!gl[e])throw Error(e+" is not supported");ti.set(e,function(){return t})};var gl={muxjs:"muxjs"};Qi.Allowed=gl;var ti=new Map([["muxjs",function(){return O.muxjs}]]);function M(e,t,n){var r=Ct.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}M.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},$("shaka.util.Error",M),M.Severity={RECOVERABLE:1,CRITICAL:2},M.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},M.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};var Wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Mt(e){var t;e instanceof Mt?(Zi(this,e.Fa),this.rb=e.rb,this.Ha=e.Ha,Ks(this,e.Jb),this.wa=e.wa,eo(this,e.g.clone()),this.fb=e.fb):e&&(t=String(e).match(Wg))?(Zi(this,t[1]||"",!0),this.rb=ni(t[2]||""),this.Ha=ni(t[3]||"",!0),Ks(this,t[4]),this.wa=ni(t[5]||"",!0),eo(this,t[6]||"",!0),this.fb=ni(t[7]||"")):this.g=new dr(null)}function Zi(e,t,n){e.Fa=n?ni(t,!0):t,e.Fa&&(e.Fa=e.Fa.replace(/:$/,""))}function Ks(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Jb=t}else e.Jb=null}function eo(e,t,n){t instanceof dr?e.g=t:(n||(t=ri(t,zg)),e.g=new dr(t))}function ni(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ri(e,t,n){return null!=e?(e=encodeURI(e).replace(t,qg),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qg(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(g=Mt.prototype).Fa="",g.rb="",g.Ha="",g.Jb=null,g.wa="",g.fb="",g.toString=function(){var e=[],t=this.Fa;if(t&&e.push(ri(t,ml,!0),":"),t=this.Ha){e.push("//");var n=this.rb;n&&e.push(ri(n,ml,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Jb)&&e.push(":",String(t))}return(t=this.wa)&&(this.Ha&&"/"!=t.charAt(0)&&e.push("/"),e.push(ri(t,"/"==t.charAt(0)?Yg:$g,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.fb)&&e.push("#",ri(t,Jg)),e.join("")},g.resolve=function(e){var t=this.clone();"data"===t.Fa&&(t=new Mt);var n=!!e.Fa;n?Zi(t,e.Fa):n=!!e.rb,n?t.rb=e.rb:n=!!e.Ha,n?t.Ha=e.Ha:n=null!=e.Jb;var r=e.wa;if(n)Ks(t,e.Jb);else if(n=!!e.wa){if("/"!=r.charAt(0))if(this.Ha&&!this.wa)r="/"+r;else{var i=t.wa.lastIndexOf("/");-1!=i&&(r=t.wa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var u=r[s++];"."==u?i&&s==r.length&&o.push(""):".."==u?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(u),i=!0)}r=o.join("/")}}return n?t.wa=r:n=""!==e.g.toString(),n?eo(t,e.g.clone()):n=!!e.fb,n&&(t.fb=e.fb),t},g.clone=function(){return new Mt(this)};var ml=/[#\/\?@]/g,$g=/[#\?:]/g,Yg=/[#\?]/g,zg=/[#\?@]/g,Jg=/#/g;function dr(e){this.g=e||null}function vl(e){if(!e.oa&&(e.oa={},e.Bc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),i=i||"",e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}function lt(e,t){if(0==t.length)return e;var n=t.map(function(r){return new Mt(r)});return e.map(function(r){return new Mt(r)}).map(function(r){return n.map(function(i){return r.resolve(i)})}).reduce(Hs,[]).map(function(r){return r.toString()})}function ii(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function oi(e,t){if(1==t.length)return t[0];var n=gr(e,t);if(null!=n)return n;throw new M(2,4,4025,t)}function gr(e,t){for(var n=m(Qg[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=m(t),o=i.next();!o.done;o=i.next())if(r.test((o=o.value).trim()))return o.trim()}return e==Me?"":null}(g=dr.prototype).oa=null,g.Bc=null,g.add=function(e,t){vl(this),this.g=null;var n=this.oa.hasOwnProperty(e)&&this.oa[e];return n||(this.oa[e]=n=[]),n.push(t),this.Bc++,this},g.set=function(e,t){return vl(this),this.g=null,this.oa.hasOwnProperty(e)?this.oa[e]=[t]:this.add(e,t),this},g.toString=function(){if(this.g)return this.g;if(!this.oa)return"";var t,e=[];for(t in this.oa)for(var n=encodeURIComponent(t),r=this.oa[t],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),e.push(o)}return this.g=e.join("&")},g.clone=function(){var e=new dr;if(e.g=this.g,this.oa){var n,t={};for(n in this.oa)t[n]=this.oa[n].concat();e.oa=t,e.Bc=this.Bc}return e};var Me="text",pt={Na:"video",cb:"audio",Z:Me,Tb:"image",hg:"application"},Qg={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function De(){var e,t,n=new Promise(function(r,i){e=r,t=i});return n.resolve=e,n.reject=t,n}function mr(e){this.h=e,this.g=void 0}function si(e){this.h=e,this.g=null}function ue(e){this.h=e,this.g=null}function Ot(){return!(!O.MediaSource||!MediaSource.isTypeSupported)}function vr(e){return""!=wl().canPlayType(e)}function to(){return nt("Xbox One")}function sn(){return nt("Tizen")}function ui(){return nt("Web0S")}function yr(){return nt("CrKey")}function no(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!sn()&&!nt("PC=EOS")&&!nt("VirginMedia")&&!ai()&&!nt("AFT")}function ai(){return nt("PlayStation 4")}function yl(){if(!no())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function nt(e){return(navigator.userAgent||"").includes(e)}function wl(){return wr||(Gs||(Gs=new ue(function(){wr=null})),(wr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(wr=document.createElement("video")),Gs.S(1),wr)}De.prototype.resolve=function(){},De.prototype.reject=function(){},mr.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},si.prototype.S=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){O.clearTimeout(r),n=!1},r=O.setTimeout(function(){n&&t.h()},1e3*e),this},si.prototype.stop=function(){this.g&&(this.g(),this.g=null)},ue.prototype.Nb=function(){return this.stop(),this.h(),this},ue.prototype.S=function(e){var t=this;return this.stop(),this.g=new si(function(){t.h()}).S(e),this},ue.prototype.Da=function(e){var t=this;return this.stop(),this.g=new si(function(){t.g.S(e),t.h()}).S(e),this},ue.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},$("shaka.util.Timer",ue),ue.prototype.stop=ue.prototype.stop,ue.prototype.tickEvery=ue.prototype.Da,ue.prototype.tickAfter=ue.prototype.S,ue.prototype.tickNow=ue.prototype.Nb;var Gs=null,wr=null;function Gn(){}function ct(e){if(!e)return"";if(239==(e=Te(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),O.TextDecoder&&!ai())return(e=(new TextDecoder).decode(e)).includes("\ufffd")&&Vn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(128&e[n]?e.length>=n+2&&192==(224&e[n])&&128==(192&e[n+1])?(r=(31&e[n])<<6|63&e[n+1],n+=1):e.length>=n+3&&224==(240&e[n])&&128==(192&e[n+1])&&128==(192&e[n+2])?(r=(15&e[n])<<12|(63&e[n+1])<<6|63&e[n+2],n+=2):e.length>=n+4&&240==(241&e[n])&&128==(192&e[n+1])&&128==(192&e[n+2])&&128==(192&e[n+3])&&(r=(7&e[n])<<18|(63&e[n+1])<<12|(63&e[n+2])<<6|63&e[n+3],n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{var i=1023&(r-=65536);t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+i)}}return t}function Cn(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new M(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=vt(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return Ws.value()(r)}function ro(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Te(e);if(239==n[0]&&187==n[1]&&191==n[2])return ct(n);if(254==n[0]&&255==n[1])return Cn(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Cn(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Cn(e,!1);if(0==n[1]&&0==n[3])return Cn(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ct(e);throw new M(2,2,2003)}function Xn(e){if(O.TextEncoder&&!ai()){var t=new TextEncoder;return Ut(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ut(t)}function Xs(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}$("shaka.util.StringUtils",Gn),Gn.resetFromCharCode=function(){Ws.g=void 0},Gn.toUTF16=Xs,Gn.toUTF8=Xn,Gn.fromBytesAutoDetect=ro,Gn.fromUTF16=Cn,Gn.fromUTF8=ct;var Ws=new mr(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={Ua:65536};0<t.Ua;(t={Ua:t.Ua}).Ua/=2)if(e(t.Ua))return function(n){return function(r){for(var i="",o=0;o<r.length;o+=n.Ua)i+=String.fromCharCode.apply(null,r.subarray(o,o+n.Ua));return i}}(t);return null});function Jt(){}function Tl(e){return e=Te(e),e=Ws.value()(e),btoa(e)}function Tr(e,t){t=t??!0;var n=Tl(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function Mn(e){e=O.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function qs(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=O.parseInt(e.substr(2*r,2),16);return n}function li(e){var t=Te(e);e="";for(var n=(t=m(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function ci(){for(var e=Ct.apply(0,arguments),t=0,n=m(e),r=n.next();!r.done;r=n.next())t+=r.value.byteLength;for(t=new Uint8Array(t),n=0,r=(e=m(e)).next();!r.done;r=e.next())t.set(Te(r=r.value),n),n+=r.byteLength;return t}function xl(){var e=this;this.o=ti.get("muxjs")(),this.h=this.g=null,this.m=[],this.j=[],this.i=[],this.l=!1,this.o&&(this.g=new this.o.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",function(t){e.j=t.captions,e.i=t.metadata,e.m.push(ci(t.initSegment,t.data))}),this.g.on("done",function(){var t={data:ci.apply(Jt,K(e.m)),captions:e.j,metadata:e.i};e.h.resolve(t),e.l=!1}))}function El(e,t){if(!ti.get("muxjs")()||!Sl(e))return!1;if(t)return MediaSource.isTypeSupported(fi(t,e));var n=fi("audio",e),r=fi("video",e);return MediaSource.isTypeSupported(n)||MediaSource.isTypeSupported(r)}function Sl(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function fi(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],s=Number(r[2]);i=("66"==o?i+"4200":"77"==o?i+"4d00":i+"6400")+(s>>4).toString(16),i+=(15&s).toString(16),n=n.replace(r[0],i)}return n}function Qt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function xr(e,t,n){if(Sl(t=Qt(e,t))){if(ti.get("muxjs")())return fi(n,t)}else if("video/mp2t"!=e&&"audio"==n)return t.replace("video","audio");return t}function Rn(e){var t=hi(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function em(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function hi(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function un(e){this.j=null,this.i=e,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.s="",this.o=new Map}function pi(e){return!(!it[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function Il(e,t,n){if(e.s=t,t=e.o.get(t))for(var r=m(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(o){return o.endTime<=n}))&&e.i.append(i)}function Al(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=m(t.nestedCues)).next();!r.done;r=t.next())Al(e,r.value,n)}function Cl(e,t,n,r,i){for(var o=n+" "+r,s=new Map,u=(t=m(t)).next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),Al(e,a,i),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.s&&e.i.append([a]))}for(o=(i=m(s.keys())).next();!o.done;o=i.next())for(e.o.has(o=o.value)||e.o.set(o,new Map),u=(t=m(s.get(o).keys())).next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.o.get(o).set(u,a);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}$("shaka.util.Uint8ArrayUtils",Jt),Jt.concat=ci,Jt.toHex=li,Jt.fromHex=qs,Jt.fromBase64=Mn,Jt.toBase64=Tr,Jt.toStandardBase64=Tl,Jt.equal=function(e,t){return yt("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),zt(e,t)},xl.prototype.destroy=function(){return this.g&&this.g.dispose(),this.g=null,Promise.resolve()},(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),un.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},un.prototype.remove=function(e,t){var n=this;return D(function(r){if(1==r.g)return w(r,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),W(r)})},$("shaka.text.TextEngine",un),un.prototype.destroy=un.prototype.destroy,un.findParser=function(e){return it[e]},un.unregisterParser=function(e){delete it[e]},un.registerParser=function(e,t){it[e]=t};var it={};function Rt(){}function $s(e,t){return e=ye(e),t=ye(t),e.split("-")[0]==t.split("-")[0]}function di(e,t){e=ye(e),t=ye(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function Ys(e,t){e=ye(e),t=ye(t);var n=e.split("-"),r=t.split("-");return 2==n.length&&2==r.length&&n[0]==r[0]}function ye(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Ml.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Wn(e,t){return e=ye(e),(t=ye(t))==e?4:di(t,e)?3:Ys(t,e)?2:di(e,t)?1:0}function zs(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),Ml.get(e)||e}function Js(e){return e.language?ye(e.language):e.audio&&e.audio.language?ye(e.audio.language):e.video&&e.video.language?ye(e.video.language):"und"}function io(e,t){for(var n=ye(e),r=new Set,i=m(t),o=i.next();!o.done;o=i.next())r.add(ye(o.value));for(o=(i=m(r)).next();!o.done;o=i.next())if((o=o.value)==n)return o;for(o=(i=m(r)).next();!o.done;o=i.next())if(di(o=o.value,n))return o;for(o=(i=m(r)).next();!o.done;o=i.next())if(Ys(o=o.value,n))return o;for(o=(r=m(r)).next();!o.done;o=r.next())if(di(n,o=o.value))return o;return null}$("shaka.util.LanguageUtils",Rt),Rt.findClosestLocale=io,Rt.getLocaleForVariant=Js,Rt.getLocaleForText=function(e){return ye(e.language||"und")},Rt.getBase=zs,Rt.relatedness=Wn,Rt.areSiblings=function(e,t){var n=zs(e),r=zs(t);return e!=n&&t!=r&&n==r},Rt.normalize=ye,Rt.isSiblingOf=Ys,Rt.isParentOf=di,Rt.areLanguageCompatible=$s,Rt.areLocaleCompatible=function(e,t){return(e=ye(e))==ye(t)};var Ml=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Er(){this.g={}}function Qs(e,t){for(var n in e.g)t(n,e.g[n])}function Rl(e,t,n,r,i){var o=e.variants;(t.length||n.length)&&(o=function sm(e,t,n){for(var r={},i=(t=m(t)).next();!i.done;r={md:r.md},i=t.next())if(r.md=i.value,i=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.md)}}(r)),i.length){e=i;break}for(r={},t=(n=m(n)).next();!t.done;r={Yc:r.Yc},t=n.next())if(r.Yc=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Yc)}}(r)),t.length){e=t;break}return e}(o,t,n)),t=function im(e){for(var t=new Er,n=(e=m(e)).next();!n.done;n=e.next()){var r=kl(n=n.value);t.push(r,n)}return t}(o=Ul(o,r)),t=function om(e){var t=0,n=new Map,r=e.size();return Qs(e,function(i,o){for(var s=m(o),u=s.next();!u.done;u=s.next()){var a=(u=u.value).video;if(a&&a.width&&a.height){n.has(a=a.width*a.height*(a.frameRate||1))||n.set(a,new Er);var l=n.get(a);l.push(i,u),l.size()===r&&(t=Math.max(t,a))}}}),t?n.get(t):e}(t);var s=function um(e,t){for(var n=m(t),r=n.next();!r.done;r=n.next())if((r=r.value)==vm||r==ym){if(1==(e=am(e,r)).size())return e.keys()[0]}else if(r==wm)break;return function lm(e){var t="",n=1/0;return Qs(e,function(r,i){for(var o=0,s=0,u=m(i),a=u.next();!a.done;a=u.next())o+=a.value.bandwidth||0,++s;(o/=s)<n&&(t=r,n=o)}),t}(e)}(t,i);e.variants=e.variants.filter(function(u){return kl(u)==s})}function am(e,t){var n=0,r=new Er;return Qs(e,function(i,o){for(var s=0,u=0,a=m(o),l=a.next();!l.done;l=a.next())(l=l.value).decodingInfos.length&&(s+=l.decodingInfos[0][t]?1:0,u++);(s/=u)>n?(r.g={},r.push(i,o),n=s):s==n&&r.push(i,o)}),r}function kl(e){var t="";e.video&&(t=Rn(e.video.codecs));var n="";return e.audio&&(n=Rn(e.audio.codecs)),t+"-"+n}function Zs(e,t,n){function r(o,s,u){return o>=s&&o<=u}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Dl(e,t){return D(function(n){if(1==n.g)return w(n,Nl(e.variants,t,!1),2);e.variants=e.variants.filter(function(r){var i=r.video;if(i){var o=oo(i.codecs);if(i.codecs.includes(",")){var s=i.codecs.split(",");o=oo(o=oi("video",s)),s=eu(s=oi("audio",s));var u=xr(i.mimeType,s,"audio");if(!MediaSource.isTypeSupported(u))return!1;o=[o,s].join()}if(s=xr(i.mimeType,o,"video"),!MediaSource.isTypeSupported(s))return!1;i.codecs=o}if(o=r.audio){if(s=eu(o.codecs),u=xr(o.mimeType,s,"audio"),!MediaSource.isTypeSupported(u))return!1;o.codecs=s}return to()&&i&&(i.width&&1920<i.width||i.height&&1080<i.height)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3."))?(Bl(r),!1):((i=r.decodingInfos.some(function(a){return a.supported}))||Bl(r),i)}),W(n)})}function Nl(e,t,n){var i,o,s,u,a,l,c,p,d;return D(function(x){if(e.some(function(E){return E.decodingInfos.length}))return x.return();for(i=navigator.mediaCapabilities,o=[],s=function(E,I){return D(function(N){return 1==N.g?(ie(N,2),w(N,i.decodingInfo(I),4)):2!=N.g?(E.decodingInfos.push(N.h),ve(N,0)):(ne(N),JSON.stringify(I),void W(N))})},u=m(e),a=u.next();!a.done;a=u.next())for(c=hm(l=a.value,t,n),p=m(c),d=p.next();!d.done;d=p.next())o.push(s(l,d.value));return w(x,Promise.all(o),0)})}function hm(e,t,n){var r=e.audio,i=e.video;if(n={type:n?"file":"media-source"},i){var o=i.codecs;if(i.codecs.includes(",")){var s=i.codecs.split(",");o=oo(o=oi("video",s)),s=oi("audio",s),s=xr(i.mimeType,s,"audio"),n.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(o=oo(o),o=xr(i.mimeType,o,"video"),n.video={contentType:o,width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(r&&(o=eu(r.codecs),o=xr(r.mimeType,o,"audio"),n.audio={contentType:o,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],o=new Map;for(var u=(s=m(s)).next();!u.done;u=s.next()){var a=u.value;o.get(a.keySystem)||o.set(a.keySystem,[]),o.get(a.keySystem).push(a)}s=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var l=(a=m(o.keys())).next();!l.done;l=a.next()){var c=l.value;l=Object.assign({},n);var p=o.get(c);for(c={keySystem:c,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},u=(p=m(p)).next();!u.done;u=p.next()){if((u=u.value).initData&&u.initData.length){for(var d=new Set,v=m(u.initData),x=v.next();!x.done;x=v.next())d.add(x.value.initDataType);c.initDataType=u.initData[0].initDataType}u.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),u.persistentStateRequired&&(c.persistentState="required"),u.sessionType&&(c.sessionTypes=[u.sessionType]),r&&(""!=u.audioRobustness?c.audio?c.audio.robustness=c.audio.robustness||u.audioRobustness:c.audio={robustness:u.audioRobustness}:c.audio||(c.audio={})),i&&(""!=u.videoRobustness?c.video?c.video.robustness=c.video.robustness||u.videoRobustness:c.video={robustness:u.videoRobustness}:c.video||(c.video={}))}l.keySystemConfiguration=c,e.push(l)}return e}function eu(e){return sn()&&"ac-3"==e.toLowerCase()?"ec-3":e}function oo(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Ll(e,t){t.variants=t.variants.filter(function(n){var r=n.audio;return n=n.video,!(r&&e&&e.audio&&!bl(r,e.audio)||n&&e&&e.video&&!bl(n,e.video))})}function bl(e,t){return!(e.mimeType!=t.mimeType||e.codecs.split(".")[0]!=t.codecs.split(".")[0])}function qn(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var s=[];n&&s.push(n.mimeType),t&&s.push(t.mimeType),s=s[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var a=new Set;if(t)for(var l=m(t.roles),c=l.next();!c.done;c=l.next())a.add(c.value);if(n)for(c=(l=m(n.roles)).next();!c.done;c=l.next())a.add(c.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:s,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(a),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function gi(e){return{id:e.id,active:!1,type:Me,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Pl(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function tu(e){return e.__shaka_id||(e.__shaka_id=mm++),e.__shaka_id}function _l(e){var t=jl(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function so(e){var t=jl(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function jl(e){return{id:tu(e),active:!1,type:"",bandwidth:0,language:ye(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function mi(e){return e.allowedByApplication&&e.allowedByKeySystem}function Ul(e,t){for(var n=e.filter(function(s){return s.audio&&s.audio.channelsCount}),r=new Map,i=(n=m(n)).next();!i.done;i=n.next()){var o=(i=i.value).audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter(function(s){return s<=t}),r.get(i.length?Math.max.apply(Math,K(i)):Math.min.apply(Math,K(n))))}function nu(e,t,n,r){var i=e,o=e.filter(function(a){return a.primary});o.length&&(i=o);var s=i.length?i[0].language:"";if(i=i.filter(function(a){return a.language==s}),t){var u=io(ye(t),e.map(function(a){return a.language}));u&&(i=e.filter(function(a){return ye(a.language)==u}))}if(i=i.filter(function(a){return a.forced==r}),n){if((e=Ol(i,n)).length)return e}else if((e=i.filter(function(a){return 0==a.roles.length})).length)return e;return(e=i.map(function(a){return a.roles}).reduce(Hs,[])).length?Ol(i,e[0]):i}function Ol(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Bl(e){var t=[];return e.audio&&t.push(Fl(e.audio)),e.video&&t.push(Fl(e.video)),t.join(", ")}function Fl(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(g=Er.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),0==this.g[e].length&&delete this.g[e])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};var mm=0,vm="smooth",ym="powerEfficient",wm="bandwidth";function qe(){var e=this;this.l=null,this.j=!1,this.h=new Pt,navigator.connection&&navigator.connection.addEventListener("change",function(){if(e.g.useNetworkInformation&&e.j){e.h=new Pt,e.g&&e.h.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t)}}),this.i=[],this.o=1,this.s=!1,this.g=this.m=null}function ru(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function Vl(e,t){return e&&(t=t.filter(function(n){return Zs(n,e,{width:1/0,height:1/0})})),t.sort(function(n,r){return n.bandwidth-r.bandwidth})}function uo(e,t){this.h=e,this.g=new Set([e]);for(var n=m(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function iu(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){var r=t.audio;n=!((!(!(n=e.audio).channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)||n.channelsCount==r.channelsCount)&&Hl(n,r)&&Kl(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Hl(n=e.video,r=t.video)&&Kl(n.roles,r.roles))),!n}function Hl(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map(function(o){return hi(o)[0]}),r=t.codecs.split(",").map(function(o){return hi(o)[0]});if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function Kl(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=m(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Gl(e){this.g=e,this.h=new Sr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Sr(e,t,n,r){this.i=e,this.j=t,this.g=n,this.h=void 0===r?"":r}function Sm(){this.g=ao,this.h=(new Map).set(ao,2).set(Ir,1)}function Xl(e,t,n){e.h.set(ao,n).set(Ir,t)}(g=qe.prototype).stop=function(){this.l=null,this.j=!1,this.i=[],this.o=1,this.m=null},g.init=function(e){this.l=e},g.chooseVariant=function(){var e=Vl(this.g.restrictions,this.i),t=this.h.getBandwidthEstimate(ru(this));this.i.length&&!e.length&&(e=[(e=Vl(null,this.i))[0]]);for(var n=e[0]||null,r=0;r<e.length;r++){for(var i=e[r],o=isNaN(this.o)?1:Math.abs(this.o),s=o*i.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=r+1;a<e.length;a++)if(i.bandwidth!=e[a].bandwidth){u=e[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,t>=s&&t<=o&&n.bandwidth!=i.bandwidth&&(n=i)}return this.m=Date.now(),n},g.enable=function(){this.j=!0},g.disable=function(){this.j=!1},g.segmentDownloaded=function(e,t){if(this.h.sample(e,t),null!=this.m&&this.j)e:{if(this.s){if(Date.now()-this.m<1e3*this.g.switchInterval)break e}else{var n=this.h;if(!(n.g>=n.i))break e;this.s=!0}n=this.chooseVariant(),this.h.getBandwidthEstimate(ru(this)),n&&this.l(n)}},g.getBandwidthEstimate=function(){return this.h.getBandwidthEstimate(ru(this))},g.setVariants=function(e){this.i=e},g.playbackRateChanged=function(e){this.o=e},g.configure=function(e){this.g=e,this.h&&this.g&&this.h.configure(this.g.advanced)},$("shaka.abr.SimpleAbrManager",qe),qe.prototype.configure=qe.prototype.configure,qe.prototype.playbackRateChanged=qe.prototype.playbackRateChanged,qe.prototype.setVariants=qe.prototype.setVariants,qe.prototype.getBandwidthEstimate=qe.prototype.getBandwidthEstimate,qe.prototype.segmentDownloaded=qe.prototype.segmentDownloaded,qe.prototype.disable=qe.prototype.disable,qe.prototype.enable=qe.prototype.enable,qe.prototype.chooseVariant=qe.prototype.chooseVariant,qe.prototype.init=qe.prototype.init,qe.prototype.stop=qe.prototype.stop,uo.prototype.add=function(e){return!!iu(this.h,e)&&(this.g.add(e),!0)},uo.prototype.values=function(){return this.g.values()},Gl.prototype.create=function(e){var t=this,n=e.filter(function(r){return iu(t.g,r)});return n.length?new uo(n[0],n):this.h.create(e)},Sr.prototype.create=function(e){var t=[];t=function Tm(e,t){var r=io(ye(t),e.map(function(i){return Js(i)}));return r?e.filter(function(i){return r==Js(i)}):[]}(e,this.i);var n=e.filter(function(r){return r.primary});for(e=function xm(e,t){return e.filter(function(n){return!!n.audio&&(t?n.audio.roles.includes(t):0==n.audio.roles.length)})}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&(e=Ul(t,this.g)).length&&(t=e),this.h&&(e=function Em(e,t){return e.filter(function(n){return!!n.audio&&n.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.h),e.length&&(t=e)),e=new uo(t[0]),n=(t=m(t)).next();!n.done;n=t.next())iu(e.h,n=n.value)&&e.add(n);return e};var Ir=0,ao=1;function Wl(e,t){var n_baseDelay=1e3,n_backoffFactor=2,n_fuzzFactor=.5;this.l=null==e.maxAttempts?2:e.maxAttempts,this.j=null==e.baseDelay?n_baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n_fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n_backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function ql(e){var t,n;return D(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new M(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),w(r,new Promise(function(i){new ue(i).S(n/1e3)}),2))}e.h*=e.m,W(r)})}function Pe(e,t){this.promise=e,this.i=t,this.g=!1}function $n(e){return new Pe(Promise.reject(e),function(){return Promise.resolve()})}function ou(){var e=Promise.reject(new M(2,7,7001));return e.catch(function(){}),new Pe(e,function(){return Promise.resolve()})}function Cr(e){return new Pe(Promise.resolve(e),function(){return Promise.resolve()})}function Zt(e){return new Pe(e,function(){return e.catch(function(){})})}function $l(e){return new Pe(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}function ee(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=O.performance&&O.performance.now?O.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Yl(e){var n,t=new ee(e.type);for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}function ge(){this.fa=new Er,this.Ec=this}function Mr(e){var n=new Set;return function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var i=r.constructor==Array;if(r.constructor!=Object&&!i)return null;n.add(r);var s,o=i?[]:{};for(s in r)o[s]=t(r[s]);return i&&(o.length=r.length),o}}(e)}function zl(e){var n,t={};for(n in e)t[n]=e[n];return t}function lo(){this.g=[]}function Rr(e,t){e.g.push(t.finally(function(){y(e.g,t)}))}function Re(e,t,n){ge.call(this),this.i=!1,this.m=new lo,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function an(e,t,n,r){n=n||Zl;var i=fo[e];(!i||n>=i.priority)&&(fo[e]={priority:n,Lf:t,Mf:void 0!==r&&r})}function Bt(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,streamDataCallback:void 0===n?null:n}}function Jl(e,t,n,r,i,o,s){e.o&&(n.uris[i]=n.uris[i].replace("http://","https://"));var u=new Mt(n.uris[i]),a=u.Fa,l=!1;a||(Zi(u,a=(a=location.protocol).slice(0,-1)),n.uris[i]=u.toString()),a=a.toLowerCase();var c=(a=fo[a])?a.Lf:null;if(!c)return $n(new M(2,1,1e3,u));var I,p=a.Mf,d=null,v=null,x=!1,E=!1;return Zt(ql(r)).$(function(){if(e.i)return ou();I=Date.now();var S=c(n.uris[i],n,t,function(R,j,U){d&&d.stop(),v&&v.S(C/1e3),e.l&&t==ln&&(e.l(R,j),l=!0,s.g=U)},function(R){e.j&&e.j(R,n,t),E=!0});if(!p)return S;var N=n.retryParameters.connectionTimeout;N&&(d=new ue(function(){x=!0,S.abort()})).S(N/1e3);var C=n.retryParameters.stallTimeout;return C&&(v=new ue(function(){x=!0,S.abort()})),S}).$(function(S){d&&d.stop(),v&&v.stop(),null==S.timeMs&&(S.timeMs=Date.now()-I);var N={response:S,Af:l};return!E&&e.j&&e.j(S.headers,n,t),N},function(S){if(d&&d.stop(),v&&v.stop(),e.s){var N=null,C=0;S instanceof M&&(N=S,1001==S.code&&(C=S.data[1])),e.s(n,N,C,x)}if(e.i)return ou();if(x&&(S=new M(1,1,1003,n.uris[i],t)),S instanceof M){if(7001==S.code)throw S;if(1010==S.code)throw o;if(1==S.severity)return N=new ee("retry",N=(new Map).set("error",S)),e.dispatchEvent(N),Jl(e,t,n,r,i=(i+1)%n.uris.length,S,s)}throw S})}function Ql(){this.g=0}function co(e,t,n){Pe.call(this,e,t),this.h=n}Pe.prototype.abort=function(){return this.g=!0,this.i()},Pe.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Pe.prototype.$=function(e,t){function n(u){return function(a){if(i.g&&u)o.reject(s);else{var l=u?e:t;l?r=function Im(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(l,a,o):(u?o.resolve:o.reject)(a)}}}function r(){return o.reject(s),i.abort()}var i=this,o=new De,s=new M(2,7,7001);return this.promise.then(n(!0),n(!1)),new Pe(o,function(){return r()})},$("shaka.util.AbortableOperation",Pe),Pe.prototype.chain=Pe.prototype.$,Pe.prototype.finally=Pe.prototype.finally,Pe.all=$l,Pe.prototype.abort=Pe.prototype.abort,Pe.notAbortable=Zt,Pe.completed=Cr,Pe.aborted=ou,Pe.failed=$n,ee.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ee.prototype.stopImmediatePropagation=function(){this.g=!0},ee.prototype.stopPropagation=function(){},$("shaka.util.FakeEvent",ee),ge.prototype.addEventListener=function(e,t){this.fa&&this.fa.push(e,t)},ge.prototype.removeEventListener=function(e,t){this.fa&&this.fa.remove(e,t)},ge.prototype.dispatchEvent=function(e){if(!this.fa)return!0;var t=this.fa.get(e.type)||[],n=this.fa.get("All");for(n&&(t=t.concat(n)),n=(t=m(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Ec,e.currentTarget=this.Ec;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},ge.prototype.release=function(){this.fa=null},lo.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},de(Re,ge),(g=Re.prototype).Wd=function(e){this.o=e},g.Nf=function(e){this.g.add(e)},g.cg=function(e){this.g.delete(e)},g.Te=function(){this.g.clear()},g.Of=function(e){this.h.add(e)},g.dg=function(e){this.h.delete(e)},g.Ue=function(){this.h.clear()},g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),ge.prototype.release.call(this),this.m.destroy()},g.request=function(e,t){var n=this,r=new Ql;if(this.i){var i=Promise.reject(new M(2,7,7001));return i.catch(function(){}),new co(i,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Mr(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Mr(t.uris),i=function Am(e,t,n){for(var r=Cr(void 0),i={},o=(e=m(e.g)).next();!o.done;i={gd:i.gd},o=e.next())i.gd=o.value,r=r.$(function(s){return function(){return n.body&&(n.body=Ut(n.body)),s.gd(t,n)}}(i));return r.$(void 0,function(s){throw s instanceof M&&7001==s.code?s:new M(2,1,1006,s)})}(this,e,t);var o=i.$(function(){return Jl(n,e,t,new Wl(t.retryParameters,!1),0,null,r)}),s=o.$(function(p){return function Cm(e,t,n){for(var r=Cr(void 0),i={},o=(e=m(e.h)).next();!o.done;i={hd:i.hd},o=e.next())i.hd=o.value,r=r.$(function(s){return function(){var u=n.response;return u.data&&(u.data=Ut(u.data)),s.hd(t,u)}}(i));return r.$(function(){return n},function(s){var u=2;if(s instanceof M){if(7001==s.code)throw s;u=s.severity}throw new M(u,1,1007,s)})}(n,e,p)}),u=Date.now(),a=0;i.promise.then(function(){a=Date.now()-u},function(){});var l=0;o.promise.then(function(){l=Date.now()},function(){});var c=s.$(function(p){var d=Date.now()-l,v=p.response;return v.timeMs+=a,v.timeMs+=d,p.Af||!n.l||v.fromCache||"HEAD"==t.method||e!=ln||n.l(v.timeMs,v.data.byteLength),v},function(p){throw p&&(p.severity=2),p});return i=new co(c.promise,function(){return c.abort()},r),Rr(this.m,i),i},$("shaka.net.NetworkingEngine",Re),Re.prototype.request=Re.prototype.request,Re.prototype.destroy=Re.prototype.destroy,Re.makeRequest=Bt,Re.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Re.prototype.clearAllResponseFilters=Re.prototype.Ue,Re.prototype.unregisterResponseFilter=Re.prototype.dg,Re.prototype.registerResponseFilter=Re.prototype.Of,Re.prototype.clearAllRequestFilters=Re.prototype.Te,Re.prototype.unregisterRequestFilter=Re.prototype.cg,Re.prototype.registerRequestFilter=Re.prototype.Nf,Re.unregisterScheme=function(e){delete fo[e]},Re.registerScheme=an,Re.prototype.setForceHTTPS=Re.prototype.Wd,Re.NumBytesRemainingClass=Ql,de(co,Pe),Re.PendingRequest=co;var ln=1;Re.RequestType={MANIFEST:0,SEGMENT:ln,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5};var Zl=3;Re.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Zl};var fo={};function Yn(e){this.g=!1,this.h=new De,this.i=e}function Ne(e,t){if(e.g)throw t instanceof M&&7003==t.code?t:new M(2,7,7003,t)}function Ce(){this.g=new Er}function ec(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function Mm(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),function Rm(e){var t=tc;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),e.addEventListener("test",r=function(){},n),e.removeEventListener("test",r,n)}catch{t=!1}tc=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}Yn.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(g=Ce.prototype).release=function(){this.Sa(),this.g=null},g.A=function(e,t,n,r){this.g&&(e=new ec(e,t,n,r),this.g.push(t,e))},g.ka=function(e,t,n,r){var o=this;this.A(e,t,function i(s){o.qc(e,t,i),n(s)},r)},g.qc=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=m(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.qc(),this.g.remove(t,i))},g.Sa=function(){if(this.g){var n,e=this.g,t=[];for(n in e.g)t.push.apply(t,K(e.g[n]));for(t=(e=m(t)).next();!t.done;t=e.next())t.value.qc();this.g.g={}}},$("shaka.util.EventManager",Ce),Ce.prototype.removeAll=Ce.prototype.Sa,Ce.prototype.unlisten=Ce.prototype.qc,Ce.prototype.listenOnce=Ce.prototype.ka,Ce.prototype.listen=Ce.prototype.A,Ce.prototype.release=Ce.prototype.release,ec.prototype.qc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var tc=void 0;function su(){}function nc(e){return new Mt(e=ro(e)).Ha}function rc(e,t,n){function r(u){vt(o).setUint32(s,u.byteLength,!0),s+=4,o.set(Te(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new M(2,6,6015);var i;i="string"==typeof t?Xs(t,!0):t,e=Xs(e=ro(e),!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),s=0;return r(e),r(i),r(n),o}function ic(e,t){for(var n=[],r=m(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}function vi(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())t.set(r=r.value,e[r]);return t}function uu(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dm(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=m(e),r=n.next();!r.done;r=n.next()){var i=m(r.value);if(r=i.next().value,i=i.next().value,!t.has(r)||(r=t.get(r))!=i||null==r)return!1}return!0}function ho(e,t){var n=Be(e,t);return 1!=n.length?null:n[0]}function au(e,t,n){return 1!=(e=oc(e,t,n)).length?null:e[0]}function Be(e,t){for(var n=[],r=m(e.childNodes),i=r.next();!i.done;i=r.next())(i=i.value)instanceof Element&&i.tagName==t&&n.push(i);return n}function oc(e,t,n){for(var r=[],i=(e=m(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.localName==n&&i.namespaceURI==t&&r.push(i);return r}function zn(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function cn(e,t,n){for(var r=(t=m(t)).next();!r.done;r=t.next())if(e.hasAttributeNS(r=r.value,n))return e.getAttributeNS(r,n);return null}function po(e){return Array.from(e.childNodes).every(sc)?e.textContent.trim():null}function sc(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function Le(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),i??r}function Lm(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function fn(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function go(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t&&(e=Number(t[1]),isFinite(e))?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null}function bm(e){return(e=Number(e))%1==0?e:null}function mo(e){return(e=Number(e))%1==0&&0<e?e:null}function en(e){return(e=Number(e))%1==0&&0<=e?e:null}function yi(e){return e=Number(e),isNaN(e)?null:e}function Pm(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function wi(e,t){var n=new DOMParser,r=_m.value()(e),i=null;try{i=n.parseFromString(r,"text/xml")}catch{return null}if(!(n=i.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(i=document.createNodeIterator(i,NodeFilter.SHOW_ALL);r=i.nextNode();)if(r instanceof HTMLElement||r instanceof SVGElement)return null;return n}function uc(e,t){try{return wi(ct(e),t)}catch{return null}}$("shaka.util.FairPlayUtils",su),su.initDataTransform=rc,su.defaultGetContentId=nc;var _m=new mr(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function vo(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.F=new Set,this.l=this.s=null,this.fa=this.ca=!1,this.G=0,this.g=null,this.o=new Ce,this.i=new Map,this.C=[],this.u=new De,this.h=null,this.m=function(r){n.u.reject(r),e.onError(r)},this.ga=new Map,this.da=new Map,this.V=new ue(function(){return function Wm(e){var t=e.ga,n=e.da;n.clear(),t.forEach(function(r,i){return n.set(i,r)}),(t=Array.from(n.values())).length&&t.every(function(r){return"expired"==r})&&e.m(new M(2,6,6014)),e.D.Pc(uu(n))}(n)}),this.L=!1,this.I=[],this.N=!1,this.ea=new ue(function(){!function Ym(e){e.i.forEach(function(t,n){var r=t.Ld,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.D.onExpirationUpdated(n.sessionId,i),t.Ld=i)})}(n)}).Da(t),this.u.catch(function(){}),this.j=new Yn(function(){return function jm(e){return D(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.u.reject(),e.ea.stop(),e.ea=null,e.V.stop(),e.V=null,w(t,mc(e),2);case 2:if(!e.l){t.B(3);break}return ie(t,4),w(t,e.l.setMediaKeys(null),6);case 6:ve(t,5);break;case 4:ne(t);case 5:e.l=null;case 3:e.g=null,e.F.clear(),e.s=null,e.C=[],e.h=null,e.m=function(){},e.D=null,e.W=!1,W(t)}})}(n)}),this.W=!1}function ac(e,t,n){return e.C=n,e.L=0<n.length,lc(e,t)}function lc(e,t){var n,r,i,o,s,u,a,c,p,d,E;return D(function(I){if(1==I.g){if(n=function Hm(e){if(0==(e=vi(e.h.clearKeys)).size)return null;var t=[],n=[];e.forEach(function(i,o){var s=qs(o),u=qs(i);s={kty:"oct",kid:Tr(s,!1),k:Tr(u,!1)},t.push(s),n.push(s.kid)}),e=JSON.stringify({keys:t});var r=JSON.stringify({kids:n});return r=[{initData:Te(Xn(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+O.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(n)}}(e))for(r=m(t),i=r.next();!i.done;i=r.next())(o=i.value).video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for((s=t.some(function(S){return!!(S.video&&S.video.drmInfos.length||S.audio&&S.audio.drmInfos.length)}))||(u=vi(e.h.servers),function zm(e,t){var n=[];t.forEach(function(o,s){n.push({keySystem:s,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})});for(var r=m(e),i=r.next();!i.done;i=r.next())(i=i.value).video&&(i.video.drmInfos=n),i.audio&&(i.audio.drmInfos=n)}(t,u)),a=m(t),i=a.next();!i.done;i=a.next())for(c=vc(i.value),p=m(c),d=p.next();!d.done;d=p.next())Jm(d.value,vi(e.h.servers),vi(e.h.advanced||{}));return w(I,Nl(t,e.L,e.W),2)}return s||Object.keys(e.h.servers).length?(E=pc(e,void 0,t),I.return(s?E:E.catch(function(){}))):(e.ca=!0,I.return(Promise.resolve()))})}function lu(e){var t;return D(function(s){switch(s.g){case 1:if(!e.s||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.B(2);break}return t=Bt([e.g.serverCertificateUri],e.h.retryParameters),ie(s,3),w(s,e.D.nb.request(5,t).promise,5);case 5:e.g.serverCertificate=Te(s.h.data),ve(s,4);break;case 3:throw new M(2,6,6017,ne(s));case 4:if(e.j.g)return s.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(ie(s,6),w(s,e.s.setServerCertificate(e.g.serverCertificate),8)):s.return();case 8:ve(s,0);break;case 6:throw new M(2,6,6004,ne(s).message)}})}function cc(e){for(var t=(e.g?e.g.initData:[])||[],n=m(t),r=n.next();!r.done;r=n.next())yo(e,(r=r.value).initDataType,r.initData);for(r=(n=m(e.C)).next();!r.done;r=n.next())dc(e,r.value);return t.length||e.C.length||e.u.resolve(),e.u}function yo(e,t,n){for(var r=e.i.values(),i=(r=m(r)).next();!i.done;i=r.next())if(zt(n,i.value.initData)&&!nt("Tizen 2"))return;!function Km(e,t,n,r){try{var i=e.s.createSession(r)}catch(o){return void e.m(new M(2,6,6005,o.message))}e.o.A(i,"message",function(o){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.N?e.I.push(o):cu(e,o)}),e.o.A(i,"keystatuseschange",function(o){return gc(e,o)}),e.i.set(i,{initData:n,loaded:!1,Ld:1/0,Ka:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(o){return t=o,o instanceof M||(t=new M(2,6,6016,o)),void e.m(t)}e.h.logLicenseExchange&&Tr(n),i.generateRequest(t,n).catch(function(o){if(!e.j.g){e.i.delete(i);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.m(new M(2,6,6006,o.message,o,u))}})}(e,t,n,e.g.sessionType)}function fc(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function hc(e){return e=ic(e=e.i.keys(),function(t){return t.sessionId}),Array.from(e)}function pc(e,t,n){var r,i,o,s,a,l,c,d,x,E;return D(function(I){switch(I.g){case 1:if(r=new Map,n.length){i=function Fm(e,t,n){for(var r=m(t),i=r.next();!i.done;i=r.next()){var o=m(vc(i.value));for(i=o.next();!i.done;i=o.next())n.has((i=i.value).keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new M(2,6,6e3);for(r={},i=(e=m(e.h.preferredKeySystems)).next();!i.done;r={ed:r.ed},i=e.next())for(r.ed=i.value,i=(o=m(t)).next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(l){return function(c){return c.supported&&null!=c.keySystemAccess&&c.keySystemAccess.keySystem==l.ed}}(r)))return i.keySystemAccess;for(i=(e=m([!0,!1])).next();!i.done;i=e.next())for(r=i.value,i=(o=m(t)).next();!i.done;i=o.next()){var s=m(i.value.decodingInfos);for(i=s.next();!i.done;i=s.next()){var u=i.value;if(u.supported&&u.keySystemAccess){var a=m(i=n.get(u.keySystemAccess.keySystem));for(i=a.next();!i.done;i=a.next())if(!!i.value.licenseServerUri==r)return u.keySystemAccess}}}return null}(e,n,r),I.B(2);break}return w(I,function Vm(e,t){var n,r,i,o,s,u,a,l,c,p,d,v,x,E,I;return D(function(S){switch(S.g){case 1:if(1==t.size&&t.has(""))throw new M(2,6,6e3);for(r=m(t.values()),i=r.next();!i.done;i=r.next())0==(o=i.value).audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;s=m(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){S.B(4);break}if(!t.has(a=u.value)){S.B(3);break}return l=t.get(a),ie(S,6),w(S,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return S.return(n=S.h);case 6:ne(S);case 7:Ne(e.j);case 3:u=s.next(),S.B(2);break;case 4:c=m([!0,!1]),p=c.next();case 9:if(p.done){S.B(11);break}d=p.value,v=m(t.keys()),u=v.next();case 12:if(u.done){p=c.next(),S.B(9);break}if(E=t.get(x=u.value),I=E.drmInfos.some(function(N){return!!N.licenseServerUri}),I!=d){S.B(13);break}return ie(S,15),w(S,navigator.requestMediaKeySystemAccess(x,[E]),17);case 17:return S.return(n=S.h);case 15:ne(S);case 16:Ne(e.j);case 13:u=v.next(),S.B(12);break;case 11:return S.return(n)}})}(e,t),3);case 3:i=I.h;case 2:if(!(o=i))throw new M(2,6,6001);for(Ne(e.j),ie(I,4),e.F.clear(),s=o.getConfiguration(),a=s.videoCapabilities||[],l=m(s.audioCapabilities||[]),c=l.next();!c.done;c=l.next())e.F.add(c.value.contentType.toLowerCase());for(d=m(a),c=d.next();!c.done;c=d.next())e.F.add(c.value.contentType.toLowerCase());if(n.length){var S=o.keySystem,N=r.get(o.keySystem),C=[],R=[],j=[],U=[],F=new Set;for(yc(N,C,j,R,U,F),S={keySystem:S,licenseServerUri:C[0],distinctiveIdentifierRequired:N[0].distinctiveIdentifierRequired,persistentStateRequired:N[0].persistentStateRequired,sessionType:N[0].sessionType||(e.L?"persistent-license":"temporary"),audioRobustness:N[0].audioRobustness||"",videoRobustness:N[0].videoRobustness||"",serverCertificate:j[0],serverCertificateUri:R[0],initData:U,keyIds:F},C=(N=m(N)).next();!C.done;C=N.next())(C=C.value).distinctiveIdentifierRequired&&(S.distinctiveIdentifierRequired=C.distinctiveIdentifierRequired),C.persistentStateRequired&&(S.persistentStateRequired=C.persistentStateRequired);N=S}else N=o.keySystem,yc((S=t.get(o.keySystem)).drmInfos,C=[],j=[],R=[],U=[],F=new Set),N={keySystem:N,licenseServerUri:C[0],distinctiveIdentifierRequired:"required"==S.distinctiveIdentifier,persistentStateRequired:"required"==S.persistentState,sessionType:S.sessionTypes[0]||"temporary",audioRobustness:(S.audioCapabilities?S.audioCapabilities[0].robustness:"")||"",videoRobustness:(S.videoCapabilities?S.videoCapabilities[0].robustness:"")||"",serverCertificate:j[0],serverCertificateUri:R[0],initData:U,keyIds:F};if(e.g=N,!e.g.licenseServerUri)throw new M(2,6,6012,e.g.keySystem);return w(I,o.createMediaKeys(),6);case 6:return x=I.h,Ne(e.j),e.s=x,e.ca=!0,w(I,lu(e),7);case 7:Ne(e.j),ve(I,0);break;case 4:throw E=ne(I),Ne(e.j,E),e.g=null,e.F.clear(),E instanceof M?E:new M(2,6,6002,E.message)}})}function dc(e,t){var n,r,i,o,s;return D(function(u){switch(u.g){case 1:try{n=e.s.createSession("persistent-license")}catch(a){return r=new M(2,6,6005,a.message),e.m(r),u.return(Promise.reject(r))}return e.o.A(n,"message",function(a){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.N?e.I.push(a):cu(e,a)}),e.o.A(n,"keystatuseschange",function(a){return gc(e,a)}),e.i.set(n,i={initData:null,loaded:!1,Ld:1/0,Ka:null,type:"persistent-license"}),ie(u,2),w(u,n.load(t),4);case 4:return o=u.h,Ne(e.j),o?(i.loaded=!0,fu(e)&&e.u.resolve(),u.return(n)):(e.i.delete(n),e.m(new M(2,6,6013)),u.return(Promise.resolve()));case 2:s=ne(u),Ne(e.j,s),e.i.delete(n),e.m(new M(2,6,6005,s.message));case 3:return u.return(Promise.resolve())}})}function Gm(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=rc(e,n=nc(e),t)),e}function cu(e,t){var n,r,i,o,s,u,a,c,p,d,v,x;D(function(I){switch(I.g){case 1:return n=t.target,e.h.logLicenseExchange&&Tr(t.message),r=e.i.get(n),i=e.g.licenseServerUri,o=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer),(s=Bt([i],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,fc(e.g.keySystem)&&function Xm(e){var t=Cn(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=m((t=wi(t,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),r=n.next();!r.done;r=n.next())e.headers[(r=r.value).getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;e.body=Mn(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(s),u=Date.now(),ie(I,2),w(I,e.D.nb.request(2,s).promise,4);case 4:a=I.h,ve(I,3);break;case 2:return c=ne(I),p=new M(2,6,6007,c),e.m(p),r&&r.Ka&&r.Ka.reject(p),I.return();case 3:return e.j.g?I.return():(e.G+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&Tr(a.data),ie(I,5),w(I,n.update(a.data),7));case 7:ve(I,6);break;case 5:return d=ne(I),v=new M(2,6,6008,d.message),e.m(v),r&&r.Ka&&r.Ka.reject(v),I.return();case 6:if(e.j.g)return I.return();x=new ee("drmsessionupdate"),e.D.onEvent(x),r&&(r.Ka&&r.Ka.resolve(),new ue(function(){r.loaded=!0,fu(e)&&e.u.resolve()}).S(Zm)),W(I)}})}function gc(e,t){var n=t.target,r=e.i.get(n),i=!1;n.keyStatuses.forEach(function(s,u){if("string"==typeof u){var a=u;u=s,s=a}if(fc(e.g.keySystem)&&16==u.byteLength&&(navigator.userAgent.match(/Edge?\//)||ai())){var l=(a=vt(u)).getUint32(0,!0),c=a.getUint16(4,!0),p=a.getUint16(6,!0);a.setUint32(0,l,!1),a.setUint16(4,c,!1),a.setUint16(6,p,!1)}"status-pending"!=s&&(r.loaded=!0),"expired"==s&&(i=!0),a=li(u).slice(0,32),e.ga.set(a,s)});var o=n.expiration-Date.now();(0>o||i&&1e3>o)&&r&&!r.Ka&&(e.i.delete(n),n.close().catch(function(){})),fu(e)&&(e.u.resolve(),e.V.S(ev))}function mc(e){var t;return D(function(n){return t=Array.from(e.i.entries()),e.i.clear(),w(n,Promise.all(t.map(function(r){var i=(r=m(r)).next().value,o=r.next().value;return D(function(s){return 1==s.g?(ie(s,2),e.fa||e.C.includes(i.sessionId)||"persistent-license"!==o.type?w(s,function $m(e){var t;return D(function(n){return 1==n.g?(t=new Promise(function(r,i){new ue(i).S(Qm)}),ie(n,2),w(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?ve(n,0):(ne(n),void W(n))})}(i),5):w(s,i.remove(),5)):2!=s.g?ve(s,0):(ne(s),void W(s))})})),0)})}function wo(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=m(e),i=r.next();!i.done;i=r.next()){i=i.value;for(var o={},s=m(t),u=s.next();!u.done;o={Ea:o.Ea},u=s.next())if(i.keySystem==(u=u.value).keySystem){o.Ea=[],o.Ea=o.Ea.concat(i.initData||[]),o.Ea=o.Ea.concat(u.initData||[]),o.Ea=o.Ea.filter(function(a){return function(l,c){return void 0===l.keyId||c===a.Ea.findIndex(function(p){return p.keyId===l.keyId})}}(o)),s=i.keyIds&&u.keyIds?new Set([].concat(K(i.keyIds),K(u.keyIds))):i.keyIds||u.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||u.persistentStateRequired,videoRobustness:i.videoRobustness||u.videoRobustness,audioRobustness:i.audioRobustness||u.audioRobustness,serverCertificate:i.serverCertificate||u.serverCertificate,serverCertificateUri:i.serverCertificateUri||u.serverCertificateUri,initData:o.Ea,keyIds:s});break}}return n}function vc(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function fu(e){return function km(e,t){for(var n=m(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}(e=e.i.values(),function(t){return t.loaded})}function yc(e,t,n,r,i,o){for(var s={},u=(e=m(e)).next();!u.done;s={ra:s.ra},u=e.next()){if(s.ra=u.value,t.includes(s.ra.licenseServerUri)||t.push(s.ra.licenseServerUri),r.includes(s.ra.serverCertificateUri)||r.push(s.ra.serverCertificateUri),s.ra.serverCertificate&&(n.some(function(c){return function(p){return zt(p,c.ra.serverCertificate)}}(s))||n.push(s.ra.serverCertificate)),s.ra.initData){u={};for(var a=m(s.ra.initData),l=a.next();!l.done;u={tc:u.tc},l=a.next())u.tc=l.value,i.some(function(c){return function(p){var d=c.tc;return!(!p.keyId||p.keyId!=d.keyId)||p.initDataType==d.initDataType&&zt(p.initData,d.initData)}}(u))||i.push(u.tc)}if(s.ra.keyIds)for(a=(u=m(s.ra.keyIds)).next();!a.done;a=u.next())o.add(a.value)}}function Jm(e,t,n){e.keySystem&&("org.w3.clearkey"!=e.keySystem||!e.licenseServerUri)&&(t.size&&(t=t.get(e.keySystem)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),O.cast&&O.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready"))}(g=vo.prototype).destroy=function(){return this.j.destroy()},g.configure=function(e){this.h=e},g.Wb=function(e){var t=this;return D(function(i){if(1==i.g)return t.s?(t.l=e,t.o.ka(t.l,"play",function(){for(var o=m(t.I),s=o.next();!s.done;s=o.next())cu(t,s.value);t.N=!0,t.I=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.l&&t.o.A(t.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return mc(t)}),w(i,t.l.setMediaKeys(t.s).catch(function(o){return Promise.reject(new M(2,6,6003,o.message))}),2)):(t.o.ka(e,"encrypted",function(){t.m(new M(2,6,6010))}),i.return());Ne(t.j),cc(t),t.g.initData.length||t.C.length||t.o.A(t.l,"encrypted",function(o){return yo(t,o.initDataType,Te(o.initData))}),W(i)})},g.cc=function(){for(var e=1/0,t=this.i.keys(),n=(t=m(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Gc=function(){return uu(this.da)};var Qm=1,Zm=5,ev=.5,kr=new mr(function(){return Ut(new Uint8Array([0]))});function To(){}function wc(e,t,n,r){var i,o,s,u;return D(function(a){if(1==a.g)return r&&(i=kt[r.toLowerCase()])?a.return(i):(o=Jn(e))&&(s=Qn[o])?a.return(s):r?a.B(2):w(a,Tc(e,t,n),3);if(2!=a.g&&(r=a.h)&&(u=kt[r]))return a.return(u);throw new M(2,4,4e3,e)})}function Tc(e,t,n){var r,o;return D(function(s){return 1==s.g?((r=Bt([e],n)).method="HEAD",w(s,t.request(0,r).promise,2)):s.return((o=s.h.headers["content-type"])?o.toLowerCase().split(";").shift():"")})}function Jn(e){return 1==(e=new Mt(e).wa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}$("shaka.media.ManifestParser",To),To.unregisterParserByMime=function(e){delete kt[e]},To.registerParserByMime=function(e,t){kt[e]=t},To.registerParserByExtension=function(e,t){Qn[e]=t};var kt={},Qn={};function xe(e,t){this.O=vt(e),this.h=t==xc,this.g=0}function hn(){return new M(2,3,3e3)}(g=xe.prototype).na=function(){return this.g<this.O.byteLength},g.X=function(){return this.g},g.ff=function(){return this.O.byteLength},g.Y=function(){try{var e=this.O.getUint8(this.g);return this.g+=1,e}catch{throw hn()}},g.Kb=function(){try{var e=this.O.getUint16(this.g,this.h);return this.g+=2,e}catch{throw hn()}},g.M=function(){try{var e=this.O.getUint32(this.g,this.h);return this.g+=4,e}catch{throw hn()}},g.ve=function(){try{var e=this.O.getInt32(this.g,this.h);return this.g+=4,e}catch{throw hn()}},g.Lb=function(){try{if(this.h)var e=this.O.getUint32(this.g,!0),t=this.O.getUint32(this.g+4,!0);else t=this.O.getUint32(this.g,!1),e=this.O.getUint32(this.g+4,!1)}catch{throw hn()}if(2097151<t)throw new M(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.Za=function(e){if(this.g+e>this.O.byteLength)throw hn();var t=Te(this.O,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.O.byteLength)throw hn();this.g+=e},g.xe=function(e){if(this.g<e)throw hn();this.g-=e},g.seek=function(e){if(0>e||e>this.O.byteLength)throw hn();this.g=e},g.kc=function(){for(var e=this.g;this.na()&&0!=this.O.getUint8(this.g);)this.g+=1;return e=Te(this.O,e,this.g-e),this.g+=1,ct(e)},$("shaka.util.DataViewReader",xe),xe.prototype.readTerminatedString=xe.prototype.kc,xe.prototype.seek=xe.prototype.seek,xe.prototype.rewind=xe.prototype.xe,xe.prototype.skip=xe.prototype.skip,xe.prototype.readBytes=xe.prototype.Za,xe.prototype.readUint64=xe.prototype.Lb,xe.prototype.readInt32=xe.prototype.ve,xe.prototype.readUint32=xe.prototype.M,xe.prototype.readUint16=xe.prototype.Kb,xe.prototype.readUint8=xe.prototype.Y,xe.prototype.getLength=xe.prototype.ff,xe.prototype.getPosition=xe.prototype.X,xe.prototype.hasMoreData=xe.prototype.na;var xc=1;function ke(){this.i=[],this.h=[],this.g=!1}function Fe(e){for(var t=Eo(e);e.reader.na()&&!e.parser.g;)e.parser.Rc(e.start+t,e.reader,e.partialOkay)}function xo(e){for(var t=Eo(e),n=e.reader.M(),r=0;r<n&&(e.parser.Rc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Dr(e){return function(t){e(t.reader.Za(t.reader.O.byteLength-t.reader.X()))}}function Ec(e){for(var t=0,n=(e=m(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Sc(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Eo(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}xe.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:xc},(g=ke.prototype).box=function(e,t){var n=Ec(e);return this.i[n]=tv,this.h[n]=t,this},g.P=function(e,t){var n=Ec(e);return this.i[n]=Ic,this.h[n]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new xe(e,0),this.g=!1;e.na()&&!this.g;)this.Rc(0,e,t,n)},g.Rc=function(e,t,n,r){var i=t.X();if(r&&i+8>t.O.byteLength)this.g=!0;else{var o=t.M(),s=t.M(),u=!1;switch(o){case 0:o=t.O.byteLength-i;break;case 1:if(r&&t.X()+8>t.O.byteLength)return void(this.g=!0);o=t.Lb(),u=!0}var a=this.h[s];if(a){var l=null,c=null;if(this.i[s]==Ic){if(r&&t.X()+4>t.O.byteLength)return void(this.g=!0);l=(c=t.M())>>>24,c&=16777215}s=i+o,n&&s>t.O.byteLength&&(s=t.O.byteLength),r&&s>t.O.byteLength?this.g=!0:(r=s-t.X(),a({parser:this,partialOkay:n||!1,version:l,flags:c,reader:t=new xe(t=0<r?t.Za(r):new Uint8Array(0),0),size:o,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+o-t.X(),t.O.byteLength-t.X()))}},$("shaka.util.Mp4Parser",ke),ke.headerSize=Eo,ke.typeToString=Sc,ke.allData=Dr,ke.sampleDescription=xo,ke.children=Fe,ke.prototype.parseNext=ke.prototype.Rc,ke.prototype.parse=ke.prototype.parse,ke.prototype.stop=ke.prototype.stop,ke.prototype.fullBox=ke.prototype.P,ke.prototype.box=ke.prototype.box;var tv=0,Ic=1;function rv(e,t,n,r,i){var o=iv.value(),s=e.subarray(n.start,n.start+n.size),u=vt(s),a=new Uint8Array(n.size+o.byteLength);for(a.set(s,0),(s=vt(a)).setUint32(4,i),a.set(o,n.size),i=u.getUint32(4),s.setUint32(n.size+16,i),Ac(a,0,a.byteLength),i=new Uint8Array(e.byteLength+a.byteLength),n=to()?n.start:n.start+n.size,o=e.subarray(n),i.set(e.subarray(0,n)),i.set(a,n),i.set(o,n+a.byteLength),r=(e=m(r)).next();!r.done;r=e.next())Ac(i,(r=r.value).start,r.size+a.byteLength);return a=vt(i,t.start),t=Eo(t),e=a.getUint32(t),a.setUint32(t,e+1),i}function Ac(e,t,n){0!=(t=(e=vt(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var iv=new mr(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Cc(e,t,n,r,i){if(r>=i)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(R){return null!=R&&""!=R.g.trim()})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(R){return null!=R&&""!=R.g.trim()})){s=u;break}if(-1===o||-1===s)return null;for(var a=u=!1,l="white",c="black",p=hu(r,i,u,a,l,c);o<=s;o++){for(var d=n[o],v=-1,x=-1,E=0;E<d.length;E++)if(null!=d[E]&&""!==d[E].g.trim()){v=E;break}for(E=d.length-1;0<=E;E--)if(null!=d[E]&&""!==d[E].g.trim()){x=E;break}if(-1===v||-1===x)d=Mc(r,i),e.nestedCues.push(d);else{for(;v<=x;v++)if(E=d[v]){var I=E.l,S=E.i,N=E.j,C=E.h;(I!=u||S!=a||N!=l||C!=c)&&(p.payload&&e.nestedCues.push(p),p=hu(r,i,I,S,N,C),u=I,a=S,l=N,c=C),p.payload+=E.g}else p.payload+=" ";p.payload&&e.nestedCues.push(p),o!==s&&(p=Mc(r,i),e.nestedCues.push(p)),p=hu(r,i,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function hu(e,t,n,r,i,o){return e=new T(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=o,e}function Mc(e,t){var n=new T(e,t,"");return n.lineBreak=!0,n}function Rc(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function pu(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Ti(this)}function So(e,t,n){return Cc(new T(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function Ti(e){pn(e,0,15),e.g=1}function Nr(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case xi:r=bc.has(n)?bc.get(n):String.fromCharCode(n);break;case Dc:r=ov.get(n);break;case Nc:e.i[e.g].pop(),r=sv.get(n);break;case Lc:e.i[e.g].pop(),r=uv.get(n)}r&&e.i[e.g].push(new Rc(r,e.m,e.j,e.o,e.l))}}function kc(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(o){return o});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(o){return o})}function pn(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var xi=0,Dc=1,Nc=2,Lc=3,bc=new Map([[39,"\u2019"],[42,"\xe1"],[92,"\xe9"],[92,"\xe9"],[94,"\xed"],[95,"\xf3"],[96,"\xfa"],[123,"\xe7"],[124,"\xf7"],[125,"\xd1"],[126,"\xf1"],[127,"\u2588"]]),ov=new Map([[48,"\xae"],[49,"\xb0"],[50,"\xbd"],[51,"\xbf"],[52,"\u2122"],[53,"\xa2"],[54,"\xa3"],[55,"\u266a"],[56,"\xe0"],[57,"\u2800"],[58,"\xe8"],[59,"\xe2"],[60,"\xea"],[61,"\xee"],[62,"\xf4"],[63,"\xfb"]]),sv=new Map([[32,"\xc1"],[33,"\xc9"],[34,"\xd3"],[35,"\xda"],[36,"\xdc"],[37,"\xfc"],[38,"\u2018"],[39,"\xa1"],[40,"*"],[41,"'"],[42,"\u2500"],[43,"\xa9"],[44,"\u2120"],[45,"\xb7"],[46,"\u201c"],[47,"\u201d"],[48,"\xc0"],[49,"\xc2"],[50,"\xc7"],[51,"\xc8"],[52,"\xca"],[53,"\xcb"],[54,"\xeb"],[55,"\xce"],[56,"\xcf"],[57,"\xef"],[58,"\xd4"],[59,"\xd9"],[60,"\xf9"],[61,"\xdb"],[62,"\xab"],[63,"\xbb"]]),uv=new Map([[32,"\xc3"],[33,"\xe3"],[34,"\xcd"],[35,"\xcc"],[36,"\xec"],[37,"\xd2"],[38,"\xf2"],[39,"\xd5"],[40,"\xf5"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"\xc4"],[49,"\xe4"],[50,"\xd6"],[51,"\xf6"],[52,"\xdf"],[53,"\xa5"],[54,"\xa4"],[55,"\u2502"],[56,"\xc5"],[57,"\xe5"],[58,"\xd8"],[59,"\xf8"],[60,"\u250c"],[61,"\u2510"],[62,"\u2514"],[63,"\u2518"]]);function Io(e,t){this.h=av,this.o=new pu(e,t),this.i=new pu(e,t),this.l=new pu(e,t),this.g=this.i,this.j=0,this.m=null}function du(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==Ao&&e.h!==Ei&&(i=So(r,e.j,n),(n=e.i).g=0<n.h?n.h:0,pn(n,0,15),(n=e.l).g=0<n.h?n.h:0,pn(n,0,15),r.g=15),e.h=Ao,r.h=t,i}function Pc(e){e.h=lv,e.g=e.l,e.g.h=0}function _c(e){rn("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Ei}var av=0,lv=1,Ao=3,Ei=4,cv="black green blue cyan red yellow magenta black".split(" "),jc="white green blue cyan red yellow magenta white_italics".split(" ");function Uc(){this.l=!1,this.C=this.F=0,this.D=pv,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",gu(this)}function gu(e){e.i=[];for(var t=0;16>t;t++)e.i.push(mu())}function mu(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Zn(e,t){Oc(e)&&(e.i[e.h][e.g]=new Rc(t,e.u,e.o,e.m,e.s),e.g++)}function Oc(e){return e.h<e.F&&0<=e.h&&e.g<e.C&&0<=e.g}function er(e,t,n){var r=new T(e.j,t,"");return r.textAlign=e.D===fv?"left":e.D===hv?"right":P,(n=Cc(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Uc.prototype.isVisible=function(){return this.l};var fv=0,hv=1,pv=2;function dv(){this.i=[],this.h=null,this.g=0}function gv(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Co(e.h)),e.h=null,e.g=0))}function Co(e){this.g=0,this.h=e}function Je(e){if(!e.na())throw new M(2,2,3e3);return e.h[e.g++]}function mv(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function vv(e,t,n,r){if(128<=n&&135>=n)e.h[r=7&n]&&(e.g=e.h[r]);else{if(136===n){n=Je(t).value,t=null;for(var i=(n=m(Si(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=er(i,r,e.i)),gu(i);return t}if(137===n)for(n=(t=m(Si(e,t=Je(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=Je(t).value,t=null,i=(n=m(Si(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=er(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=Je(t).value,t=null,i=(n=m(Si(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=er(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return Bc(e,t=Je(t).value,r);if(143===n)return r=Bc(e,255,r),Fc(e),r;if(144===n)t.skip(1),r=Je(t).value,e.g&&(e.g.o=0<(128&r),e.g.u=0<(64&r));else if(145===n)r=Je(t).value,n=Je(t).value,t.skip(1),e.g&&(t=Vc((48&n)>>4,(12&n)>>2,3&n),e.g.s=Vc((48&r)>>4,(12&r)>>2,3&r),e.g.m=t);else if(146===n)r=Je(t).value,t=Je(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Je(t).value,t.skip(1),e.g&&(e.g.D=3&r);else if(152<=n&&159>=n){if(!(i=null!==e.h[n=(15&n)-8])){var o=new Uc;o.j=r,e.h[n]=o}r=Je(t).value,Je(t),Je(t),o=Je(t).value;var s=Je(t).value;t=Je(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&r),t.F=1+(15&o),t.C=1+(63&s),e.g=e.h[n]}}}return null}function Si(e,t){for(var n=[],r=0;8>r;r++)1==(1&t)&&e.h[r]&&n.push(r),t>>=1;return n}function Bc(e,t,n){for(var r=null,i=(t=m(Si(e,t))).next();!i.done;i=t.next()){var o=e.h[i=i.value];o.isVisible()&&(r=er(o,n,e.i)),e.h[i]=null}return r}function Fc(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Vc(e,t,n){var r={0:0,1:0,2:1,3:1};return yv[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}Co.prototype.na=function(){return this.g<this.h.length},Co.prototype.X=function(){return this.g},Co.prototype.skip=function(e){if(this.g+e>this.h.length)throw new M(2,2,3e3);this.g+=e};var Hc=new Map([[32," "],[33,"\xa0"],[37,"\u2026"],[42,"\u0160"],[44,"\u0152"],[48,"\u2588"],[49,"\u2018"],[50,"\u2019"],[51,"\u201c"],[52,"\u201d"],[53,"\u2022"],[57,"\u2122"],[58,"\u0161"],[60,"\u0153"],[61,"\u2120"],[63,"\u0178"],[118,"\u215b"],[119,"\u215c"],[120,"\u215d"],[121,"\u215e"],[122,"\u2502"],[123,"\u2510"],[124,"\u2514"],[125,"\u2500"],[126,"\u2518"],[127,"\u250c"]]),yv="black blue green cyan red magenta yellow white".split(" ");function wv(){this.h=[],this.g=[],this.i=new dv,this.l=0,this.s=new Map([["CC1",new Io(0,0)],["CC2",new Io(0,1)],["CC3",new Io(1,0)],["CC4",new Io(1,1)]]),this.o=this.m=0,this.j=new Map,vu(this)}function vu(e){e.m=0,e.o=0;for(var t=(e=m(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,Ti(t.i),Ti(t.l),Ti(t.o)}function xv(e,t){var n=t.type;if(16==(112&t.Aa)){var r=t.Aa>>3&1;0===n?e.m=r:e.o=r}if(n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.Aa&&255===t.Oa||!t.Aa&&!t.Oa||!Kc(t.Aa)||!Kc(t.Oa))return 45<=++e.l&&vu(e),null;if(e.l=0,t.Aa&=127,t.Oa&=127,!t.Aa&&!t.Oa)return null;if(r=null,16==(112&t.Aa))e:{var i=t.Aa;if(n.m===(i<<8|(r=t.Oa)))n.m=null;else if(n.m=i<<8|r,16==(240&i)&&64==(192&r)){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|r>>5&1];var o=(30&r)>>1,s="white",u=!1;if(7>o?s=jc[o]:7===o&&(u=!0),r=1==(1&r),n.h!==Ei){if(o=n.g,n.h===Ao&&i!==o.g){var a=1+i-o.h;kc(o,a,1+o.g-o.h,o.h),pn(o,0,a-1),pn(o,i+1,15-i)}o.g=i,n.g.m=r,n.g.j=u,n.g.l=s,n.g.o="black"}}else if(17==(247&i)&&32==(240&r))n.g.m=!1,n.g.j=!1,n.g.l="white",Nr(n.g,xi,32),s=!1,"white_italics"===(i=jc[(14&r)>>1])&&(i="white",s=!0),n.g.m=1==(1&r),n.g.j=s,n.g.l=i;else if(16==(247&i)&&32==(240&r)||23==(247&i)&&45==(255&r))s="black",!(7&i)&&(s=cv[(14&r)>>1]),n.g.o=s;else if(17==(247&i)&&48==(240&r))Nr(n.g,Dc,r);else if(18==(246&i)&&32==(224&r))Nr(n.g,1&i?Lc:Nc,r);else if(20==(246&i)&&32==(240&r)){switch(r=t.pts,i=null,t.Oa){case 32:Pc(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=du(n,2,r);break;case 38:i=du(n,3,r);break;case 39:i=du(n,4,r);break;case 40:Nr(n.g,xi,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=r;break;case 42:Ti(n.o),_c(n);break;case 43:_c(n);break;case 44:i=n.i,s=null,n.h!==Ei&&(s=So(i,n.j,r)),pn(i,0,15),i=s;break;case 45:i=n.g,n.h!==Ao?i=null:(s=So(i,n.j,r),kc(i,(u=i.g-i.h+1)-1,u,i.h),pn(i,0,u-1),pn(i,i.g,15-i.g),n.j=r,i=s);break;case 46:pn(n.l,0,15);break;case 47:i=null,n.h!==Ei&&(i=So(n.i,n.j,r)),s=n.l,n.l=n.i,n.i=s,Pc(n),n.j=r}r=i;break e}r=null}else i=t.Oa,Nr(n.g,xi,t.Aa),Nr(n.g,xi,i);return r}function Ev(e,t){var n=[];try{for(;t.na();){var r=Je(t).value,i=(224&r)>>5,o=31&r;if(7===i&&0!=o&&(i=63&Je(t).value),0!=i){e.j.has(i)||e.j.set(i,new mv(i));for(var s=e.j.get(i),u=t.X();t.X()-u<o;){var a=Je(i=t),l=a.value,c=a.pts;if(16===l&&(l=l<<16|Je(i).value),0<=l&&31>=l){var d=c;if(s.g){var v=s.g;switch(i=null,l){case 8:!Oc(v)||0>=v.g&&0>=v.h||(0>=v.g?(v.g=v.C-1,v.h--):v.g--,v.i[v.h][v.g]=null);break;case 13:if(v.isVisible()&&(i=er(v,d,s.i)),v.h+1>=v.F){d=v;for(var x=0,E=1;16>E;E++,x++)d.i[x]=d.i[E];for(E=0;1>E;E++,x++)d.i[x]=mu()}else v.h++;v.g=0;break;case 14:v.isVisible()&&(i=er(v,d,s.i)),v.i[v.h]=mu(),v.g=0;break;case 12:v.isVisible()&&(i=er(v,d,s.i)),gu(v),(d=v).h=0,d.g=0}var I=i}else I=null}else if(128<=l&&159>=l)I=vv(s,i,l,c);else{if(4096<=l&&4127>=l)8<=(d=255&l)&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=l&&4255>=l)128<=(d=255&l)&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=l&&127>=l)i=l,s.g&&Zn(s.g,127===i?"\u266a":String.fromCharCode(i));else if(160<=l&&255>=l)s.g&&Zn(s.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(i=255&l,s.g)if(Hc.has(i)){var S=Hc.get(i);Zn(s.g,S)}else Zn(s.g,"_")}else 4256<=l&&4351>=l&&s.g&&Zn(s.g,160!=(255&l)?"_":"[CC]");I=null}(i=I)&&n.push(i)}}}}catch(N){if(!(N instanceof M&&3e3===N.code))throw N;rn("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Kc(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Gc(e,t){var n=null,r=null,i=e.M();return 1&t&&e.skip(8),2&t&&e.skip(4),8&t&&(n=e.M()),16&t&&(r=e.M()),{trackId:i,ie:n,We:r}}function yu(e,t){return{pd:1==t?e.Lb():e.M()}}function wu(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.M()}}function Xc(e,t,n){var r=e.M(),i=[];1&n&&e.skip(4),4&n&&e.skip(4);for(var o=0;o<r;o++){var s={Sd:null,sampleSize:null,Tc:null};256&n&&(s.Sd=e.M()),512&n&&(s.sampleSize=e.M()),1024&n&&e.skip(4),2048&n&&(s.Tc=0==t?e.M():e.ve()),i.push(s)}return{Og:r,ye:i}}function Tu(){this.i=new Map,this.h=this.g=0}function Wc(){this.h=new Tu,this.g=new wv}function xu(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Eu(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function qc(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=m(kn(e)),i=r.next();!i.done;i=r.next()){var o=i.value;i=o.start,(o=o.end)>t&&(n+=o-Math.max(i,t))}return n}function kn(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $c(e,t,n,r){var i=this;this.j=e,this.m=n,this.h={},this.I={},this.G={},this.g=null,this.L=r||function(){},this.i={},this.o=new Ce,this.s={},this.u=t,this.D=new De,this.l=function Av(e,t){var n=new MediaSource;return e.o.ka(n,"sourceopen",function(){URL.revokeObjectURL(e.F),t.resolve()}),e.F=Au(n),e.j.src=e.F,n}(this,this.D),this.C=new Yn(function(){return function Cv(e){var t,n,r,i,o,s,a;return D(function(l){if(1==l.g){for(n in t=[],e.i)for(i=(r=e.i[n])[0],e.i[n]=r.slice(0,1),i&&t.push(i.p.catch(Xg)),o=m(r.slice(1)),s=o.next();!s.done;s=o.next())s.value.p.reject(new M(2,7,7003,void 0));for(a in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.s)t.push(e.s[a].destroy());return w(l,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.l=null,e.g=null,e.m=null,e.h={},e.s={},e.u=null,e.i={},W(l)})}(i)}),this.F=""}function Ii(e,t){e.g||(e.g=new un(e.m)),e.g.j="application/cea-608"==t||"application/cea-708"==t?null:Kn(it[t])}function Yc(e){return!e.l||"ended"==e.l.readyState}function zc(e,t){if(t==Me)var n=e.g.g;else n=!(n=Lr(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Mo(e,t){return t==Me?e.g.h:xu(Lr(e,t))}function Lr(e,t){try{return e.h[t].buffered}catch{return null}}function Jc(e,t,n,r,i,o){var s,u,l,p,d,v;return D(function(x){return 1==x.g?t==(s=pt).Z?w(x,function tm(e,t,n,r){var i,o,s;return D(function(u){return 1==u.g?w(u,Promise.resolve(),2):e.j&&e.i?null==n||null==r?(e.j.parseInit(Te(t)),u.return()):(i={periodStart:e.u,segmentStart:n,segmentEnd:r},o=e.j.parseMedia(Te(t),i),s=o.filter(function(a){return a.startTime>=e.l&&a.startTime<e.m}),e.i.append(s),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),void W(u)):u.return()})}(e.g,n,r,i),0):e.s[t]?w(x,function Zg(e,t){e.l=!0,e.h=new De,e.m=[],e.j=[],e.i=[];var n=Te(t);return e.g.push(n),e.g.flush(),e.l&&e.h.reject(new M(2,3,3018)),e.h}(e.s[t],n),10):o?(e.g||Ii(e,"application/cea-608"),null==r&&null==i?e.u.init(n):(u=function Sv(e,t){for(var n=e.h.parse(t),r=(n=m(n)).next();!r.done;r=n.next()){var i=r.value,o=Te(i.Kf);if(0<o.length&&(r=e.g,i=i.pts,181===(o=new xe(o,0)).Y()&&49===o.Kb()&&1195456820===o.M()&&3===o.Y())){var s=o.Y();if(64&s){s&=31,o.skip(1);for(var u=0;u<s;u++){var a=o.Y(),l=(4&a)>>2,c=o.Y(),p=o.Y();l&&(0==(a&=3)||1===a?r.h.push({pts:i,type:a,Aa:c,Oa:p,order:r.h.length}):(r.g.push({pts:i,type:a,value:c,order:r.g.length}),r.g.push({pts:i,type:2,value:p,order:r.g.length})))}}}}return function Tv(e){function t(o,s){return o.pts-s.pts||o.order-s.order}var n=[];e.h.sort(t),e.g.sort(t);for(var r=m(e.h),i=r.next();!i.done;i=r.next())(i=xv(e,i.value))&&n.push(i);for(i=(r=m(e.g)).next();!i.done;i=r.next())gv(e.i,i.value);for(i=(r=m(e.i.i)).next();!i.done;i=r.next())i=Ev(e,i.value),n.push.apply(n,K(i));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}(e.u,n)).length&&Cl(e.g,u,r,i,e.h[s.Na].timestampOffset),n=Iu(e,n,r,t),w(x,dn(e,t,function(){e.h[t].appendBuffer(n)}),0)):(n=Iu(e,n,r,t),w(x,dn(e,t,function(){e.h[t].appendBuffer(n)}),0)):(l=x.h,e.g||Ii(e,"application/cea-608"),l.metadata&&e.L(l.metadata,e.h[t].timestampOffset,i),l.captions&&l.captions.length&&(p=e.h[s.Na].timestampOffset,d=function rm(e){for(var t=[],n=(e=m(e)).next();!n.done;n=e.next())t.push({stream:(n=n.value).stream,cue:new T(n.startTime,n.endTime,n.text)});return t}(l.captions),Cl(e.g,d,r,i,p)),v=Iu(e,v=l.data,r,t),w(x,dn(e,t,function(){e.h[t].appendBuffer(v)}),0))})}function Qc(e,t){return D(function(r){return t==pt.Z?e.g?w(r,e.g.remove(0,1/0),0):r.return():w(r,dn(e,t,function(){var i=e.l.duration;0>=i?tr(e,t):e.h[t].remove(0,i)}),0)})}function tr(e,t){var n=e.i[t][0];n&&(n.p.resolve(),Su(e,t))}function dn(e,t,n){return Ne(e.C),n={start:n,p:new De},e.i[t].push(n),1==e.i[t].length&&ef(e,t),n.p}function Zc(e,t){var n,r,i,o,u;return D(function(a){switch(a.g){case 1:for(i in Ne(e.C),n=[],r={},e.h)r.Rb=new De,o={start:function(l){return function(){return l.Rb.resolve()}}(r),p:r.Rb},e.i[i].push(o),n.push(r.Rb),1==e.i[i].length&&o.start(),r={Rb:r.Rb};return ie(a,2),w(a,Promise.all(n),4);case 4:ve(a,3);break;case 2:throw ne(a);case 3:try{t()}catch(l){throw new M(2,3,3015,l)}finally{for(u in e.h)Su(e,u)}W(a)}})}function Su(e,t){e.i[t].shift(),ef(e,t)}function ef(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(r){n.p.reject("QuotaExceededError"==r.name?new M(2,3,3017,t):new M(2,3,3015,r)),Su(e,t)}}function Iu(e,t,n,r){return null==n&&e.G[r]&&(sn()||to())&&"mp4"==e.I[r].split(";")[0].split("/")[1]&&(t=function nv(e){function t(){r=!0}function n(l){o.push(l),Fe(l)}e=Te(e);var i,r=!1,o=[],s=[];if((new ke).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).P("stsd",function(l){i=l,o.push(l),xo(l)}).P("encv",t).P("enca",t).P("hev1",function(l){s.push({box:l,ob:1701733238})}).P("hvc1",function(l){s.push({box:l,ob:1701733238})}).P("avc1",function(l){s.push({box:l,ob:1701733238})}).P("avc3",function(l){s.push({box:l,ob:1701733238})}).P("ac-3",function(l){s.push({box:l,ob:1701733217})}).P("ec-3",function(l){s.push({box:l,ob:1701733217})}).P("mp4a",function(l){s.push({box:l,ob:1701733217})}).parse(e),r)return e;if(0==s.length||!i)throw li(e),new M(2,3,3019);s.reverse();for(var u=m(s),a=u.next();!a.done;a=u.next())e=rv(e,i,(a=a.value).box,o,a.ob);return e}(t)),t}Tu.prototype.init=function(e){var t=this,n=[],r=[];if((new ke).box("moov",Fe).box("mvex",Fe).P("trex",function(i){var o=i.reader;o.skip(4),o.skip(4),i=o.M(),o=o.M(),t.g=i,t.h=o}).box("trak",Fe).P("tkhd",function(i){var o=i.reader;1==i.version?(o.skip(8),o.skip(8)):(o.skip(4),o.skip(4)),i=o.M(),n.push(i)}).box("mdia",Fe).P("mdhd",function(i){i=wu(i.reader,i.version),r.push(i.timescale)}).parse(e,!0),!n.length||!r.length||n.length!=r.length)throw new M(2,2,2010);n.forEach(function(i,o){t.i.set(i,r[o])})},Tu.prototype.parse=function(e){var t=this,n=[],r=this.g,i=this.h,o=[],s=null,u=9e4;return(new ke).box("moof",Fe).box("traf",Fe).P("trun",function(a){o=Xc(a.reader,a.version,a.flags).ye}).P("tfhd",function(a){a=Gc(a.reader,a.flags),r=a.ie||t.g,i=a.We||t.h,t.i.has(a=a.trackId)&&(u=t.i.get(a))}).P("tfdt",function(a){s=yu(a.reader,a.version).pd}).box("mdat",function(a){if(null===s)throw new M(2,2,2010);a=a.reader;var l=s,c=u,p=r,d=i,v=o,x=0,E=d;for(v.length&&(E=v[0].sampleSize||d);a.na();){var I=a.M();if(6==(31&a.Y())){var S=0;v.length>x&&(S=v[x].Tc||0),S=(l+S)/c;for(var C,N=[],R=a.Za(I-1),j=C=0;j<R.length;)2==C&&3==R[j]?(C=0,(R=[].concat(K(R))).splice(j,1),R=new Uint8Array(R)):0==R[j]?C++:C=0,j++;for(C=R,j=0;j<C.length;){for(R=0;255==C[j];)R+=255,j++;R+=C[j++];for(var U=0;255==C[j];)U+=255,j++;U+=C[j++],4==R&&N.push(C.subarray(j,j+U)),j+=U}for(C=(N=m(N)).next();!C.done;C=N.next())n.push({Kf:C.value,pts:S})}else try{a.skip(I-1)}catch{break}0==(E-=I+4)&&(l=v.length>x?l+(v[x].Sd||p):l+p,x++,E=v.length>x&&v[x].sampleSize||d)}}).parse(e,!1),n},Wc.prototype.init=function(e){this.h.init(e)},(g=$c.prototype).destroy=function(){return this.C.destroy()},g.init=function(e,t){var r,i,o,s,u,a,l,n=this;return D(function(c){if(1==c.g)return r=pt,w(c,n.D,2);for(i={},o=m(e.keys()),s=o.next();!s.done;i={qa:i.qa},s=o.next())i.qa=s.value,u=e.get(i.qa),a=Qt(u.mimeType,u.codecs),i.qa==r.Z?Ii(n,a):(!t&&MediaSource.isTypeSupported(a)||!El(a,i.qa)||(n.s[i.qa]=new xl,a=fi(i.qa,a)),l=n.l.addSourceBuffer(a),n.o.A(l,"error",function(p){return function(){n.i[p.qa][0].p.reject(new M(2,3,3014,n.j.error?n.j.error.code:0))}}(i)),n.o.A(l,"updateend",function(p){return function(){return tr(n,p.qa)}}(i)),n.h[i.qa]=l,n.I[i.qa]=a,n.i[i.qa]=[],n.G[i.qa]=!!u.drmInfos.length);W(c)})},g.Ya=function(){var e={total:kn(this.j.buffered),audio:kn(Lr(this,"audio")),video:kn(Lr(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},g.remove=function(e,t,n){var r=this;return D(function(o){return w(o,e==pt.Z?r.g.remove(t,n):dn(r,e,function(){n<=t?tr(r,e):r.h[e].remove(t,n)}),0)})},g.flush=function(e){var t=this;return D(function(r){return e==pt.Z?r.return():w(r,dn(t,e,function(){t.j.currentTime-=.001,tr(t,e)}),0)})},g.endOfStream=function(e){var t=this;return D(function(n){return w(n,Zc(t,function(){Yc(t)||"closed"===t.l.readyState||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Ja=function(e){var t=this;return D(function(n){return w(n,Zc(t,function(){t.l.duration=e}),0)})},g.getDuration=function(){return this.l.duration};var Au=O.URL.createObjectURL;function wt(e,t,n,r){this.sa=e,this.pa=t,this.ia=n,this.Ed=void 0===r?null:r}function Ue(e,t,n,r,i,o,s,u,a,l,c,p){l=void 0===l?[]:l,this.startTime=e,this.l=this.endTime=t,this.j=n,this.pa=r,this.ia=i,this.g=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.h=l,this.tilesLayout=void 0===c?"":c,this.i=void 0===p?null:p}function J(e,t,n){this.l=e,this.Sc=t,this.m=this.i=1/0,this.g=1,this.h=this.j=null,this.o=0,this.s=!0,this.u=0,this.C=void 0===n||n,this.D=0,this.F=!1}function tf(e,t){this.j=e,this.m=nf(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.o=t,this.i=function(){}}function bv(e){this.g=e}function nf(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=m(kn(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Cu(e,t,n,r,i){var o=this;this.g=e,this.C=t,this.l=n,this.u=i,this.i=new Ce,this.s=!1,this.D=e.readyState,this.j=!1,this.h=r,this.o=!1,this.i.A(e,"waiting",function(){return Mu(o)}),this.m=new ue(function(){Mu(o)}).Da(.25)}function Mu(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.s)return}else e.s=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.D&&(e.j=!1,e.D=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,r=nf(n),i=n.g.currentTime,o=Date.now()/1e3;(t.g!=i||t.m!=r)&&(t.l=o,t.g=i,t.m=r,t.h=!1),(r=(i=o-t.l)>=t.o&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime),t=!r}if(t){i=e.l.smallGapLimit;var s=e.g.currentTime;if(n=function Iv(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:0<=(e=kn(e).findIndex(function(r,i,o){return r.start>t&&(0==i||o[i-1].end-t<=n)}))?e:null}(t=e.g.buffered,s,e.l.gapDetectionThreshold),!(null==n||0==n&&!e.o||(r=t.start(n),r>=e.C.Pa()))){var u=r-s;i=u<=i,o=!1,.001>u||(i||e.j||(e.j=!0,(s=new ee("largegap",s=(new Map).set("currentTime",s).set("gapSize",u))).cancelable=!0,e.u(s),e.l.jumpLargeGaps&&!s.defaultPrevented&&(o=!0)),!i&&!o)||(0!=n&&t.end(n-1),e.g.currentTime=r)}}}}}function nr(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=Pv.value().get(t),n.ka(e,t,r))}wt.prototype.fc=function(){return this.pa},wt.prototype.bc=function(){return this.ia},$("shaka.media.InitSegmentReference",wt),wt.prototype.getEndByte=wt.prototype.bc,wt.prototype.getStartByte=wt.prototype.fc,(g=Ue.prototype).sa=function(){return this.j()},g.getStartTime=function(){return this.startTime},g.df=function(){return this.endTime},g.fc=function(){return this.pa},g.bc=function(){return this.ia},g.xf=function(){return this.tilesLayout},g.wf=function(){return this.i},$("shaka.media.SegmentReference",Ue),Ue.prototype.getTileDuration=Ue.prototype.wf,Ue.prototype.getTilesLayout=Ue.prototype.xf,Ue.prototype.getEndByte=Ue.prototype.bc,Ue.prototype.getStartByte=Ue.prototype.fc,Ue.prototype.getEndTime=Ue.prototype.df,Ue.prototype.getStartTime=Ue.prototype.getStartTime,Ue.prototype.getUris=Ue.prototype.sa,(g=J.prototype).getDuration=function(){return this.i},g.kf=function(){return this.g},g.Ja=function(e){this.i=e},g.qf=function(){return this.l},g.De=function(e){this.o=e},g.pc=function(e){this.s=e},g.Zd=function(e){this.m=e},g.Zf=function(e){this.Sc=e},g.cf=function(){return this.Sc},g.Hb=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.Jd(e[0].startTime),this.g=e.reduce(function(n,r){return Math.max(n,r.endTime-r.startTime)},this.g),this.h=Math.max(this.h,t),null!=this.l&&this.C&&!this.F&&(this.l=(Date.now()+this.o)/1e3-this.h-this.g)}},g.Cd=function(){this.F=!0},g.Jd=function(e){this.j=null==this.j?e:Math.min(this.j,e)},g.Id=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){null!=this.j&&(this.j+=e),null!=this.h&&(this.h+=e)},g.U=function(){return this.i==1/0&&!this.s},g.mb=function(){return this.i!=1/0&&!this.s},g.Qa=function(){return Math.max(this.u,this.hb()-this.m)},g.Ee=function(e){this.u=e},g.hb=function(){return this.U()||this.mb()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.l)+this.D,this.i):this.h?Math.min(this.h,this.i):this.i},g.ec=function(e){var t=Math.max(this.j,this.u);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.hb()-this.m+e,this.Pa()))},g.Db=function(){return this.ec(0)},g.Pa=function(){return Math.max(0,this.hb()-(this.U()||this.mb()?this.Sc:0))},g.He=function(){return!(null==this.l||null!=this.h&&this.C)},g.Ce=function(e){this.D=e},$("shaka.media.PresentationTimeline",J),J.prototype.setAvailabilityTimeOffset=J.prototype.Ce,J.prototype.usingPresentationStartTime=J.prototype.He,J.prototype.getSeekRangeEnd=J.prototype.Pa,J.prototype.getSeekRangeStart=J.prototype.Db,J.prototype.getSafeSeekRangeStart=J.prototype.ec,J.prototype.getSegmentAvailabilityEnd=J.prototype.hb,J.prototype.setUserSeekStart=J.prototype.Ee,J.prototype.getSegmentAvailabilityStart=J.prototype.Qa,J.prototype.isInProgress=J.prototype.mb,J.prototype.isLive=J.prototype.U,J.prototype.offset=J.prototype.offset,J.prototype.notifyMaxSegmentDuration=J.prototype.Id,J.prototype.notifyMinSegmentStartTime=J.prototype.Jd,J.prototype.lockStartTime=J.prototype.Cd,J.prototype.notifySegments=J.prototype.Hb,J.prototype.getDelay=J.prototype.cf,J.prototype.setDelay=J.prototype.Zf,J.prototype.setSegmentAvailabilityDuration=J.prototype.Zd,J.prototype.setStatic=J.prototype.pc,J.prototype.setClockOffset=J.prototype.De,J.prototype.getPresentationStartTime=J.prototype.qf,J.prototype.setDuration=J.prototype.Ja,J.prototype.getMaxSegmentDuration=J.prototype.kf,J.prototype.getDuration=J.prototype.getDuration,tf.prototype.release=function(){this.j=null,this.i=function(){}},Cu.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.C=this.u=null},Cu.prototype.Md=function(){this.o=!0,Mu(this)};var Pv=new mr(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function rf(e,t,n){var r=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Ce,this.i=new af(e),nr(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){sf(r,r.j)})}function Ru(e){return e.m?e.g.currentTime:e.j}function of(e,t){0<e.g.readyState?lf(e.i,t):nr(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){sf(e,e.j)})}function sf(e,t){.001>Math.abs(e.g.currentTime-t)?uf(e):(e.h.ka(e.g,"seeking",function(){uf(e)}),lf(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function uf(e){e.m=!0,e.h.A(e.g,"seeking",function(){return e.l()})}function af(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new ue(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}function lf(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Da(.1)}function cf(e){this.g=e,this.j=!1,this.h=null,this.i=new Ce}function ff(e,t,n,r,i,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.u=t.minBufferTime||0,this.l=n,this.s=i,this.o=null,this.j=new Cu(e,t.presentationTimeline,n,function jv(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new tf(new bv(e),t.stallThreshold);return function Lv(e,t){e.i=t}(r,function(){n?e.currentTime+=n:(e.pause(),e.play())}),r}(e,n),o),this.h=new rf(e,function(){var u=s.j;u.s=!0,u.o=!1,u.j=!1;var a=Ru(s.h);return u=pf(s,a),.001<Math.abs(u-a)&&(a=Date.now()/1e3,!s.o||s.o<a-1)?(s.o=a,of(s.h,u),u=void 0):(s.s(),u=void 0),u},function _v(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.Db():e.g.Pa():0>t&&(t=e.g.Pa()+t),hf(e,df(e,t))}(this,r)),this.m=new ue(function(){if(0!=s.i.readyState&&!s.i.paused){var u=Ru(s.h),a=s.g.Db(),l=s.g.Pa();3>l-a&&(a=l-3),u<a&&(u=pf(s,u),s.i.currentTime=u)}})}function hf(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function pf(e,t){var n=Math.max(e.u,e.l.rebufferingGoal),r=e.l.safeSeekOffset,i=e.g.Db(),o=e.g.Pa(),s=e.g.getDuration();3>o-i&&(i=o-3);var u=e.g.ec(n),a=e.g.ec(r);return n=e.g.ec(n+r),t>=s?hf(e,t):t>o?o:t<i?Eu(e.i.buffered,a)?a:n:t>=u||Eu(e.i.buffered,t)?t:n}function df(e,t){var n=e.g.Db();return t<n||t>(n=e.g.Pa())?n:t}function fe(e){this.K=e,this.g=null,this.h=0,this.i=!1}function Ro(e,t,n){return new fe([new Ue(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Ft(e,t,n){this.i=e,this.h=t,this.g=n}function Ve(){fe.call(this,[]),this.j=[]}function Ai(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Jc(),this.h=new ue(function(){t.g.te(.25*t.i)})}function gf(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Jc()!=t&&e.g.Yd(t))}catch{}e.h.Da(.25),0!=e.g.Jc()&&e.g.Yd(0)}function mf(e){var t=this;this.h=e,this.g=new Set,this.i=new ue(function(){vf(t,!1)}).Da(.25)}function vf(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function ko(e){ge.call(this),this.g=new Map,this.h=e}function ku(e){ge.call(this);var t=this;this.g=new Set,this.i=e,this.h=new ue(function(){for(var n=t.i(),r=m(t.g),i=r.next();!i.done;i=r.next())(i=i.value).endTime<n.start&&(t.g.delete(i),i=new ee("regionremove",new Map([["region",i]])),t.dispatchEvent(i))}).Da(2)}function Do(e){ge.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{ub:null,sb:br,lb:function(n,r){return rr(t,"enter",n,r)}},{ub:Ci,sb:br,lb:function(n,r){return rr(t,"enter",n,r)}},{ub:Mi,sb:br,lb:function(n,r){return rr(t,"enter",n,r)}},{ub:br,sb:Ci,lb:function(n,r){return rr(t,"exit",n,r)}},{ub:br,sb:Mi,lb:function(n,r){return rr(t,"exit",n,r)}},{ub:Ci,sb:Mi,lb:function(n,r){return rr(t,"skip",n,r)}},{ub:Mi,sb:Ci,lb:function(n,r){return rr(t,"skip",n,r)}}],this.h=new Ce,this.h.A(this.i,"regionremove",function(n){t.g.delete(n.region)})}function rr(e,t,n,r){t=new ee(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}rf.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},af.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(g=cf.prototype).nd=function(){var t=this;nr(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){!function e(){null==t.h||0==t.h?t.j=!0:(t.i.ka(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.od=function(e){this.h=this.j?this.h:e},g.xc=function(){return(this.j?this.g.currentTime:this.h)||0},g.ue=function(){},(g=ff.prototype).nd=function(){this.m.Da(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.s=function(){}},g.od=function(e){of(this.h,e)},g.xc=function(){var e=Ru(this.h);return 0<this.i.readyState&&!this.i.paused?df(this,e):e},g.ue=function(){this.j.Md()},(g=fe.prototype).destroy=function(){return yt("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},g.release=function(){this.i||(this.K=[],this.g&&this.g.stop(),this.g=null)},g.Ef=function(){this.i=!0},g.find=function(e){for(var t=this.K.length-1,n=t;0<=n;--n){var r=this.K[n];if(e>=r.startTime&&e<(n<t?this.K[n+1].startTime:r.endTime))return n+this.h}return this.K.length&&e<this.K[0].startTime?this.h:null},g.get=function(e){return 0==this.K.length||0>(e-=this.h)||e>=this.K.length?null:this.K[e]},g.offset=function(e){if(!this.i)for(var t=m(this.K),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},g.Fb=function(e){!this.i&&e.length&&(this.K=this.K.filter(function(t){return t.startTime<e[0].startTime}),this.K.push.apply(this.K,K(e)))},g.Gb=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(0==n.K.length||r.endTime>n.K[0].startTime)}),this.Fb(e),this.eb(t)},g.eb=function(e){if(!this.i){var t=this.K.length;this.K=this.K.filter(function(n){return n.endTime>e}),this.h+=t-this.K.length}},g.Xa=function(e,t,n){if(n=void 0!==n&&n,!this.i){for(;this.K.length&&this.K[this.K.length-1].startTime>=t;)this.K.pop();for(;this.K.length&&this.K[0].endTime<=e;)this.K.shift(),n||this.h++;0!=this.K.length&&(this.K[this.K.length-1]=new Ue((e=this.K[this.K.length-1]).startTime,t,e.j,e.pa,e.ia,e.g,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.h,e.tilesLayout,e.i))}},g.Uc=function(e,t){var n=this;this.i||(this.g&&this.g.stop(),this.g=new ue(function(){var r=t();r?n.K.push.apply(n.K,K(r)):(n.g.stop(),n.g=null)}),this.g.Da(e))},fe.prototype[Symbol.iterator]=function(){return this.gb(0)},fe.prototype.gb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.h.length)for(var i=n.h.length-1;0<=i;--i){var o=n.h[i];if(e>=o.startTime&&e<o.endTime){t++,r=i-1;break}}return new Ft(this,t,r)},$("shaka.media.SegmentIndex",fe),fe.forSingleSegment=Ro,fe.prototype.getIteratorForTime=fe.prototype.gb,fe.prototype.updateEvery=fe.prototype.Uc,fe.prototype.fit=fe.prototype.Xa,fe.prototype.evict=fe.prototype.eb,fe.prototype.mergeAndEvict=fe.prototype.Gb,fe.prototype.merge=fe.prototype.Fb,fe.prototype.offset=fe.prototype.offset,fe.prototype.get=fe.prototype.get,fe.prototype.find=fe.prototype.find,fe.prototype.markImmutable=fe.prototype.Ef,fe.prototype.release=fe.prototype.release,fe.prototype.destroy=fe.prototype.destroy,Ft.prototype.seek=function(e){return yt("shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek()."),(e=this.i.gb(e))?(this.h=e.h,this.g=e.g):(this.h=Number.MAX_VALUE,this.g=0),this.next().value},Ft.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.h.length&&e.sa().length&&this.g>=e.h.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.h.length?e.h[this.g]:e},Ft.prototype.next=function(){var e=this.i.get(this.h);return e&&0<e.h.length?(this.g++,e.sa().length&&this.g==e.h.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},$("shaka.media.SegmentIterator",Ft),Ft.prototype.next=Ft.prototype.next,Ft.prototype.current=Ft.prototype.current,Ft.prototype.seek=Ft.prototype.seek,de(Ve,fe),(g=Ve.prototype).clone=function(){var e=new Ve;return e.j=this.j.slice(),e},g.release=function(){for(var e=m(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[]},g.find=function(e){for(var t=0,n=m(this.j),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.h+r.K.length}return null},g.get=function(e){for(var t=0,n=m(this.j),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;t+=r.h+r.K.length}return null},g.offset=function(){},g.Fb=function(){},g.eb=function(){},g.Gb=function(){},g.Xa=function(){},g.Uc=function(){},$("shaka.media.MetaSegmentIndex",Ve),Ve.prototype.updateEvery=Ve.prototype.Uc,Ve.prototype.fit=Ve.prototype.Xa,Ve.prototype.mergeAndEvict=Ve.prototype.Gb,Ve.prototype.evict=Ve.prototype.eb,Ve.prototype.merge=Ve.prototype.Fb,Ve.prototype.offset=Ve.prototype.offset,Ve.prototype.get=Ve.prototype.get,Ve.prototype.find=Ve.prototype.find,Ve.prototype.release=Ve.prototype.release,Ai.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Ai.prototype.set=function(e){this.i=e,gf(this)},Ai.prototype.Fc=function(){return this.g.Fc()},mf.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},de(ko,ge),ko.prototype.release=function(){this.g.clear(),ge.prototype.release.call(this)},ko.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var r=(n=n.value).jc,i=r.length-1;0<=i;i--){var o=r[i];if(o.position<=e){r=o.Ed;break e}}r=null}(i=r)&&(i=!((i=n.ge)===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i&&(i=e,o=r.contentType,i=!!((o=this.h()[o])&&0<o.length&&i>=o[0].start&&i<o[o.length-1].end)),i&&(n.ge=r,JSON.stringify(r),n=new ee("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},de(ku,ge),ku.prototype.release=function(){this.g.clear(),this.h.stop(),ge.prototype.release.call(this)},de(Do,ge),Do.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ge.prototype.release.call(this)},Do.prototype.j=function(e,t){for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){var i=this.g.get(r=r.value),o=e<r.startTime?Ci:e>r.endTime?Mi:br;this.g.set(r,o);for(var s=m(this.l),u=s.next();!u.done;u=s.next())(u=u.value).ub==i&&u.sb==o&&u.lb(r,t)}};var Ci=1,br=2,Mi=3;function Ri(e,t,n,r,i){return e=Bt(e,r,i),(0!=t||null!=n)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function No(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.u=1,this.o=this.l=null,this.D=0,this.j=new Map,this.C=!1,this.F=null,this.s=!1,this.i=new Yn(function(){return function Fv(e){var t,n,r,i;return D(function(o){if(1==o.g){for(t=[],n=m(e.j.values()),r=n.next();!r.done;r=n.next())ki(i=r.value),t.push(xf(i));return w(o,Promise.all(t),2)}e.j.clear(),e.g=null,e.m=null,e.h=null,W(o)})}(n)})}function yf(e,t){var n=e.j.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.qb&&(Pr(e,i,!1,0,!1),n.qb=r)}else(r=n.qb)&&(n.qb=null,Pr(e,r,!0,0,!1))}}function wf(e,t,n,r,i){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,e.l=t,e.C&&(t.video&&Pr(e,t.video,n,r,i),t.audio&&Pr(e,t.audio,n,r,i))}function Lo(e,t){e.o=t,e.C&&Pr(e,t,!0,0,!1)}function Pr(e,t,n,r,i){var o=e.j.get(t.type);o||t.type!=Me?o&&(o.qb&&(t.trickModeVideo?(o.qb=t,t=t.trickModeVideo):o.qb=null),o.stream!=t||i)&&(t.type==Me&&Ii(e.g.R,Qt(t.mimeType,t.codecs)),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.ba=null,n&&(o.Zb?o.Xc=!0:o.ta?(o.ab=!0,o.Ac=r,o.Xc=!0):(ki(o),bu(e,o,!0,r).catch(function(s){e.g&&e.g.onError(s)}))),function Kv(e,t){var n,r;return D(function(i){if(1==i.g)return t.va?(r=t.va,(n=t.stream).segmentIndex?i.B(2):w(i,n.createSegmentIndex(),2)):i.return();if(t.va!=r||t.stream!=n)return i.return();var o=e.g.Ic(),s=Mo(e.g.R,t.type),u=t.stream.segmentIndex.find(t.Ba?t.Ba.endTime:o),a=null==u?null:t.stream.segmentIndex.get(u);u=a&&a.ia?a.ia-a.pa:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.g)&&(u+=(a.ia?a.ia-a.pa:null)||0),o=8*u/(a=e.g.getBandwidthEstimate())<(s||0)-o-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.va.h.g>u):o=!1,o&&t.va.abort(),W(i)})}(e,o).catch(function(s){e.g&&e.g.onError(s)})):function Vv(e,t){var n,r,i,o,a;D(function(l){switch(l.g){case 1:return n=pt,e.D++,r=e.D,ie(l,2),w(l,Qc(e.g.R,n.Z),4);case 4:ve(l,3);break;case 2:i=ne(l),e.g&&e.g.onError(i);case 3:o=Qt(t.mimeType,t.codecs),Ii(e.g.R,o),(e.g.R.m.isTextVisible()||e.h.alwaysStreamText)&&e.D==r&&(a=Tf(t),e.j.set(n.Z,a),Dt(e,a,0)),W(l)}})}(e,t)}function Gv(e,t){t.Zb||t.ab||(t.ta?(t.ab=!0,t.Ac=0):null==zc(e.g.R,t.type)?null==t.La&&Dt(e,t,0):(ki(t),bu(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function Tf(e){return{stream:e,type:e.type,ba:null,Ba:null,Mc:null,Bd:null,zd:null,yd:null,qb:null,endOfStream:!1,ta:!1,La:null,ab:!1,Ac:0,Xc:!1,Zb:!1,Qd:!1,hc:!1,va:null}}function Du(e,t,n,r,i,o){var s;return D(function(u){return 1==u.g?(s=r.closedCaptions&&0<r.closedCaptions.size,(null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes)&&(new ke).P("emsg",function(a){var l=r.emsgSchemeIdUris;if(0===a.version)var c=a.reader.kc(),p=a.reader.kc(),d=a.reader.M(),v=a.reader.M(),x=a.reader.M(),E=a.reader.M(),I=i.startTime+v/d;else d=a.reader.M(),v=(I=a.reader.Lb()/d+i.timestampOffset)-i.startTime,x=a.reader.M(),E=a.reader.M(),c=a.reader.kc(),p=a.reader.kc();a=a.reader.Za(a.reader.O.byteLength-a.reader.X()),(l&&l.includes(c)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==c?e.g.Jf():(l=(new Map).set("detail",{startTime:I,endTime:I+x/d,schemeIdUri:c,value:p,timescale:d,presentationTimeDelta:v,eventDuration:x,id:E,messageData:a}),l=new ee(lh,l),e.g.onEvent(l)))}).parse(o),w(u,function Zv(e,t,n){var r,i,s;return D(function(u){if(1==u.g)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),null==(i=zc(e.g.R,t.type))||.01>=(s=n-i-r)?u.return():w(u,e.g.R.remove(t.type,i,i+s),2);Ne(e.i),W(u)})}(e,t,n),2)):3!=u.g?(Ne(e.i),w(u,Jc(e.g.R,t.type,o,i.startTime,i.endTime,s),3)):(Ne(e.i),void W(u))})}function Nu(e){return e&&e.type==Me&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Lu(e,t,n,r){var i,o,s,u,a;return D(function(l){return 1==l.g?(i=ln,o=Ri(n.sa(),n.pa,n.ia,e.h.retryParameters,r),e.g.modifySegmentRequest(o,{type:(s=t.stream).type,init:n instanceof wt,duration:n.endTime-n.startTime,mimeType:s.mimeType,codecs:s.codecs,bandwidth:s.bandwidth}),u=e.g.nb.request(i,o),t.va=u,w(l,u.promise,2)):(a=l.h,t.va=null,l.return(a.data))})}function bu(e,t,n,r){var i,o;return D(function(s){return 1==s.g?(t.ab=!1,t.Xc=!1,t.Ac=0,t.Zb=!0,t.Ba=null,t.Mc=null,t.ba=null,r?(i=e.g.Ic(),o=e.g.R.getDuration(),w(s,e.g.R.remove(t.type,i+r,o),3)):w(s,Qc(e.g.R,t.type),4)):3!=s.g?(Ne(e.i),n?w(s,e.g.R.flush(t.type),3):s.B(3)):(Ne(e.i),t.Zb=!1,t.endOfStream=!1,t.ta||t.La||Dt(e,t,0),void W(s))})}function Dt(e,t,n){var r=t.type;(r!=Me||e.j.has(r))&&(t.La=new si(function(){var i;return D(function(o){return 1==o.g?(ie(o,2),w(o,function Wv(e,t){var n,r,i,o,s;return D(function(u){switch(u.g){case 1:if(Ne(e.i),t.ta||null==t.La||t.Zb)return u.return();if(t.La=null,!t.ab){u.B(2);break}return w(u,bu(e,t,t.Xc,t.Ac),3);case 3:return u.return();case 2:if(t.stream.segmentIndex){u.B(4);break}return n=t.stream,w(u,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.ta||t.La||Dt(e,t,0),u.return();case 4:ie(u,6),r=function qv(e,t){if(Nu(t))return function Rv(e,t){var n=Mo(e,"video")||0;Il(e.g,t,n)}(e.g.R,t.stream.originalId||""),null;t.type==Me&&function kv(e){e.g&&Il(e.g,"",0)}(e.g.R);var n=e.g.Ic(),r=t.Ba?t.Ba.endTime:n,i=function Mv(e,t,n){return t==Me?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):qc(e=Lr(e,t),n)}(e.g.R,t.type,n),o=Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.u,s=e.m.presentationTimeline.getDuration()-r,u=Mo(e.g.R,t.type);if(1e-6>s&&u)return t.endOfStream=!0,"video"==t.type&&(n=e.j.get(Me))&&Nu(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,i>=o)return e.h.updateIntervalSeconds/2;if(i=function $v(e,t,n,r){if(t.ba)return t.ba.current();if(t.Ba||r)return t.ba=t.stream.segmentIndex.gb(t.Ba?t.Ba.endTime:r),t.ba&&t.ba.next().value;e=e.h.inaccurateManifestTolerance,r=Math.max(n-e,0);var i=null;return e&&(t.ba=t.stream.segmentIndex.gb(r),i=t.ba&&t.ba.next().value),i||(t.ba=t.stream.segmentIndex.gb(n),i=t.ba&&t.ba.next().value),i}(e,t,n,u),!i)return e.h.updateIntervalSeconds;for(o=1/0,u=(s=m(s=Array.from(e.j.values()))).next();!u.done;u=s.next())Nu(u=u.value)||u.ba&&!u.ba.current()||(o=Math.min(o,u.Ba?u.Ba.endTime:n));return r>=o+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(function Yv(e,t,n,r){var i,o,s,u,a,c,p,d,v,x,E,I,N;return D(function(C){switch(C.g){case 1:return i=pt,o=t.stream,s=t.ba,t.ta=!0,ie(C,2),w(C,function Qv(e,t,n){var r,i,o,s,u,a,l;return D(function(c){return r=[],i=Math.max(0,n.appendWindowStart-.1),o=n.appendWindowEnd+.01,((s=n.timestampOffset)!=t.Bd||i!=t.zd||o!=t.yd)&&(u=function(){var p;return D(function(d){if(1==d.g)return ie(d,2),t.zd=i,t.yd=o,t.Bd=s,w(d,function Dv(e,t,n,r,i){return D(function(s){return t==pt.Z?(e.g.u=n,function nm(e,t,n){e.l=t,e.m=n}(e.g,r,i),s.return()):w(s,Promise.all([dn(e,t,function(){var u=e.h[t].appendWindowStart,a=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=u,e.h[t].appendWindowEnd=a,tr(e,t)}),dn(e,t,function(){var u=n;0>u&&(u+=.001),e.h[t].timestampOffset=u,tr(e,t)}),dn(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=r,tr(e,t)})]),0)})}(e.g.R,t.type,s,i,o),4);if(2!=d.g)return ve(d,0);throw p=ne(d),t.zd=null,t.yd=null,t.Bd=null,p})},r.push(u())),!function Nv(e,t){return e&&t?e.fc()==t.fc()&&e.bc()==t.bc()&&h(e.sa(),t.sa()):e==t}(n.g,t.Mc)&&(t.Mc=n.g)&&(a=Lu(e,t,n.g),l=function(){var p,v;return D(function(x){switch(x.g){case 1:return ie(x,2),w(x,a,4);case 4:return p=x.h,Ne(e.i),w(x,Jc(e.g.R,t.type,p,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size),5);case 5:ve(x,0);break;case 2:throw v=ne(x),t.Mc=null,v}})},e.g.If(n.startTime,n.g),r.push(l())),w(c,Promise.all(r),0)})}(e,t,r),4);case 4:return Ne(e.i),e.s?C.return():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,a=O.ReadableStream,e.h.lowLatencyMode&&a&&u?(p=new Uint8Array(0),v=d=!1,x=function(R){var j,U,F;return D(function(V){return d||(v=!0,Ne(e.i),e.s)?V.return():(p=function zv(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(p,R),j=!1,U=0,(new ke).box("mdat",function(H){U=H.size+H.start,j=!0}).parse(p,!1,!0),j?(F=p.subarray(0,U),p=p.subarray(U),w(V,Du(e,t,n,o,r,F),0)):V.B(0))})},w(C,Lu(e,t,r,x),9)):w(C,Lu(e,t,r),7));case 7:return c=C.h,Ne(e.i),e.s?C.return():t.ab?(t.ta=!1,Dt(e,t,0),C.return()):w(C,Du(e,t,n,o,r,c),6);case 9:if(E=C.h,v){C.B(6);break}return d=!0,Ne(e.i),e.s?C.return():t.ab?(t.ta=!1,Dt(e,t,0),C.return()):w(C,Du(e,t,n,o,r,E),6);case 6:if(Ne(e.i),e.s)return C.return();t.Ba=r,s.next(),t.ta=!1,t.Qd=!1,I=e.g.R.Ya(),JSON.stringify(I[t.type]),t.ab||e.g.Md(),Dt(e,t,0),ve(C,0);break;case 2:if(N=ne(C),Ne(e.i,N),e.s)return C.return();if(t.ta=!1,7001==N.code)t.ta=!1,ki(t),Dt(e,t,0),C.B(0);else if(t.type==i.Z&&e.h.ignoreTextStreamFailures)e.j.delete(i.Z),C.B(0);else{if(3017!=N.code)return t.hc=!0,N.severity=2,w(C,Ef(e,N),0);(function Jv(e,t,n){if(!Array.from(e.j.values()).some(function(i){return i!=t&&i.Qd})){var r=Math.round(100*e.u);if(20<r)e.u-=.2;else{if(!(4<r))return t.hc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.Qd=!0}Dt(e,t,4)})(e,t,N),C.B(0)}}})}(e,t,n,i).catch(function(){}),null)}(e,t),null!=r&&(Dt(e,t,r),t.hc=!1),ve(u,7);break;case 6:return i=ne(u),w(u,Ef(e,i),8);case 8:return u.return();case 7:if(o=Array.from(e.j.values()),!e.C||!o.every(function(a){return a.endOfStream})){u.B(0);break}return w(u,e.g.R.endOfStream(),10);case 10:Ne(e.i),0!=(s=e.g.R.getDuration())&&s<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Ja(s),W(u)}})}(e,t),4)):2!=o.g?ve(o,0):(i=ne(o),e.g&&e.g.onError(i),void W(o))})}).S(n))}function ki(e){null!=e.La&&(e.La.stop(),e.La=null)}function xf(e){return D(function(t){return e.va?w(t,e.va.abort(),0):t.B(0)})}function Ef(e,t){return D(function(n){if(1==n.g)return w(n,ql(e.F),2);Ne(e.i),e.g.onError(t),t.handled||e.h.failureCallback(t),W(n)})}function Sf(e,t){var n={J:null,mimeType:null,startTime:null,$d:NaN,uri:null},r=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return function ty(e){return D(function(t){if(e.s.g)t=t.B(0);else{if(0==e.m.length||e.g&&!e.g.kb)var n=!1;else{e.g&&(e.g.Ia.pb(),e.g=null);var r=(n=e.m.shift()).create(e.l);r?(n.Ia.Ib(),e.g={node:r.node,payload:r.payload,kb:r.kb,Ia:n.Ia}):n.Ia.Qc(),n=!0}n?n=Promise.resolve():e.g?n=function ny(e){var t,n;return D(function(r){switch(r.g){case 1:return e.i=e.j.mf(e.i,e.l,e.g.node,e.g.payload),ie(r,2),e.h=e.j.Ye(e.i,e.l,e.g.payload),w(r,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ia.Oc(),e.g=null),ve(r,0);break;case 2:return 7001==(t=ne(r)).code?e.g.Ia.pb():e.g.Ia.onError(t),e.g=null,e.h=null,n=e,w(r,e.j.handleError(e.l,t),5);case 5:n.i=r.h,W(r)}})}(e):(e.j.Hf(e.i),e.o=new De,n=e.o),t=w(t,n,1)}return t})}(r)}),this.s=new Yn(function(){return function ey(e){var t,n;return D(function(i){if(1==i.g)return e.h&&e.h.abort(),If(e),w(i,e.u,2);for(e.g&&e.g.Ia.pb(),t=m(e.m),n=t.next();!n.done;n=t.next())n.value.Ia.pb();e.g=null,e.m=[],e.j=null,W(i)})}(r)})}function Di(e,t){var n={Ib:function(){},Oc:function(){},pb:function(){},onError:function(){},Qc:function(){},Ng:function(){}};return e.m.push({create:t,Ia:n}),e.h&&e.h.abort(),If(e),n}function If(e){e.o&&(e.o.resolve(),e.o=null)}function xt(e){this.g=null;for(var t=m(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function ry(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch{}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function Af(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=m(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function Cf(){}function bo(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Et(e,t){var n=this;this.j=!1,this.i=[],this.C=e,this.m=t,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new ue(function(){Ni(n)}).Da(.25),this.h=new Map,this.s=new Ce,this.s.A(document,"fullscreenchange",function(){Ni(n,!0)}),this.l=null,"ResizeObserver"in O&&(this.l=new ResizeObserver(function(){Ni(n,!0)}),this.l.observe(this.g)),this.o=new Map}function iy(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Mf(e,t,n,r,i){for(var o=!1,s=[],u=[],a=(t=m(t)).next();!a.done;a=t.next()){i.push(a=a.value);var l=e.h.get(a),c=a.startTime<=r&&a.endTime>r,p=l?l.Ie:null;l&&(s.push(l.qd),l.lc&&s.push(l.lc),c||(o=!0,e.h.delete(a),l=null)),c&&(u.push(a),l?iy(e,p)||(o=!0):(oy(e,a,i),p=(l=e.h.get(a)).Ie,o=!0)),0<a.nestedCues.length&&p&&Mf(e,a.nestedCues,p,r,i),i.pop()}if(o){for(i=(r=m(s)).next();!i.done;i=r.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(u.sort(function(d,v){return d.startTime!=v.startTime?d.startTime-v.startTime:d.endTime-v.endTime}),a=(u=m(u)).next();!a.done;a=u.next())(r=e.h.get(a.value)).lc?(n.appendChild(r.lc),r.lc.appendChild(r.qd)):n.appendChild(r.qd)}}function Ni(e,t){if(e.g){var n=e.C.currentTime;if(!e.j||void 0!==t&&t){for(var r=m(e.o.values()),i=r.next();!i.done;i=r.next())bo(i.value);bo(e.g),e.h.clear(),e.o.clear()}if(e.j){r=new Map;for(var o=(i=m(e.h.keys())).next();!o.done;o=i.next())r.set(o=o.value,e.h.get(o));Mf(e,e.i,e.g,n,[])}}}function oy(e,t,n){var r=1<n.length,i=r?"span":"div";(t.lineBreak||t.spacer)&&(t.spacer&&yt("shaka.extern.Cue","Please use lineBreak instead of spacer."),i="br"),r=!r&&0<t.nestedCues.length;var o=document.createElement(i);if("br"!=i&&function sy(e,t,n,r,i){var o=t.style,s=0==n.nestedCues.length,u=1<r.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return"\xa0".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=Pu(n.linePadding,n,e.m),o.paddingRight=Pu(n.linePadding,n,e.m),o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),i||((t=function uy(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.textContent=a)}u&&!r[r.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=Pu(n.fontSize,n,e.m),null!=n.line&&1==n.lineInterpretation&&(o.position="absolute",n.writingMode==Se?(o.width="100%",n.lineAlign==Hn?o.top=n.line+"%":"end"==n.lineAlign&&(o.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(o.height="100%",n.lineAlign==Hn?o.left=n.line+"%":"end"==n.lineAlign&&(o.right=100-n.line+"%")):(o.height="100%",n.lineAlign==Hn?o.right=n.line+"%":"end"==n.lineAlign&&(o.left=100-n.line+"%"))),o.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==Se?o.paddingLeft=n.position:o.paddingTop=n.position),"line-left"==n.positionAlign?o.cssFloat="left":"line-right"==n.positionAlign&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Se?o.width=n.size+"%":o.height=n.size+"%")}(e,o,t,n,r),n=null,t.region&&t.region.id)if(e.o.has(i=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==Yt?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Yt?"%":"px")))n=e.o.get(i);else{var s=document.createElement("span"),u=n.heightUnits==Yt?"%":"px",a=n.widthUnits==Yt?"%":"px",l=n.viewportAnchorUnits==Yt?"%":"px";s.id="shaka-text-region---"+i,s.classList.add("shaka-text-region"),s.style.height=n.height+u,s.style.width=n.width+a,s.style.position="absolute",s.style.top=n.viewportAnchorY+l,s.style.left=n.viewportAnchorX+l,s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(i,s),n=s}i=o,r&&((i=document.createElement("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i)),e.h.set(t,{qd:o,Ie:i,lc:n})}function Pu(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var i=r.value;switch(r.unit){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function ly(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function Rf(e,t,n){try{if(e.g.enabled){var r={d:1e3*n.duration,st:e.h.U()?vy:my};r.ot=function fy(e){var t=e.type;return e.init?gy:"video"==t?e.codecs.includes(",")?jo:_o:"audio"==t?Ou:"text"==t?"application/mp4"===e.mimeType?Fu:Bu:void 0}(n);var i=r.ot===_o||r.ot===Ou||r.ot===jo||r.ot===Fu;i&&(r.bl=function hy(e,t){var n=e.h.Ya()[t];if(!n.length)return NaN;var r=e.h.getCurrentTime();return(n=n.find(function(i){return i.start<=r&&i.end>=r}))?1e3*(n.end-r):NaN}(e,n.type)),n.bandwidth&&(r.br=n.bandwidth/1e3),i&&r.ot!==Fu&&(r.tb=function py(e,t){var n=e.h.jb();if(!n.length)return NaN;for(var r=n[0],i=(n=m(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>r.bandwidth&&(r=i);switch(t){case _o:return r.videoBandwidth||NaN;case Ou:return r.audioBandwidth||NaN;default:return r.bandwidth}}(e,r.ot)/1e3),ju(e,t,r)}}catch(o){rn("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",o)}}function kf(e,t){try{if(!e.g.enabled)return t;var n=_u(e);return n.ot=Bu,n.su=!0,Uu(t,Po(n))}catch(i){return rn("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",i),t}}function _u(e){return e.j||(e.j=e.g.sessionId||O.crypto.randomUUID()),{v:1,sf:e.o,sid:e.j,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ju(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled)if(Object.assign(n,_u(e)),n.pr=e.h.Hc(),e.l&&(n.ot===_o||n.ot===jo)&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),r)e=function dy(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=(t=m(t)).next();!s.done;s=t.next())i[null!=o[s=s.value]?o[s]:1][s]=e[s];for(e=0;e<i.length;e++)(o=Po(i[e]))&&(n["CMCD-"+r[e]]=o);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Po(n);o&&(t.uris=t.uris.map(function(s){return Uu(s,o)}))}}function Po(e){function t(p){return 100*n(p/100)}function n(p){return Math.round(p)}for(var p,i=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(p){return encodeURIComponent(p)},rtp:t,tb:n},s=Object.keys(e||{}).sort(),u=(s=m(s)).next();!u.done;u=s.next()){var a=e[u=u.value];if(p=a,!(Number.isNaN(p)||null==p||""===p||!1===p||"v"===u&&1===a||"pr"==u&&1===a)){var c,l=o[u];l&&(a=l(a)),c="string"==(l=typeof a)&&"ot"!==u&&"sf"!==u&&"st"!==u?u+"="+JSON.stringify(a):"boolean"===l?u:"symbol"===l?u+"="+a.description:u+"="+a,i.push(c)}}return i.join(",")}function Uu(e,t){if(!t||e.includes("offline:"))return e;var n=new Mt(e);return n.g.set("CMCD",t),n.toString()}No.prototype.destroy=function(){return this.i.destroy()},No.prototype.configure=function(e){this.h=e,this.F=new Wl({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},No.prototype.start=function(){var e=this;return D(function(t){if(1==t.g)return w(t,function Xv(e){var t,n,r,s,u,a,l,c;return D(function(p){if(1==p.g){if(t=pt,!e.l)throw new M(2,5,5006);return n=new Map,r=new Set,e.l.audio&&(n.set(t.cb,e.l.audio),r.add(e.l.audio)),e.l.video&&(n.set(t.Na,e.l.video),r.add(e.l.video)),e.o&&(n.set(t.Z,e.o),r.add(e.o)),w(p,e.g.R.init(n,e.h.forceTransmuxTS),2)}Ne(e.i);var d=e.m.presentationTimeline.getDuration();for(e.g.R.Ja(1/0>d?d:Math.pow(2,32)),s=m(n.keys()),u=s.next();!u.done;u=s.next())l=n.get(a=u.value),e.j.has(a)||(c=Tf(l),e.j.set(a,c),Dt(e,c,0));W(p)})}(e),2);Ne(e.i),e.C=!0,W(t)})},Sf.prototype.destroy=function(){return this.s.destroy()},(g=xt.prototype).remove=function(e,t){return!!this.g&&(Af(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},g.append=function(e){function n(u){var a=[],l=700<=u.fontWeight,c="italic"==u.fontStyle,p=u.textDecoration.includes("underline");return l&&a.push("b"),c&&a.push("i"),p&&a.push("u"),l=a.reduce(function(d,v){return d+"<"+v+">"},""),a=a.reduceRight(function(d,v){return d+"</"+v+">"},""),u.lineBreak||u.spacer?(u.spacer&&yt("shaka.extern.Cue","Please use lineBreak instead of spacer."),"\n"):u.nestedCues.length?u.nestedCues.map(n).join(""):l+u.payload+a}var r=function t(u,a){for(var l=m(u),c=l.next();!c.done;c=l.next())if((c=c.value).isContainer)t(c.nestedCues,a);else{var p=c.clone();p.nestedCues=[],p.payload=n(c),a.push(p)}return a}(e,[]),i=[];e=this.g.cues?Array.from(this.g.cues):[];for(var o={},s=(r=m(r)).next();!s.done;o={vb:o.vb},s=r.next())o.vb=s.value,e.some(function(u){return function(a){return a.startTime==u.vb.startTime&&a.endTime==u.vb.endTime&&a.text==u.vb.payload}}(o))||(s=ry(o.vb))&&i.push(s);for(o=(e=m(e=i.slice().sort(function(u,a){return u.startTime!=a.startTime?u.startTime-a.startTime:u.endTime!=a.endTime?u.endTime-a.startTime:"line"in VTTCue.prototype?i.indexOf(a)-i.indexOf(u):i.indexOf(u)-i.indexOf(a)}))).next();!o.done;o=e.next())this.g.addCue(o.value)},g.destroy=function(){return this.g&&(Af(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return"showing"==this.g.mode},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},$("shaka.text.SimpleTextDisplayer",xt),xt.prototype.setTextVisibility=xt.prototype.setTextVisibility,xt.prototype.isTextVisible=xt.prototype.isTextVisible,xt.prototype.destroy=xt.prototype.destroy,xt.prototype.append=xt.prototype.append,xt.prototype.remove=xt.prototype.remove,$("shaka.util.Dom",Cf),Cf.removeAllChildren=bo,(g=Et.prototype).append=function(e){for(var t=[].concat(K(this.i)),n={},r=(e=m(e)).next();!r.done;n={rc:n.rc},r=e.next())n.rc=r.value,t.some(function(i){return function(o){return k(o,i.rc)}}(n))||this.i.push(n.rc);Ni(this)},g.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},g.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter(function(r){return r.startTime<e||r.endTime>=t}),Ni(this,n>this.i.length),!0},g.isTextVisible=function(){return this.j},g.setTextVisibility=function(e){this.j=e},$("shaka.text.UITextDisplayer",Et),Et.prototype.setTextVisibility=Et.prototype.setTextVisibility,Et.prototype.isTextVisible=Et.prototype.isTextVisible,Et.prototype.remove=Et.prototype.remove,Et.prototype.destroy=Et.prototype.destroy,Et.prototype.append=Et.prototype.append,$("shaka.text.WebVttGenerator",function(){});var Df="m",Ou="a",_o="v",jo="av",gy="i",Bu="c",Fu="tt",my="v",vy="l";function Vu(){}function Hu(e,t,n,r,i){var u,o=i in r,s=!0;for(u in t){var a=i+"."+u,l=o?r[i]:n[u];o||u in n?void 0===t[u]?void 0===l||o?delete e[u]:e[u]=Mr(l):l.constructor==Object&&t[u]&&t[u].constructor==Object?(e[u]||(e[u]=Mr(l)),a=Hu(e[u],t[u],l,r,a),s=s&&a):typeof t[u]!=typeof l||null==t[u]||"function"!=typeof t[u]&&t[u].constructor!=l.constructor?(Vn("Invalid config, wrong type for "+a),s=!1):("function"==typeof n[u]&&n[u].length!=t[u].length&&_e("Unexpected number of arguments for "+a),e[u]=t[u]):(Vn("Invalid config, unrecognized key "+a),s=!1)}return s}function Ku(e,t){for(var n={},r=n,i=0,o=0;!(0>(i=e.indexOf(".",i)));)(0==i||"\\"!=e[i-1])&&(r[o=e.substring(o,i).replace(/\\\./g,".")]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function Gu(e,t){return e&&t}function Nf(){}function Li(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Gm,logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[]},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(s){return Gu([s],s)}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,useFullSegmentsForStartTime:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E"}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(s){return Gu([s],void 0)},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1};(navigator.userAgent.match(/Edge\//)||sn()||yr())&&(r.gapDetectionThreshold=.5),(ui()||sn()||yr())&&(r.stallSkip=0);var i={trackSelectionCallback:function(s){return D(function(u){return u.return(s)})},downloadSizeCallback:function(s){var u;return D(function(a){return 1==a.g?navigator.storage&&navigator.storage.estimate?w(a,navigator.storage.estimate(),3):a.return(!0):a.return((u=a.h).usage+s<.95*u.quota)})},progressCallback:function(s,u){return Gu([s,u],void 0)},usePersistentLicense:!0},o={drm:t,manifest:n,streaming:r,offline:i,abrFactory:function(){return new qe},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return i.trackSelectionCallback=function(s){return D(function(u){return u.return(function yy(e,t){var n=e.filter(function(u){return"variant"==u.type}),r=[],i=io(t,n.map(function(u){return u.language}));i&&(r=n.filter(function(u){return ye(u.language)==i})),0==r.length&&(r=n.filter(function(u){return u.primary})),0==r.length&&(n.map(function(u){return u.language}),r=n);var o=r.filter(function(u){return u.height&&480>=u.height});if(o.length&&(o.sort(function(u,a){return a.height-u.height}),r=o.filter(function(u){return u.height==o[0].height})),n=[],r.length){var s=Math.floor(r.length/2);r.sort(function(u,a){return u.bandwidth-a.bandwidth}),n.push(r[s])}for(s=(r=m(e)).next();!s.done;s=r.next())(s=s.value).type!=Me&&"image"!=s.type||n.push(s);return n}(s,o.preferredAudioLanguage))})},o}function _r(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Hu(e,t,n||Li(),r,"")}function wy(){this.g=null,this.h=[]}function Xu(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=m(e.h),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function xy(){this.i=this.h=null,this.g=[]}function Wu(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Lf(){this.u=this.C=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.I=this.L=this.N=this.l=this.o=NaN,this.g=new wy,this.h=new xy}function _(e,t){ge.call(this);var n=this;this.l=na,this.Cc=this.g=null,this.ea=!1,this.Kc=new Ce,this.Ob=new Ce,this.o=new Ce,this.vd=this.u=this.Ub=this.i=this.Lc=this.I=this.j=this.xa=this.W=this.ya=this.L=this.Dc=this.G=this.yb=this.C=this.N=this.m=this.F=null,this.Kd=1e9,this.h=jr(this),this.Hd={width:1/0,height:1/0},this.s=null,this.Ma=new Sr(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.wb=this.h.preferredTextLanguage,this.Yb=this.h.preferredTextRole,this.Xb=this.h.preferForcedSubs,this.Vb=[],this.ac=null,t&&t(this),this.F=function _y(e){return new Re(function(t,n){e.u&&e.u.segmentDownloaded(t,n)},function(t,n,r){t=(new Map).set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent($e(ah,t))},function(t,n,r,i){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent($e(uh,t))})}(this),this.F.Wd(this.h.streaming.forceHTTPS),this.D=null,Xo&&(this.D=Kn(Xo)),this.Kc.A(O,"online",function(){n.Rd()}),this.V={name:"detach"},this.ca={name:"attach"},this.ga={name:"unload"},this.Nd={name:"manifest-parser"},this.Dd={name:"manifest"},this.xb={name:"media-source"},this.wd={name:"drm-engine"},this.da={name:"load"},this.Od={name:"src-equals-drm-engine"},this.zb={name:"src-equals"};var r=new Map;r.set(this.ca,function(i,o){return Zt(function Sy(e,t,n){return null==t.J&&(t.J=n.J,e.Ob.A(t.J,"error",function(){var r=Yu(e);r&&ir(e,r)})),e.g=t.J,Promise.resolve()}(n,i,o))}),r.set(this.V,function(i){return i.J&&(n.Ob.Sa(),i.J=null),n.D&&n.D.release(),n.g=null,Zt(i=Promise.resolve())}),r.set(this.ga,function(i){return Zt(bf(n,i))}),r.set(this.xb,function(i){return i=function Iy(e,t){var n,r,i,o;return D(function(s){if(1==s.g)return n=new Wc,i=Kn(r=e.h.textDisplayFactory),e.xd=r,o=function Oy(e,t,n,r){return new $c(e,t,n,r)}(t.J,n,i,function(u,a,l){for(var c=(u=m(u)).next();!c.done;c=u.next())if((c=c.value).data&&c.cueTime&&c.frames){for(var p=c.cueTime+a,d=l,v=m(c.frames),x=v.next();!x.done;x=v.next())Pf(e,p,d,"ID3",x.value);e.D&&e.D.onHlsTimedMetadata(c,p)}}),w(s,o.D,2);e.N=o,W(s)})}(n,i),Zt(i)}),r.set(this.Nd,function(i,o){var s=function Ay(e,t,n){var r,i,o,s;return D(function(u){if(1==u.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=e.F,e.Ub=r=t.uri,o=e,w(u,wc(r,i,e.h.manifest.retryParameters,t.mimeType),2);o.Lc=u.h,e.I=Kn(e.Lc),s=Mr(e.h.manifest),n.J&&"AUDIO"===n.J.nodeName&&(s.disableVideo=!0),e.I.configure(s),W(u)})}(n,i,o);return Zt(s)}),r.set(this.Dd,function(i){return function Cy(e,t){var n=t.uri,r=e.F;e.ya=new ku(function(){return e.mc()}),e.ya.addEventListener("regionadd",function(s){Pi(e,xh,s=s.region),e.D&&e.D.onDashTimedMetadata(s)}),e.xa=null,e.h.streaming.observeQualityChanges&&(e.xa=new ko(function(){return e.Ya()}),e.xa.addEventListener("qualitychange",function(s){var u=s.quality;s=s.position,u=(new Map).set("mediaQuality",{bandwidth:u.bandwidth,audioSamplingRate:u.audioSamplingRate,codecs:u.codecs,contentType:u.contentType,frameRate:u.frameRate,height:u.height,mimeType:u.mimeType,channelsCount:u.channelsCount,pixelAspectRatio:u.pixelAspectRatio,width:u.width}).set("position",s),e.dispatchEvent($e(dh,u))}));var s,u,a,i={networkingEngine:r,modifyManifestRequest:function(s,u){var a=e.W;try{a.g.enabled&&(a.o=u.format,ju(a,s,{ot:Df,su:!a.i}))}catch(l){rn("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",l)}},modifySegmentRequest:function(s,u){Rf(e.W,s,u)},filter:function(s){return Gf(e,s)},makeTextStreamsForClosedCaptions:function(s){return function Hy(e,t){for(var n=new Set,r=m(t.textStreams),i=r.next();!i.done;i=r.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(i=(r=m(t.variants)).next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var o=m(i.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(!n.has(s=s.value)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new Ve;u={id:e.Kd++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:i.closedCaptions.get(s),label:null,type:Me,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(u),n.add(s)}}(e,s)},onTimelineRegionAdded:function(s){var u=e.ya;e:{for(var a=m(u.g),l=a.next();!l.done;l=a.next())if((l=l.value).schemeIdUri==s.schemeIdUri&&l.id==s.id&&l.startTime==s.startTime&&l.endTime==s.endTime){a=l;break e}a=null}null==a&&(u.g.add(s),s=new ee("regionadd",new Map([["region",s]])),u.dispatchEvent(s))},onEvent:function(s){return e.dispatchEvent(s)},onError:function(s){return ir(e,s)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)}},o=Date.now()/1e3;return new Pe(D(function(c){if(1==c.g)return s=e,w(c,e.I.start(n,i),2);if(s.i=c.h,u=$e(ph),e.dispatchEvent(u),0==e.i.variants.length)throw new M(2,4,4036);(function Py(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))})(e.i),a=Date.now()/1e3,e.s.F=a-o,W(c)}),function(){return e.I.stop()})}(n,i)}),r.set(this.wd,function(i){return i=function My(e,t){var n,r;return D(function(i){return 1==i.g?(n=Date.now()/1e3,r=!0,e.m=jf(e,{nb:e.F,onError:function(o){ir(e,o)},Pc:function(o){Jf(e,o)},onExpirationUpdated:function(o,s){Qf(e,o,s)},onEvent:function(o){e.dispatchEvent(o),o.type==Qu&&r&&(r=!1,e.s.j=Date.now()/1e3-n)}}),e.m.configure(e.h.drm),w(i,ac(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=i.g?w(i,e.m.Wb(t.J),3):w(i,Gf(e,e.i),0)})}(n,i),Zt(i)}),r.set(this.da,function(i,o){return Zt(function Ry(e,t,n){var r,o,s,u,a,l,p,x;return D(function(E){switch(E.g){case 1:if(t.startTime=n.startTime,null!=e.ac&&(t.startTime=e.ac,e.ac=null),r=t.J,e.Ub=t.uri,e.G=new Ai({Jc:function(){return r.playbackRate},Fc:function(){return r.defaultPlaybackRate},Yd:function(I){r.playbackRate=I},te:function(I){r.currentTime+=I}}),s=function(){return Wf(e)},e.o.A(r,"playing",o=function(){return Oo(e)}),e.o.A(r,"pause",o),e.o.A(r,"ended",o),e.o.A(r,"ratechange",s),u=e.h.abrFactory,e.u&&e.vd==u||(e.vd=u,e.u=Kn(u),"function"!=typeof e.u.playbackRateChanged&&(yt("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.u.playbackRateChanged=function(){}),e.u.configure(e.h.abr)),e.Ma=new Sr(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.wb=e.h.preferredTextLanguage,e.Yb=e.h.preferredTextRole,e.Xb=e.h.preferForcedSubs,Zf(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init(function(I,S,N){e.j&&I!=e.j.l&&Fo(e,I,!0,void 0!==S&&S,void 0===N?0:N)}),e.C=function jy(e,t){return new ff(e.g,e.i,e.h.streaming,t,function(){if(e.yb&&vf(e.yb,!0),e.j){var n=e.j;if(n.g)for(var r=n.g.Ic(),i=n.h.smallGapLimit,o=m(n.j.keys()),s=o.next();!s.done;s=o.next()){var u=n.j.get(s=s.value);u.ba=null;var a=n.g.R;if(!(a=s==Me?null!=(a=a.g).g&&null!=a.h&&r>=a.g&&r<a.h:Eu(a=Lr(a,s),r,i))&&((null!=Mo(n.g.R,s)||u.ta)&&Gv(n,u),u.va&&(u.va.abort(),u.va=null),s===Me))for((s=n.g.R.u.g).l=0,s.h=[],s.g=[],(u=s.i).i=[],u.h=[],u.g=0,vu(s),u=(s=m(s.j.values())).next();!u.done;u=s.next())Fc(u.value)}}e.L&&qu(e)},function(n){return e.dispatchEvent(n)})}(e,t.startTime),e.yb=function Uy(e){var t=new Do(e.ya);t.addEventListener("enter",function(r){Pi(e,ea,r.region)}),t.addEventListener("exit",function(r){Pi(e,ta,r.region)}),t.addEventListener("skip",function(r){var i=r.region;r.seeking||(Pi(e,ea,i),Pi(e,ta,i))});var n=new mf(e.g);return n.g.add(t),e.xa&&n.g.add(e.xa),n}(e),a=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),Uf(e,a),Rl(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function Fy(e){return new No(e.i,{Ic:function(){return e.C.xc()},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},modifySegmentRequest:function(t,n){Rf(e.W,t,n)},R:e.N,nb:e.F,onError:function(t){return ir(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Jf:function(){e.I&&e.I.update&&e.I.update()},Md:function(){e.C&&e.C.ue(),qu(e)},If:function(t,n){var r=n.Ed;r&&e.xa&&function Ov(e,t,n){var r=function Uv(e,t){var n=e.g.get(t);return n||e.g.set(t,n={jc:[],ge:null,contentType:t}),n}(e,t.contentType);(function Bv(e,t){var n=e.h()[t.contentType];if(n&&0<n.length){var r=n[0].start,i=n[n.length-1].end,o=t.jc;t.jc=o.filter(function(s,u){return!(s.position<=r&&u+1<o.length&&o[u+1].position<=r||s.position>=i)})}else t.jc=[]})(e,r),e={Ed:t,position:n},0<=(t=(r=r.jc).findIndex(function(i){return i.position>=n}))?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.xa,r,t)}})}(e),e.j.configure(e.h.streaming),e.l=It,r.textTracks&&e.o.A(r.textTracks,"addtrack",function(I){I.track&&"chapters"===(I=I.track).kind&&_f(e,I)}),e.dispatchEvent($e(Zu)),l=null,e.jb().find(function(I){return I.active})){E.B(2);break}if(l=Ur(e)?e.u.chooseVariant():null,Fo(e,l,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){E.B(3);break}return p=e.C.xc(),w(E,function Gy(e,t){var r,i,o,s;return D(function(u){return 1==u.g?(r=e.video,i=function(a,l){var c,p;return D(function(v){return 1==v.g?a?w(v,a.createSegmentIndex(),2):v.return(null):(p=(c=a.segmentIndex.gb(l))?c.next().value:null)?v.return(p.startTime):v.return(null)})},w(u,i(e.audio,t),2)):3!=u.g?(o=u.h,w(u,i(r,t),3)):u.return(null!=(s=u.h)&&null!=o?Math.max(s,o):null!=s?s:null!=o?o:t)})}(l,p),4);case 4:e.C.od(E.h);case 3:qf(e,null,qn(l));case 2:return e.C.nd(),e.ib().find(function(I){return I.active})||((x=nu(e.i.textStreams,e.wb,e.Yb,e.Xb)[0]||null)&&Wu(e.s.h,x,!0),l&&(x?(l.audio&&function Xy(e,t,n){return e=ye(e.h.preferredTextLanguage),t=ye(t.language),$s(n=ye(n.language),e)&&!$s(t,n)}(e,l.audio,x)&&(e.ea=!0),e.ea&&e.N.m.setTextVisibility(!0),Yf(e)):e.ea=!1),x&&(e.h.streaming.alwaysStreamText||e.ud())&&Lo(e.j,x)),w(E,e.j.start(),5);case 5:e.h.abr.enabled&&(e.u.enable(),zf(e)),Ll(e.j?e.j.l:null,e.i),th(e.i),St(e),Ur(e),e.i.variants.some(function(I){return I.primary}),e.o.ka(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-n.$d}),W(E)}})}(n,i,o))}),r.set(this.Od,function(i,o){var s=function ky(e,t,n){var r,i,o,u,a,l;return D(function(c){return 1==c.g?(r=pt,i=Date.now()/1e3,o=!0,e.m=jf(e,{nb:e.F,onError:function(p){ir(e,p)},Pc:function(p){Jf(e,p)},onExpirationUpdated:function(p,d){Qf(e,p,d)},onEvent:function(p){e.dispatchEvent(p),p.type==Qu&&o&&(o=!1,e.s.j=Date.now()/1e3-i)}}),e.m.configure(e.h.drm),u=Jn(n.uri||""),"application/x-mpegurl"==(a=ia[u])&&no()&&(a="application/vnd.apple.mpegurl"),a||(a="video/mp4"),l={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:a,codecs:n.mimeType?em(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:r.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.W=!0,w(c,ac(e.m,[l],[]),2)):w(c,e.m.Wb(t.J),0)})}(n,i,o);return Zt(s)}),r.set(this.zb,function(i,o){return function Dy(e,t,n){function r(){return Oo(e)}t.uri=n.uri,t.startTime=n.startTime,e.Ub=t.uri;var i=t.J;e.C=new cf(i);var o=!1;e.Vb.push(function(){o=!0}),null!=t.startTime&&e.C.od(t.startTime),e.G=new Ai({Jc:function(){return i.playbackRate},Fc:function(){return i.defaultPlaybackRate},Yd:function(a){i.playbackRate=a},te:function(a){i.currentTime+=a}}),Uf(e,e.h.streaming.rebufferingGoal),e.o.A(i,"playing",r),e.o.A(i,"pause",r),e.o.A(i,"ended",r),e.o.A(i,"ratechange",function(){return Wf(e)}),"none"!=i.preload&&e.o.ka(i,"loadedmetadata",function(){e.s.m=Date.now()/1e3-n.$d}),i.audioTracks&&(e.o.A(i.audioTracks,"addtrack",function(){return St(e)}),e.o.A(i.audioTracks,"removetrack",function(){return St(e)}),e.o.A(i.audioTracks,"change",function(){return St(e)})),i.textTracks&&(e.o.A(i.textTracks,"addtrack",function(a){if(a.track)switch(a=a.track,a.kind){case"metadata":!function by(e,t){if("metadata"==t.kind){t.mode="hidden",e.o.A(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),i=r.next();!i.done;i=r.next())Pf(e,(i=i.value).startTime,i.endTime,i.type,i.value),e.D&&e.D.onCueMetadataChange(i.value)});var n=new ue(function(){for(var r=function Vy(e){return Array.from(e.g.textTracks).filter(function(t){return"metadata"==t.kind})}(e),i=(r=m(r)).next();!i.done;i=r.next())i.value.mode="hidden"}).Nb().S(.5);e.Vb.push(function(){n.stop()})}}(e,a);break;case"chapters":_f(e,a);break;default:St(e)}}),e.o.A(i.textTracks,"removetrack",function(){return St(e)}),e.o.A(i.textTracks,"change",function(){return St(e)}));var s=Jn(t.uri);i.src=function cy(e,t,n){try{if(!e.g.enabled)return t;var r=_u(e);e:{switch(n){case"video/webm":case"video/mp4":var i=jo;break e;case"application/x-mpegurl":i=Df;break e}i=void 0}return r.ot=i,r.su=!0,Uu(t,Po(r))}catch(s){return rn("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}(e.W,t.uri,ia[s]),(sn()||ui())&&i.load(),e.l=Nt,e.dispatchEvent($e(Zu));var u=new De;return nr(i,HTMLMediaElement.HAVE_METADATA,e.o,function(){e.C.nd(),u.resolve()}),nr(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,function(){var a;return D(function(l){return 1==l.g?(function Ny(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.Td(t);var n=e.h.preferredVariantRole;""!=n&&e.Td(t,n)}}(e),(a=bi(e)).find(function(c){return"disabled"!=c.mode})?(0<a.length&&(e.ea=!0),l.B(2)):w(l,new Promise(function(c){e.o.ka(i.textTracks,"change",c),new ue(c).S(1)}),2)):o?l.return():(function Ly(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.Ud(t,"",n);var r=e.h.preferredTextRole;""!=r&&e.Ud(t,r,n)}}(e),void W(l))})}),i.error?u.reject(Yu(e)):"none"==i.preload&&(_e('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.o.ka(i,"error",function(){u.reject(Yu(e))}),new Pe(u,function(){return u.reject(new M(2,7,7001)),Promise.resolve()})}(n,i,o)}),this.Ga=new Sf(this.V,{mf:function(i,o,s,u){var a=null;return i==n.V&&(a=s==n.V?n.V:n.ca),i==n.ca&&(a=s==n.V||o.J!=u.J?n.V:s==n.ca?n.ca:s==n.xb||s==n.da?n.xb:s==n.zb?n.Od:null),i==n.xb&&(a=s==n.da&&o.J==u.J?n.Nd:n.ga),i==n.Nd&&(a=zu(n.da,n.Dd,n.ga,s,o,u)),i==n.Dd&&(a=zu(n.da,n.wd,n.ga,s,o,u)),i==n.wd&&(a=zu(n.da,n.da,n.ga,s,o,u)),i==n.Od&&(a=s==n.zb&&o.J==u.J?n.zb:n.ga),(i==n.da||i==n.zb)&&(a=n.ga),i==n.ga&&(a=u.J&&o.J==u.J?n.ca:n.V),a},Ye:function(i,o,s){return n.dispatchEvent($e(mh,(new Map).set("state",i.name))),r.get(i)(o,s)},handleError:function(i){return D(function(o){return 1==o.g?w(o,bf(n,i),2):o.return(i.J?n.ca:n.V)})},Hf:function(i){n.dispatchEvent($e(vh,(new Map).set("state",i.name)))}}),e&&this.Wb(e,!0)}function $e(e,t){return new ee(e,t)}function bf(e,t){var n,r,i,o,s,u,a,l,c;return D(function(p){switch(p.g){case 1:return e.l!=Vt&&(e.l=na),n=e.Vb.map(function(d){return d()}),e.Vb=[],w(p,Promise.all(n),2);case 2:if(e.dispatchEvent($e(Sh)),t.mimeType=null,t.startTime=null,t.uri=null,e.ya&&(e.ya.release(),e.ya=null),t.J&&e.o.Sa(),e.yb&&(e.yb.release(),e.yb=null),e.Dc&&(e.Dc.stop(),e.Dc=null),!e.I){p.B(3);break}return w(p,e.I.stop(),4);case 4:e.I=null,e.Lc=null;case 3:if(!e.u){p.B(5);break}return w(p,e.u.stop(),5);case 5:if(!e.j){p.B(7);break}return w(p,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.G&&(e.G.release(),e.G=null),e.C&&(e.C.release(),e.C=null),!e.N){p.B(9);break}return w(p,e.N.destroy(),10);case 10:e.N=null;case 9:if(e.D&&e.D.onAssetUnload(),!t.J||!t.J.src){p.B(11);break}return w(p,new Promise(function(d){return new ue(d).S(.1)}),12);case 12:for(t.J.removeAttribute("src"),t.J.load();t.J.lastChild;)t.J.removeChild(t.J.firstChild);case 11:if(!e.m){p.B(13);break}return w(p,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Ub=null,e.L=null,e.i){for(r=m(e.i.variants),i=r.next();!i.done;i=r.next())for(s=m([(o=i.value).audio,o.video]),u=s.next();!u.done;u=s.next())(a=u.value)&&a.segmentIndex&&a.segmentIndex.release();for(l=m(e.i.textStreams),u=l.next();!u.done;u=l.next())(c=u.value).segmentIndex&&c.segmentIndex.release()}e.i=null,e.s=new Lf,e.xd=null,$u(e),W(p)}})}function Pf(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent($e(gh,t))}function _f(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new ue(function(){t.mode="hidden"}).Nb().S(.5);e.Vb.push(function(){n.stop()})}}function jf(e,t){return new vo(t,e.h.drm.updateExpirationTime)}function Uf(e,t){e.L=new Sm,e.L.g=Ir,Xl(e.L,t,Math.min(.5,t/2)),$u(e),e.Dc=new ue(function(){qu(e)}).Da(.25)}function qu(e){switch(e.l){case Nt:if(e.g.ended)var t=!0;else{var n=xu(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case It:e:if(e.g.ended||Yc(e.N))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.hb();var r=xu(e.g.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=qc(e.g.buffered,e.g.currentTime);var i=t,o=(n=e.L).h.get(n.g);t=n.g,n.g=r=i||r>=o?ao:Ir,t!=r&&$u(e)}function Of(e){if(e.I){var t=Mr(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.I.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{Xf(e,e.i)}catch(o){ir(e,o)}e.u&&Ur(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||Bo(e)}if(e.F&&e.F.Wd(e.h.streaming.forceHTTPS),e.N&&e.xd!=(t=e.h.textDisplayFactory)){var n=Kn(t),r=e.N,i=r.m;r.m=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.g&&(r.g.i=n),e.xd=t,e.j&&(n=(t=e.j).j.get(Me))&&Pr(t,n.stream,!0,0,!0)}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),zf(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Xl(e.L,t,Math.min(.5,t/2))),e.i&&Zf(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function bi(e){return Array.from(e.g.textTracks).filter(function(t){return"metadata"!=t.kind&&"chapters"!=t.kind&&"Shaka Player TextTrack"!=t.label})}function Bf(e){return Array.from(e.g.textTracks).filter(function(t){return"chapters"==t.kind})}function Ff(e,t){var n,r;return D(function(i){switch(i.g){case 1:return n=Jn(t),(r=Mh[n])?i.return(r):(ie(i,2),w(i,Tc(t,e.F,e.h.streaming.retryParameters),4));case 4:r=i.h,ve(i,3);break;case 2:ne(i);case 3:if(r)return i.return(r);throw new M(1,2,2011,n)}})}function Vf(e,t,n,r,i,o,s){var a,l,c;return D(function(p){return 1==p.g?"text/vtt"!=i||s.length?w(p,Hf(e,t,e.F,e.h.streaming.retryParameters),3):p.B(2):(2!=p.g&&(a=Kf(e,p.h,i,s),l=new Blob([a],{type:"text/vtt"}),t=Au(l),i="text/vtt"),(c=document.createElement("track")).src=kf(e.W,t),c.label=o,c.kind=r,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),p.return(c))})}function Hf(e,t,n,r){var i,o;return D(function(u){if(1==u.g){i=ln,(o=Bt([t],r)).method="GET";var a=e.W;try{a.g.enabled&&ju(a,o,{ot:Bu,su:!0})}catch(l){rn("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return w(u,n.request(i,o).promise,2)}return u.return(u.h.data)})}function Kf(e,t,n,r){var i=it[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration},t=Te(t),function ay(e,t){function r(a){for(var l=a,c=m(t),p=c.next();!p.done;p=c.next())(p=p.value).end&&p.start<a&&(l+=p.end-p.start);return(10>(a=Math.floor(l/3600))?"0":"")+a+":"+(10>(c=Math.floor(l/60%60))?"0":"")+c+":"+(10>(p=Math.floor(l%60))?"0":"")+p+"."+(100>(l=Math.floor(1e3*l%1e3))?10>l?"00":"0":"")+l}function i(a){var l=[],c=700<=a.fontWeight,p="italic"==a.fontStyle,d=a.textDecoration.includes("underline");return c&&l.push("b"),p&&l.push("i"),d&&l.push("u"),c=l.reduce(function(v,x){return v+"<"+x+">"},""),l=l.reduceRight(function(v,x){return v+"</"+x+">"},""),a.lineBreak||a.spacer?(a.spacer&&yt("shaka.text.Cue","Please use lineBreak instead of spacer."),"\n"):a.nestedCues.length?a.nestedCues.map(i).join(""):c+a.payload+l}for(var o=function n(a,l){for(var c=m(a),p=c.next();!p.done;p=c.next())if((p=p.value).isContainer)n(p.nestedCues,l);else{var d=p.clone();d.nestedCues=[],d.payload=i(p),l.push(d)}return l}(e,[]),s="WEBVTT\n\n",u=(o=m(o)).next();!u.done;u=o.next())s+=r((u=u.value).startTime)+" --\x3e "+r(u.endTime)+function(a){var l=[];switch(a.textAlign){case"left":l.push("align:left");break;case"right":l.push("align:right");break;case P:l.push("align:middle");break;case"start":l.push("align:start");break;case"end":l.push("align:end")}switch(a.writingMode){case"vertical-lr":l.push("vertical:lr");break;case"vertical-rl":l.push("vertical:rl")}return l.length?" "+l.join(" "):""}(u)+"\n",s+=u.payload+"\n\n";return s}(t=n.parseMedia(t,e),r);throw new M(2,2,2014,n)}function jr(e){var t=Li();return t.streaming.failureCallback=function(n){if(e.U()){var r=null;1001==n.code||1002==n.code?r=1:1003==n.code&&(r=.1),null!=r&&(n.severity=1,e.Rd(r))}},t.textDisplayFactory=function(){return e.Cc?new Et(e.g,e.Cc):new xt(e.g)},t}function Gf(e,t){return D(function(n){if(1==n.g)return w(n,function Ky(e,t){return D(function(r){if(1==r.g)return w(r,function fm(e,t){return D(function(n){if(1==n.g)return w(n,Dl(t,0<t.offlineSessionIds.length),2);Ll(e,t),function pm(e){e.textStreams=e.textStreams.filter(function(t){return pi(Qt(t.mimeType,t.codecs))})}(t),function dm(e){e.imageStreams=e.imageStreams.filter(function(t){var n=["image/svg+xml","image/png","image/jpeg"];return(ui()||sn()||yr())&&n.push("image/webp"),n.includes(t.mimeType)})}(t),W(n)})}(e.j?e.j.l:null,t),2);th(t),W(r)})}(e,t),2);Xf(e,t),W(n)})}function Xf(e,t){if(e.l!=Vt){for(var n=e.h.restrictions,r=e.Hd,i=!1,o=m(t.variants),s=o.next();!s.done;s=o.next()){var u=(s=s.value).allowedByApplication;s.allowedByApplication=Zs(s,n,r),u!=s.allowedByApplication&&(i=!0)}if(i&&e.j&&St(e),(n=e.m?e.m.g:null)&&e.m.s)for(i=(r=m(t.variants)).next();!i.done;i=r.next())for(o=(i=m(((i=i.value).video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]))).next();!o.done;o=i.next())if((o=o.value).keySystem==n.keySystem)for(s=(o=m(o.initData||[])).next();!s.done;s=o.next())yo(e.m,(s=s.value).initDataType,s.initData);eh(e,t)}}function $u(e){var t=e.sd();if(e.s&&e.L&&e.C){var n=e.G;n.j=t,gf(n),e.W&&(n=e.W,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),Oo(e)}t=(new Map).set("buffering",t),e.dispatchEvent($e(sh,t))}function Wf(e){var t=e.g.playbackRate;0!=t&&(e.G&&e.G.set(t),t=$e(yh),e.dispatchEvent(t))}function Oo(e){e.s&&e.L&&function Uo(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}(e.s.g,e.L.g==Ir?"buffering":e.g.paused?"paused":e.g.ended?"ended":"playing")}function Ur(e){try{eh(e,e.i)}catch(n){return ir(e,n),!1}var t=e.i.variants.filter(function(n){return mi(n)});return t=e.Ma.create(t),e.u.setVariants(Array.from(t.values())),!0}function Bo(e){var t;(t=Ur(e)?e.u.chooseVariant():null)&&Fo(e,t,!0,!0,0)}function Fo(e,t,n,r,i){var o=e.j.l;if(t==o)r&&wf(e.j,t,r,i,!0);else{var s=e.s.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),wf(e.j,t,r,i),r=null,o&&(r=qn(o)),t=qn(t),n?qf(e,r,t):$f(e,r,t)}}function Vo(e,t){var n=Array.from(e.g.audioTracks).find(function(i){return i.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),$f(e,n=so(n),so(t))}function qf(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),Or(e,t=$e(oh,t))}function St(e){Or(e,$e(Eh))}function $f(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),Or(e,t=$e(Ih,t))}function Ho(e){Or(e,$e(wh))}function Yf(e){Or(e,$e(Th))}function zf(e){var t=(new Map).set("newStatus",e.h.abr.enabled);Or(e,$e(ih,t))}function ir(e,t){if(e.l!=Vt){var n=$e(Ko,(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Pi(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent($e(t,n))}function Yu(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new M(2,3,3016,t,n,e.g.error.message)}function Jf(e,t){if(e.j){var n=Object.keys(t),r=1==n.length&&"00"==n[0],i=!1;if(n.length)for(var o=(n=m(e.i.variants)).next();!o.done;o=n.next()){var s=[];(o=o.value).audio&&s.push(o.audio),o.video&&s.push(o.video);for(var u=(s=m(s)).next();!u.done;u=s.next()){var a=u.value;if(u=o.allowedByKeySystem,a.keyIds.size){o.allowedByKeySystem=!0;for(var l=(a=m(a.keyIds)).next();!l.done;l=a.next())l=l.value,l=t[r?"00":l],o.allowedByKeySystem=o.allowedByKeySystem&&!!l&&!Ch.includes(l)}u!=o.allowedByKeySystem&&(i=!0)}}(!i||Ur(e))&&((r=e.j.l)&&!r.allowedByKeySystem&&Bo(e),i&&St(e))}}function Qf(e,t,n){e.I&&e.I.onExpirationUpdated&&e.I.onExpirationUpdated(t,n),t=$e(ch),e.dispatchEvent(t)}function Zf(e,t,n){0<t&&(e.U()||e.Ee(t)),n<(t=e.getDuration())&&(e.U()||e.Ja(n))}function eh(e,t){var n=e.m?e.m.Gc():{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,o=!1,s=new Set,u=new Set,a=m(t.variants),l=a.next();!l.done;l=a.next()){var c=[];(l=l.value).audio&&c.push(l.audio),l.video&&c.push(l.video);for(var p=(c=m(c)).next();!p.done;p=c.next())if((p=p.value).keyIds.size)for(var d=(p=m(p.keyIds)).next();!d.done;d=p.next()){d=d.value;var v=n[r?"00":d];v?Ch.includes(v)&&u.add(v):s.add(d)}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):o=!0}if(!i)throw new M(2,4,4012,n={hasAppRestrictions:o,missingKeys:Array.from(s),restrictedKeyStatuses:Array.from(u)})}function th(e){if(!e.variants.some(mi))throw new M(2,4,4032)}function Or(e,t){D(function(n){if(1==n.g)return w(n,Promise.resolve(),2);e.l!=Vt&&e.dispatchEvent(t),W(n)})}function nh(e){for(var t=new Set,n=(e=m(e)).next();!n.done;n=e.next())t.add((n=n.value).language?ye(n.language):"und");return t}function rh(e){for(var t=new Map,n=new Map,r=(e=m(e)).next();!r.done;r=e.next()){var i="und",o=[];(r=r.value).language&&(i=ye(r.language)),(o="variant"==r.type?r.audioRoles:r.roles)&&o.length||(o=[""]),t.has(i)||t.set(i,new Set);for(var s=(o=m(o)).next();!s.done;s=o.next())s=s.value,t.get(i).add(s),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(s,r.label))}var u=[];return t.forEach(function(a,l){for(var c=m(a),p=c.next();!p.done;p=c.next()){p=p.value;var d=null;n.has(l)&&n.get(l).has(p)&&(d=n.get(l).get(p)),u.push({language:l,role:p,label:d})}}),u}function or(){return new M(2,7,7e3)}function zu(e,t,n,r,i,o){return r==e&&i.J==o.J&&i.uri==o.uri&&i.mimeType==o.mimeType?t:n}function Ju(e){return new Promise(function(t,n){e.pb=function(){return n(or())},e.Oc=function(){return t()},e.onError=function(r){return n(r)},e.Qc=function(){return n(or())}})}$("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Ag:"s",wg:"o"}),$("shaka.util.ConfigUtils",Vu),Vu.convertToConfigObject=Ku,Vu.mergeConfigObjects=Hu,$("shaka.util.PlayerConfiguration",Nf),Nf.mergeConfigObjects=_r,de(_,ge),(g=_.prototype).destroy=function(){var t,e=this;return D(function(n){switch(n.g){case 1:return e.l==Vt?n.return():(e.l=Vt,t=Di(e.Ga,function(){return{node:e.V,payload:{J:null,mimeType:null,startTime:null,$d:NaN,uri:null},kb:!1}}),w(n,new Promise(function(r){t.Ib=function(){},t.Oc=function(){r()},t.pb=function(){r()},t.onError=function(){r()},t.Qc=function(){r()}}),2));case 2:return w(n,e.Ga.destroy(),3);case 3:if(e.Kc&&(e.Kc.release(),e.Kc=null),e.Ob&&(e.Ob.release(),e.Ob=null),e.o&&(e.o.release(),e.o=null),e.vd=null,e.u=null,e.h=null,e.s=null,e.Cc=null,e.W=null,!e.F){n.B(4);break}return w(n,e.F.destroy(),5);case 5:e.F=null;case 4:ge.prototype.release.call(e),W(n)}})},g.Wb=function(e,t){if(t=void 0===t||t,this.l==Vt)return Promise.reject(or());var n={J:null,mimeType:null,startTime:null,$d:NaN,uri:null};n.J=e,Ot()||(t=!1);var r=t?this.xb:this.ca,i=Di(this.Ga,function(){return{node:r,payload:n,kb:!1}});return i.Ib=function(){},Ju(i)},g.detach=function(){var e=this;if(this.l==Vt)return Promise.reject(or());var t=Di(this.Ga,function(){return{node:e.V,payload:{J:null,mimeType:null,startTime:null,$d:NaN,uri:null},kb:!1}});return t.Ib=function(){},Ju(t)},g.ce=function(e){var t=this;if(e=void 0===e||e,this.l==Vt)return Promise.reject(or());Ot()||(e=!1);var n={J:null,mimeType:null,startTime:null,$d:NaN,uri:null},r=Di(this.Ga,function(i){var o=i.J&&e?t.xb:i.J?t.ca:t.V;return n.J=i.J,{node:o,payload:n,kb:!1}});return r.Ib=function(){},Ju(r)},g.gg=function(e){this.ac=e},g.load=function(e,t,n){var r=this;if(this.ac=null,this.l==Vt)return Promise.reject(or());this.dispatchEvent($e(hh));var i={J:null,mimeType:null,startTime:null,$d:NaN,uri:null};i.uri=e,i.$d=Date.now()/1e3,n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var o=function Ey(e,t){if(!Ot())return!0;var n=t.mimeType,r=t.uri||"";if(n||(n=Jn(r),n=ia[n]),n){if(""==(t.J||wl()).canPlayType(n))return!1;if(!Ot()||!(n in kt)&&!(Jn(r)in Qn)||("application/x-mpegurl"===n||"application/vnd.apple.mpegurl"===n)&&e.h.streaming.preferNativeHls)return!0;if(no())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,i)?this.zb:this.da,s=Di(this.Ga,function(u){return null==u.J?null:(i.J=u.J,{node:o,payload:i,kb:!0})});return this.s=new Lf,this.W=function By(e){return new ly({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Ya:function(){return e.Ya()},getCurrentTime:function(){return e.g?e.g.currentTime:0},jb:function(){return e.jb()},Hc:function(){return e.Hc()},U:function(){return e.U()}},e.h.cmcd)}(this),s.Ib=function(){},new Promise(function(u,a){s.Qc=function(){return a(new M(2,7,7002))},s.Oc=function(){u(),r.dispatchEvent($e(fh))},s.pb=function(){return a(or())},s.onError=function(l){return a(l)}})},g.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ku(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(yt("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=_r(this.h,e,jr(this));return Of(this),n},g.getConfiguration=function(){var e=jr(this);return _r(e,this.h,jr(this)),e},g.af=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.mc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.Tf=function(){for(var e in this.h)delete this.h[e];_r(this.h,jr(this),jr(this)),Of(this)},g.gf=function(){return this.l},g.lf=function(){return this.g},g.dc=function(){return this.F},g.rd=function(){return this.Ub},g.me=function(){return this.D?this.D:null},g.U=function(){return this.i?this.i.presentationTimeline.U():!(!this.g||!this.g.src)&&this.g.duration==1/0},g.mb=function(){return!!this.i&&this.i.presentationTimeline.mb()},g.Bf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},g.mc=function(){if(this.i){var e=this.i.presentationTimeline;return{start:e.Db(),end:e.Pa()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.zf=function(){this.U()&&(this.g.currentTime=this.mc().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.m?this.m.g:null},g.cc=function(){return this.m?this.m.cc():1/0},g.Gc=function(){return this.m?this.m.Gc():{}},g.sd=function(){return!!this.L&&this.L.g==Ir},g.Hc=function(){return this.g?this.G?this.G.i:1:0},g.bg=function(e){0==e?_e("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.G.set(e),this.l==It&&(this.u.playbackRateChanged(e),yf(this.j,1<Math.abs(e))))},g.Re=function(){var e=this.G.Fc();this.l==Nt&&this.G.set(e),this.l==It&&(this.G.set(e),this.u.playbackRateChanged(e),yf(this.j,!1))},g.jb=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,r=m(this.i.variants),i=r.next();!i.done;i=r.next())if(mi(i=i.value)){var o=qn(i);o.active=i==e,o.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(s){return so(s)}):[]},g.ib=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){var i=gi(r=r.value);i.active=r==e,t.push(i)}return t}return this.g&&this.g.src&&this.g.textTracks?bi(this).map(function(o){return _l(o)}):[]},g.ef=function(){return this.i?this.i.imageStreams.map(function(e){return Pl(e)}):[]},g.vf=function(e,t){var r,i,o,u,a,l,c,p,d,v,x,E,I,S,N,C,R,n=this;return D(function(j){return 1==j.g?n.i?(r=n.i.imageStreams.find(function(U){return U.id==e}))?r.segmentIndex?j.B(3):w(j,r.createSegmentIndex(),3):j.return(null):j.B(2):2!=j.g&&null!=(i=r.segmentIndex.find(t))&&(o=r.segmentIndex.get(i),u=/(\d+)x(\d+)/.exec(o.tilesLayout||r.tilesLayout))?(a=r.width||0,l=r.height||0,c=parseInt(u[1],10),p=parseInt(u[2],10),d=a/c,v=l/p,x=c*p,E=o.l-o.startTime,I=o.i||E/x,S=o.startTime,C=N=0,1<x&&(R=Math.floor((t-o.startTime)/I),S=o.startTime+R*I,N=R%c*d,C=Math.floor(R/c)*v),j.return({imageHeight:l,imageWidth:a,height:v,positionX:N,positionY:C,startTime:S,duration:I,uris:o.sa(),width:d})):j.return(null)})},g.Ae=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.o&&(Wu(this.s.h,t,!1),Lo(this.j,t),Ho(this),this.wb=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=m(t=bi(this))).next();!n.done;n=t.next())(n=n.value).mode=tu(n)==e.id?this.ea?"showing":"hidden":"disabled";Ho(this)}},g.Be=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&_e("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(i){return i.id==e.id});r&&mi(r)&&(Fo(this,r,!1,t,n),this.Ma=new Gl(r),Ur(this))}else if(this.g&&this.g.audioTracks)for(n=(t=m(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(tu(n=n.value)==e.id){Vo(this,n);break}},g.$e=function(){return rh(this.jb())},g.uf=function(){return rh(this.ib())},g.Ze=function(){return Array.from(nh(this.jb()))},g.tf=function(){return Array.from(nh(this.ib()))},g.Td=function(e,t){if(this.i&&this.C){this.Ma=new Sr(e,t||"",0,"");for(var n=function(a,l){return a.video||l.video?a.video&&l.video?Math.abs((a.video.height||0)-(l.video.height||0))+Math.abs((a.video.width||0)-(l.video.width||0)):1/0:0},r=this.j.l,i=this.Ma.create(this.i.variants),o=null,s=(i=m(i.values())).next();!s.done;s=i.next())s=s.value,(!o||n(o,r)>n(s,r))&&(o=s);o?(n=qn(o),this.Be(n,!0)):Bo(this)}else if(this.g&&this.g.audioTracks){for(i=Array.from(this.g.audioTracks),n=ye(e),o=r=null,s=(i=m(i)).next();!s.done;s=i.next()){var u=so(s=s.value);ye(u.language)==n&&(r=s,t?u.roles.includes(t)&&(o=s):0==u.roles.length&&(o=s))}o?Vo(this,o):r&&Vo(this,r)}},g.Ud=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.C)this.wb=e,this.Yb=t||"",this.Xb=n,(e=nu(this.i.textStreams,this.wb,this.Yb,this.Xb)[0]||null)&&e!=this.j.o&&(Wu(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.ud())&&(Lo(this.j,e),Ho(this));else{var r=ye(e);(e=this.ib().find(function(i){return ye(i.language)==r&&(!t||i.roles.includes(t))&&i.forced==n}))&&this.Ae(e)}},g.Uf=function(e){if(this.i&&this.C){for(var t=null,n=m(this.i.variants),r=n.next();!r.done;r=n.next())if((r=r.value).audio.label==e){t=r;break}null!=t&&(this.Ma=new Sr(t.language,"",0,e),Bo(this))}else if(this.g&&this.g.audioTracks){for(t=null,r=(n=m(n=Array.from(this.g.audioTracks))).next();!r.done;r=n.next())(r=r.value).label==e&&(t=r);t&&Vo(this,t)}},g.ud=function(){var e=this.ea;return this.N?this.N.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?bi(this).some(function(t){return"showing"==t.mode}):e},g.ne=function(){return this.g&&this.g.src&&this.g.textTracks?Bf(this).map(function(e){return _l(e)}):[]},g.bf=function(e){var t=ye(e),n=Bf(this).filter(function(u){return ye(u.language)==t});if(!n||!n.length)return[];e=[];for(var r=new Set,i=(n=m(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var o=(i=m(i.cues)).next();!o.done;o=i.next()){var s=o.value;(o=s.id)&&""!=o||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},r.has(o)||(e.push(s),r.add(o))}return e},g.$f=function(e){if(this.ea!=(e=!!e)){if(this.ea=e,this.l==It)this.N.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=nu(this.i.textStreams,this.wb,this.Yb,this.Xb)).length&&(Lo(this.j,e[0]),Ho(this)):function Hv(e){var t=e.j.get(Me);t&&(ki(t),xf(t).catch(function(){}),e.j.delete(Me)),e.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=bi(this),n=(t=m(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Yf(this)}},g.pf=function(){if(!this.U())return null;var e=this.Ga.l,t=0;if(this.C)t=this.C.xc();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.l+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},g.oe=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.l);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},g.Ya=function(){if(this.l==It)return this.N.Ya();var e={total:[],audio:[],video:[],text:[]};return this.l==Nt&&(e.total=kn(this.g.buffered)),e},g.getStats=function(){if(this.l!=It&&this.l!=Nt)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Oo(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.N=Number(n.droppedVideoFrames),t.L=r,this.s.I=Number(n.corruptedVideoFrames)}n=this.m&&(n=this.m).G?n.G:NaN,this.s.s=n,this.l==It&&((n=this.j.l)&&(this.s.C=(this.G?this.G.i:1)*n.bandwidth),n&&n.video&&(r=n.video.height||NaN,(t=this.s).o=n.video.width||NaN,t.l=r),this.U()&&(n=this.oe().valueOf()+1e3*this.mc().end,this.s.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.s.u=n),this.l==Nt&&(t=e.videoHeight||NaN,(n=this.s).o=e.videoWidth||NaN,n.l=t);var i=this.s;e=i.o,n=i.l,t=i.C,r=i.L;for(var o=i.N,s=i.I,u=i.u,a=i.i,l=i.m,c=i.F,p=i.j,d=Xu(i.g,"playing"),v=Xu(i.g,"paused"),x=Xu(i.g,"buffering"),E=i.s,I=i.D,S=i.G,N=function Ty(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],r=m(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(i.g),C=[],R=(i=m(i.h.g)).next();!R.done;R=i.next())C.push({timestamp:(R=R.value).timestamp,id:R.id,type:R.type,fromAdaptation:R.fromAdaptation,bandwidth:R.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:o,corruptedFrames:s,estimatedBandwidth:u,completionPercent:a,loadLatency:l,manifestTimeSeconds:c,drmTimeSeconds:p,playTime:d,pauseTime:v,bufferingTime:x,licenseTime:E,liveLatency:I,maxSegmentDuration:S,stateHistory:N,switchHistory:C}},g.addTextTrack=function(e,t,n,r,i,o,s){if(s=void 0!==s&&s,yt("addTextTrack","Please use an addTextTrackAsync."),this.l!=It&&this.l!=Nt)throw new M(1,7,7004);if(!r){var u=Jn(e);if(!(r=Mh[u]))throw new M(1,2,2011,u)}if(this.l==Nt){if("text/vtt"!=r)throw new M(1,2,2013,r);if(s&&(n="forced"),(r=document.createElement("track")).src=kf(this.W,e),r.label=o||"",r.kind=n,r.srclang=t,this.g.getAttribute("crossorigin")||this.g.setAttribute("crossorigin","anonymous"),this.g.appendChild(r),e=this.ib().find(function(a){return a.language==t&&a.label==(o||"")&&a.kind==n}))return St(this),e;throw new M(1,2,2012)}if((u=this.i.presentationTimeline.getDuration())==1/0)throw new M(1,4,4033);if(!pi(Qt((e={id:this.Kd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ro(0,u,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:o||null,type:Me,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}).mimeType,e.codecs)))throw new M(2,2,2014,r);return this.i.textStreams.push(e),St(this),gi(e)},g.Ne=function(e,t,n,r,i,o,s){s=void 0!==s&&s;var a,l,c,p,d,x,E,I,u=this;return D(function(C){switch(C.g){case 1:if(u.l!=It&&u.l!=Nt)throw new M(1,7,7004);if(r){C.B(2);break}return w(C,Ff(u,e),3);case 3:r=C.h;case 2:if(a=[],u.D)try{a=u.D.getServerSideCuePoints()}catch{}if(u.l!=Nt){C.B(4);break}return s&&(n="forced"),w(C,Vf(u,e,t,n,r,o||"",a),5);case 5:if(l=u.ib(),c=l.find(function(R){return R.language==t&&R.label==(o||"")&&R.kind==n}))return St(u),C.return(c);throw new M(1,2,2012);case 4:if(p=pt,(d=u.i.presentationTimeline.getDuration())==1/0)throw new M(1,4,4033);if(!a.length){C.B(6);break}return w(C,Hf(u,e,u.F,u.h.streaming.retryParameters),7);case 7:x=Kf(u,C.h,r,a),E=new Blob([x],{type:"text/vtt"}),e=Au(E),r="text/vtt";case 6:if(I={id:u.Kd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ro(0,d,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:o||null,type:p.Z,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},!pi(Qt(I.mimeType,I.codecs)))throw new M(2,2,2014,r);return u.i.textStreams.push(I),St(u),C.return(gi(I))}})},g.Me=function(e,t,n){var i,o,s,u,r=this;return D(function(a){switch(a.g){case 1:if(r.l!=It&&r.l!=Nt)throw new M(1,7,7004);if(n){a.B(2);break}return w(a,Ff(r,e),3);case 3:n=a.h;case 2:if(i=[],r.D)try{i=r.D.getServerSideCuePoints()}catch{}return w(a,Vf(r,e,t,"chapters",n,"",i),4);case 4:if(o=a.h,s=r.ne(),!(u=s.find(function(l){return l.language==t}))){a.B(5);break}return w(a,new Promise(function(l,c){r.o.ka(o,"load",l),r.o.ka(o,"error",function(){c(new M(1,2,2015))})}),6);case 6:return a.return(u);case 5:throw new M(1,2,2012)}})},g.Xd=function(e,t){this.Hd.width=e,this.Hd.height=t},g.Rd=function(e){if(this.l==It){var t=this.j;if(e=void 0===e?.1:e,t.i.g)t=!1;else if(t.s)t=!1;else{for(var n=m(t.j.values()),r=n.next();!r.done;r=n.next())!(r=r.value).hc||r.ta||r.La||(r.hc=!1,Dt(t,r,e));t=!0}}else t=!1;return t},g.hf=function(){return _e("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.jf=function(){return this.Lc},g.Fe=function(e){this.Cc=e},$("shaka.Player",_),_.prototype.setVideoContainer=_.prototype.Fe,_.prototype.getManifestParserFactory=_.prototype.jf,_.prototype.getManifest=_.prototype.hf,_.prototype.retryStreaming=_.prototype.Rd,_.prototype.setMaxHardwareResolution=_.prototype.Xd,_.prototype.addChaptersTrack=_.prototype.Me,_.prototype.addTextTrackAsync=_.prototype.Ne,_.prototype.addTextTrack=_.prototype.addTextTrack,_.prototype.getStats=_.prototype.getStats,_.prototype.getBufferedInfo=_.prototype.Ya,_.prototype.getPresentationStartTimeAsDate=_.prototype.oe,_.prototype.getPlayheadTimeAsDate=_.prototype.pf,_.prototype.setTextTrackVisibility=_.prototype.$f,_.prototype.getChapters=_.prototype.bf,_.prototype.getChaptersTracks=_.prototype.ne,_.prototype.isTextTrackVisible=_.prototype.ud,_.prototype.selectVariantsByLabel=_.prototype.Uf,_.prototype.selectTextLanguage=_.prototype.Ud,_.prototype.selectAudioLanguage=_.prototype.Td,_.prototype.getTextLanguages=_.prototype.tf,_.prototype.getAudioLanguages=_.prototype.Ze,_.prototype.getTextLanguagesAndRoles=_.prototype.uf,_.prototype.getAudioLanguagesAndRoles=_.prototype.$e,_.prototype.selectVariantTrack=_.prototype.Be,_.prototype.selectTextTrack=_.prototype.Ae,_.prototype.getThumbnails=_.prototype.vf,_.prototype.getImageTracks=_.prototype.ef,_.prototype.getTextTracks=_.prototype.ib,_.prototype.getVariantTracks=_.prototype.jb,_.prototype.cancelTrickPlay=_.prototype.Re,_.prototype.trickPlay=_.prototype.bg,_.prototype.getPlaybackRate=_.prototype.Hc,_.prototype.isBuffering=_.prototype.sd,_.prototype.getKeyStatuses=_.prototype.Gc,_.prototype.getExpiration=_.prototype.cc,_.prototype.drmInfo=_.prototype.drmInfo,_.prototype.keySystem=_.prototype.keySystem,_.prototype.goToLive=_.prototype.zf,_.prototype.seekRange=_.prototype.mc,_.prototype.isAudioOnly=_.prototype.Bf,_.prototype.isInProgress=_.prototype.mb,_.prototype.isLive=_.prototype.U,_.prototype.getAdManager=_.prototype.me,_.prototype.getAssetUri=_.prototype.rd,_.prototype.getNetworkingEngine=_.prototype.dc,_.prototype.getMediaElement=_.prototype.lf,_.prototype.getLoadMode=_.prototype.gf,_.prototype.resetConfiguration=_.prototype.Tf,_.prototype.getBufferFullness=_.prototype.af,_.prototype.getConfiguration=_.prototype.getConfiguration,_.prototype.configure=_.prototype.configure,_.prototype.load=_.prototype.load,_.prototype.updateStartTime=_.prototype.gg,_.prototype.unload=_.prototype.ce,_.prototype.detach=_.prototype.detach,_.prototype.attach=_.prototype.Wb,_.probeSupport=function(e){var t,n,i,o,s;return e=void 0===e||e,D(function(u){if(1==u.g)return t={},e?w(u,function qm(){var e,t,i,o,s,u;return D(function(a){return 1==a.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),i=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],o=new Map,s=function(l){var c,p,d;return D(function(v){switch(v.g){case 1:return ie(v,2),w(v,navigator.requestMediaKeySystemAccess(l,i),4);case 4:return d=!!(p=(c=v.h).getConfiguration().sessionTypes)&&p.includes("persistent-license"),nt("Tizen 3")&&(d=!1),o.set(l,{persistentState:d}),w(v,c.createMediaKeys(),5);case 5:ve(v,0);break;case 2:ne(v),o.set(l,null),W(v)}})},u=e.map(function(l){return s(l)}),w(a,Promise.all(u),2)):a.return(uu(o))})}(),3):u.B(2);2!=u.g&&(t=u.h);var a={};if(Ot()){for(var l in kt)a[l]=!0;for(var c in Qn)a[c]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var p=(c=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!p.done;p=c.next())a[p=p.value]=Ot()?!!kt[p]:vr(p);for(var d in l)a[d]=Ot()?!!Qn[d]:vr(l[d]);for(n=a,a={},l=(d=m('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!l.done;l=d.next())a[l=l.value]=Ot()?!!pi(l)||MediaSource.isTypeSupported(l)||El(l):vr(l),a[c=l.split(";")[0]]=a[c]||a[l];for(s in i={manifest:n,media:a,drm:t},o=ra)i[s]=o[s]();return u.return(i)})},_.isBrowserSupported=function(){if(O.Promise||_e("A Promise implementation or polyfill is required"),!(O.Promise&&O.Uint8Array&&Array.prototype.forEach)||nt("Trident/"))return!1;var e=yl();return!(e&&12>e||!(O.MediaKeys&&O.navigator&&O.navigator.requestMediaKeySystemAccess&&O.MediaKeySystemAccess&&O.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Ot()||vr("application/x-mpegurl"))},_.setAdManagerFactory=function(e){Xo=e},_.registerSupportPlugin=function(e,t){ra[e]=t},_.prototype.destroy=_.prototype.destroy;var ih="abrstatuschanged",oh="adaptation",sh="buffering",uh="downloadfailed",ah="downloadheadersreceived",Qu="drmsessionupdate",lh="emsg",Ko="error",ch="expirationupdated",fh="loaded",hh="loading",ph="manifestparsed",dh="mediaqualitychanged",gh="metadata",mh="onstatechange",vh="onstateidle",yh="ratechange",Zu="streaming",wh="textchanged",Th="texttrackvisibility",xh="timelineregionadded",ea="timelineregionenter",ta="timelineregionexit",Eh="trackschanged",Sh="unloading",Ih="variantchanged",Go={ig:ih,jg:oh,kg:sh,lg:uh,mg:ah,ng:Qu,pg:lh,Error:Ko,qg:ch,rg:"largegap",sg:fh,tg:hh,ug:ph,vg:dh,Metadata:gh,xg:mh,yg:vh,zg:yh,Bg:"sessiondata",Cg:Zu,Dg:wh,Eg:Th,Fg:xh,Gg:ea,Hg:ta,Ig:Eh,Jg:Sh,Kg:Ih},Vt=0,na=1,It=2,Nt=3;_.LoadMode={DESTROYED:Vt,NOT_LOADED:na,MEDIA_SOURCE:It,SRC_EQUALS:Nt},_.version="v3.3.19";var Ah=["3","3"];dl=new function(e){this.g=e,this.i=Kg,this.h=Gg}(new Vs(Number(Ah[0]),Number(Ah[1])));var Ch=["output-restricted","internal-error"],ra={},Xo=null,ia={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Mh={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Rh(){this.h=[],this.j=this.i=this.g=0}function ae(e,t){var n=this;this.h=e,this.g=t,this.i=!1,this.l=this.g.getVolume(),this.j=new Ce,this.j.A(this.g,google.ima.AdEvent.Type.PAUSED,function(){n.i=!0}),this.j.A(this.g,google.ima.AdEvent.Type.RESUMED,function(){n.i=!1})}function oa(e,t,n,r){var i=this;this.o=e,this.i=t,this.s=null,this.u=NaN,this.l=r,this.j=null,this.h=new Ce,google.ima.settings.setLocale(n),(e=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(e),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v3.3.19"),this.g=null,this.h.ka(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(o){!function Wy(e,t){e.l(new ee("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.u))),e.g=t.getAdsManager(e.i),e.l(new ee("ima-ad-manager-loaded",(new Map).set("imaAdManager",e.g)));var n=e.g.getCuePoints();if(n.length){for(var r=[],i=(n=m(n)).next();!i.done;i=n.next())r.push({start:i.value,end:null});e.l(new ee("ad-cue-points-changed",(new Map).set("cuepoints",r)))}!function qy(e){function t(n,r){var i=(new Map).set("originalEvent",n);e.l(new ee(r,i))}e.h.A(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){kh(e,n)}),e.h.A(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Dh(e,n)}),e.h.A(e.g,google.ima.AdEvent.Type.STARTED,function(n){Dh(e,n)}),e.h.A(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.A(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.A(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.A(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.A(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Wo(e,n)}),e.h.A(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Wo(e,n)}),e.h.A(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.A(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.A(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.A(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j.i=!0,t(n,"ad-paused")}),e.h.A(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j.i=!1,t(n,"ad-resumed")}),e.h.A(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){t(n,"ad-skip-state-changed")}),e.h.A(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.A(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.A(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.A(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.A(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.A(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.A(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.A(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.A(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.A(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.A(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.A(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.A(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.A(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in O&&(e.s=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.s.observe(e.i)),e.h.ka(e.i,"play",function(){e.g.start()})}catch{Wo(e,null)}}(i,o)}),this.h.A(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){kh(i,o)}),this.h.A(this.i,"ended",function(){i.m.contentComplete()})}function kh(e,t){t.getError(),Wo(e,null),e.l(new ee("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Dh(e,t){var n=t.getAd();e.j=new ae(n,e.g),n=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new ee("ad-started",n)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))}function Wo(e,t){e.l(new ee("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.ended||e.i.play())}function le(e,t){this.i=e,this.h=null,this.g=t}function qo(e,t,n,r){var i=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.F=!1,this.u=this.m=this.o=null,this.C="",this.D=[],this.h=new Ce,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new ee("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){!function $y(e,t){e.i(new ee("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G)));var n=t.getStreamData().url;e.j.resolve(n),e.j=null,e.F||e.h.A(e.l,"seeked",function(){var r=e.l.currentTime;if(0!=r){e.g.streamTimeForContentTime(r);var i=e.g.previousCuePointForStreamTime(r);i&&!i.played&&(e.o=r,e.l.currentTime=i.start)}})}(i,o)}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.C.length?i.j.resolve(i.C):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),i.m=new le(o,i.l),i.u&&(i.m.h=i.u),i.i(new ee("ad-started",(new Map).set("ad",i.m))),i.s.setAttribute("ad-active","true")}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.s.removeAttribute("ad-active"),i.o&&i.o>i.l.currentTime&&(i.l.currentTime=i.o,i.o=null)}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){i.u=o.getStreamData().adProgressData,i.m&&(i.m.h=i.u)}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.i(new ee("ad-first-quartile"))}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.i(new ee("ad-midpoint"))}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.i(new ee("ad-third-quartile"))}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.i(new ee("ad-complete")),i.i(new ee("ad-stopped")),i.s.removeAttribute("ad-active"),i.m=null}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.i(new ee("ad-skipped")),i.i(new ee("ad-stopped"))}),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[];for(var u=(s=m(s.cuepoints)).next();!u.done;u=s.next())o.push({start:(u=u.value).start,end:u.end});i.D=o,i.i(new ee("ad-cue-points-changed",(new Map).set("cuepoints",o)))})}function z(){ge.call(this),this.g=this.i=null,this.h=new Rh,this.j=navigator.language}function Nh(e){return JSON.stringify(e,function(t,n){if("function"!=typeof n){if(n instanceof Event||n instanceof ee){var r={};for(o in n){var i=n[o];i&&"object"==typeof i?"detail"==o&&(r[o]=i):o in Event||(r[o]=i)}return r}if(n instanceof Error){var o=new Set(["name","message","stack"]);for(r in n)o.add(r);for(r=(i=m(Object.getOwnPropertyNames(n))).next();!r.done;r=i.next())o.add(r.value);for(i={},r=(o=m(o)).next();!r.done;r=o.next())i[r=r.value]=n[r];o={__type__:"Error",contents:i}}else if(n instanceof TimeRanges)for(o={__type__:"TimeRanges",length:n.length,start:[],end:[]},i=(r=m(kn(n))).next();!i.done;i=r.next()){var s=(i=i.value).end;o.start.push(i.start),o.end.push(s)}else o=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:"number"==typeof n?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return o}})}function sa(e){return JSON.parse(e,function(t,n){if("NaN"==n)var r=NaN;else if("-Infinity"==n)r=-1/0;else if("Infinity"==n)r=1/0;else if(n&&"object"==typeof n&&"TimeRanges"==n.__type__)r=function Yy(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(n);else if(n&&"object"==typeof n&&"Uint8Array"==n.__type__)r=new Uint8Array(n.entries);else if(n&&"object"==typeof n&&"Error"==n.__type__){r=n.contents;var o,i=Error(r.message);for(o in r)i[o]=r[o];r=i}else r=n;return r})}(g=ae.prototype).getDuration=function(){return this.h.getDuration()},g.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.g.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.g.getAdSkippableState()},g.skip=function(){return this.g.skip()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.resume()},g.getVolume=function(){return this.g.getVolume()},g.setVolume=function(e){return this.g.setVolume(e)},g.isMuted=function(){return 0==this.g.getVolume()},g.isLinear=function(){return this.h.isLinear()},g.resize=function(e,t){this.g.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},g.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},g.release=function(){this.g=this.h=null},$("shaka.ads.ClientSideAd",ae),ae.prototype.release=ae.prototype.release,ae.prototype.getPositionInSequence=ae.prototype.getPositionInSequence,ae.prototype.getSequenceLength=ae.prototype.getSequenceLength,ae.prototype.setMuted=ae.prototype.setMuted,ae.prototype.resize=ae.prototype.resize,ae.prototype.isLinear=ae.prototype.isLinear,ae.prototype.isMuted=ae.prototype.isMuted,ae.prototype.setVolume=ae.prototype.setVolume,ae.prototype.getVolume=ae.prototype.getVolume,ae.prototype.play=ae.prototype.play,ae.prototype.pause=ae.prototype.pause,ae.prototype.skip=ae.prototype.skip,ae.prototype.canSkipNow=ae.prototype.canSkipNow,ae.prototype.getTimeUntilSkippable=ae.prototype.getTimeUntilSkippable,ae.prototype.isSkippable=ae.prototype.isSkippable,ae.prototype.isPaused=ae.prototype.isPaused,ae.prototype.getRemainingTime=ae.prototype.getRemainingTime,ae.prototype.getMinSuggestedDuration=ae.prototype.getMinSuggestedDuration,ae.prototype.getDuration=ae.prototype.getDuration,oa.prototype.stop=function(){this.g&&this.g.stop(),this.o&&bo(this.o)},oa.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(g=le.prototype).getDuration=function(){return this.h?this.h.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return this.i.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},g.release=function(){this.g=this.h=this.i=null},$("shaka.ads.ServerSideAd",le),le.prototype.release=le.prototype.release,le.prototype.getPositionInSequence=le.prototype.getPositionInSequence,le.prototype.getSequenceLength=le.prototype.getSequenceLength,le.prototype.setMuted=le.prototype.setMuted,le.prototype.resize=le.prototype.resize,le.prototype.isLinear=le.prototype.isLinear,le.prototype.isMuted=le.prototype.isMuted,le.prototype.setVolume=le.prototype.setVolume,le.prototype.getVolume=le.prototype.getVolume,le.prototype.play=le.prototype.play,le.prototype.pause=le.prototype.pause,le.prototype.skip=le.prototype.skip,le.prototype.canSkipNow=le.prototype.canSkipNow,le.prototype.getTimeUntilSkippable=le.prototype.getTimeUntilSkippable,le.prototype.isSkippable=le.prototype.isSkippable,le.prototype.isPaused=le.prototype.isPaused,le.prototype.getRemainingTime=le.prototype.getRemainingTime,le.prototype.getMinSuggestedDuration=le.prototype.getMinSuggestedDuration,le.prototype.getDuration=le.prototype.getDuration,qo.prototype.stop=function(){this.C="",this.o=null,this.D=[]},qo.prototype.release=function(){this.stop(),this.h&&this.h.release()},qo.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},de(z,ge),(g=z.prototype).setLocale=function(e){this.j=e},g.initClientSide=function(e,t){var n=this;if(!O.google||!google.ima||!google.ima.AdsLoader)throw new M(2,10,1e4);this.i&&this.i.release(),this.i=new oa(e,t,this.j,function(r){if(r&&r.type)switch(r.type){case"ads-loaded":n.h.h.push(r.loadTime);break;case"ad-started":n.h.g++;break;case"ad-complete":n.h.i++;break;case"ad-skipped":n.h.j++}n.dispatchEvent(r)})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),ge.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new ee("ad-stopped")),this.h=new Rh},g.requestClientSideAds=function(e){if(!this.i)throw new M(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},g.initServerSide=function(e,t){var n=this;if(!O.google||!google.ima||!google.ima.dai)throw new M(2,10,10002);this.g&&this.g.release(),this.g=new qo(e,t,this.j,function(r){if(r&&r.type)switch(r.type){case"ads-loaded":n.h.h.push(r.loadTime);break;case"ad-started":n.h.g++;break;case"ad-complete":n.h.i++;break;case"ad-skipped":n.h.j++}n.dispatchEvent(r)})},g.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new M(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&_e('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v3.3.19";var r=t;return(n=this.g).j?n=Promise.reject(new M(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new De,n.g.requestStream(e),n.C=r||"",n.G=Date.now()/1e3,n=n.j),n},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new M(1,10,10003);(e.mpt||e.mpv)&&_e('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.3.19",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){if(!this.g)throw new M(1,10,10003);return this.g.D},g.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},$("shaka.ads.AdManager",z),z.prototype.onCueMetadataChange=z.prototype.onCueMetadataChange,z.prototype.onHlsTimedMetadata=z.prototype.onHlsTimedMetadata,z.prototype.onDashTimedMetadata=z.prototype.onDashTimedMetadata,z.prototype.getStats=z.prototype.getStats,z.prototype.getServerSideCuePoints=z.prototype.getServerSideCuePoints,z.prototype.replaceServerSideAdTagParameters=z.prototype.replaceServerSideAdTagParameters,z.prototype.requestServerSideStream=z.prototype.requestServerSideStream,z.prototype.initServerSide=z.prototype.initServerSide,z.prototype.requestClientSideAds=z.prototype.requestClientSideAds,z.prototype.onAssetUnload=z.prototype.onAssetUnload,z.prototype.release=z.prototype.release,z.prototype.initClientSide=z.prototype.initClientSide,z.prototype.setLocale=z.prototype.setLocale,z.ADS_LOADED="ads-loaded",z.AD_STARTED="ad-started",z.AD_FIRST_QUARTILE="ad-first-quartile",z.AD_MIDPOINT="ad-midpoint",z.AD_THIRD_QUARTILE="ad-third-quartile",z.AD_COMPLETE="ad-complete",z.AD_STOPPED="ad-stopped",z.AD_SKIPPED="ad-skipped",z.AD_VOLUME_CHANGED="ad-volume-changed",z.AD_MUTED="ad-muted",z.AD_PAUSED="ad-paused",z.AD_RESUMED="ad-resumed",z.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",z.CUEPOINTS_CHANGED="ad-cue-points-changed",z.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",z.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",z.AD_CLICKED="ad-clicked",z.AD_PROGRESS="ad-progress",z.AD_BUFFERING="ad-buffering",z.AD_IMPRESSION="ad-impression",z.AD_DURATION_CHANGED="ad-duration-changed",z.AD_CLOSED="ad-closed",z.AD_LOADED="ad-loaded",z.ALL_ADS_COMPLETED="all-ads-completed",z.AD_LINEAR_CHANGED="ad-linear-changed",z.AD_METADATA="ad-metadata",z.AD_RECOVERABLE_ERROR="ad-recoverable-error",z.AD_BREAK_READY="ad-break-ready",z.AD_INTERACTION="ad-interaction",Xo=function(){return new z};var Lh="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),zy="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ua=["loop","playbackRate"],Jy=["pause","play"],$o={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Yo={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},aa={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},bh=[["getConfiguration","configure"]],Ph=[["isTextTrackVisible","setTextTrackVisibility"]],Qy="addChaptersTrack addTextTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Zy=["attach","detach","load","unload"];function la(e,t,n,r,i,o){var s=this;this.G=e,this.j=new ue(t),this.V=n,this.u=!1,this.s=r,this.F=i,this.L=o,this.h=this.m=!1,this.N="",this.o=null,this.C=function(){return fa(s)},this.D=function(u,a){var l=sa(a);switch(l.type){case"event":var c=l.targetName;l=Yl(l.event),s.s(c,l);break;case"update":for(var p in c=l.update)for(var d in l=s.g[p]||{},c[p])l[d]=c[p][d];s.u&&(s.V(),s.u=!1);break;case"asyncComplete":if(p=l.id,l=l.error,d=s.i[p],delete s.i[p],d)if(l){for(c in p=new M(l.severity,l.category,l.code),l)p[c]=l[c];d.reject(p)}else d.resolve()}},this.g={video:{},player:{}},this.I=0,this.i={},this.l=null,ji.add(this)}function ca(e,t,n){Lt=n,n.addUpdateListener(e.C),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),fa(e),_i(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function _h(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new M(2,8,n,t))}function jh(e,t){var n=e.L();e.l=new De,e.u=!0,ca(e,n,t)}function Uh(e){var t=Lt;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function fa(e){var t=!!Lt&&"connected"==Lt.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};ha(e)}e.h=t,e.N=t?Lt.receiver.friendlyName:"",e.j.Nb()}function ha(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new M(1,7,7e3))}}function _i(e,t){var n=Nh(t),r=Lt;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},_s)}catch(i){throw n=new M(2,8,8005,i),r=new ee("error",(new Map).set("detail",n)),e.s("player",r),e.Bb(),n}}(g=la.prototype).destroy=function(){return ji.delete(this),ha(this),Lt&&Uh(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.C=this.l=this.i=this.g=this.o=null,Promise.resolve()},g.ua=function(){return this.h},g.Pd=function(){return this.N},g.init=function(){if(this.G.length)if(O.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Nb();var e=new chrome.cast.SessionRequest(this.G);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(ji),r=n.next();!r.done;r=n.next())jh(r.value,t)},function(t){for(var n=m(ji),r=n.next();!r.done;r=n.next())zo="available"==t,(r=r.value).j.Nb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),zo&&this.j.S(t0),(e=Lt)&&e.status!=chrome.cast.SessionStatus.STOPPED?jh(this,e):Lt=null}else O.__onGCastApiAvailable!==Oh&&(Jo=O.__onGCastApiAvailable||null,O.__onGCastApiAvailable=Oh)},g.Vd=function(e){this.o=e,this.h&&_i(this,{type:"appData",appData:this.o})},g.cast=function(e){var t=this;return D(function(n){if(!t.m)throw new M(1,8,8e3);if(!zo)throw new M(1,8,8001);if(t.h)throw new M(1,8,8002);return t.l=new De,chrome.cast.requestSession(function(r){return ca(t,e,r)},function(r){return _h(t,r)}),w(n,t.l,0)})},g.Bb=function(){if(this.h){if(ha(this),Lt){Uh(this);try{Lt.stop(function(){},function(){})}catch{}Lt=null}fa(this)}},g.get=function(e,t){var n=this;if("video"==e){if(Jy.includes(t))return function(){return n.we.apply(n,[e,t].concat(K(Ct.apply(0,arguments))))}}else if("player"==e){if(aa[t]&&!this.get("player","isLive")())return function(){};if(Qy.includes(t))return function(){return n.we.apply(n,[e,t].concat(K(Ct.apply(0,arguments))))};if(Zy.includes(t))return function(){return n.Qf.apply(n,[e,t].concat(K(Ct.apply(0,arguments))))};if($o[t]||Yo[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,_i(this,{type:"set",targetName:e,property:t,value:n})},g.we=function(e,t){_i(this,{type:"call",targetName:e,methodName:t,args:Ct.apply(2,arguments)})},g.Qf=function(e,t){var n=Ct.apply(2,arguments),r=new De,i=this.I.toString();this.I++,this.i[i]=r;try{_i(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(o){r.reject(o)}return r};var t0=.02,zo=!1,Lt=null,Jo=null,ji=new Set;function Oh(e){if(Jo?O.__onGCastApiAvailable=Jo:delete O.__onGCastApiAvailable,Jo=null,e)for(var t=m(ji),n=t.next();!n.done;n=t.next())n.value.init();"function"==typeof O.__onGCastApiAvailable&&O.__onGCastApiAvailable(e)}function He(e,t,n){ge.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.u=new Map,this.g=new la(n,function(){return Fh(r)},function(){return Vh(r)},function(i,o){return Kh(r,i,o)},function(){return Hh(r)},function(){return pa(r)}),function n0(e){e.g.init(),e.m=new Ce;for(var t=m(Lh),n=t.next();!n.done;n=t.next())e.m.A(e.i,n.value,function(o){e.g.ua()||(o=Yl(o),e.j.dispatchEvent(o))});for(var r in Go)e.m.A(e.h,Go[r],function(o){e.g.ua()||e.o.dispatchEvent(o)});for(var i in e.l={},t={},e.i)t.Pb=i,Object.defineProperty(e.l,t.Pb,{configurable:!1,enumerable:!0,get:function(o){return function(){return i0(e,o.Pb)}}(t),set:function(o){return function(s){var u=o.Pb;e.g.ua()?e.g.set("video",u,s):e.i[u]=s}}(t)}),t={Pb:t.Pb};e.s={},Bh(e,function(o){Object.defineProperty(e.s,o,{configurable:!1,enumerable:!0,get:function(){return function o0(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(n,r,i){return e.o.addEventListener(n,r,i)};if("removeEventListener"==t)return function(n,r,i){return e.o.removeEventListener(n,r,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.dc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.me()};if("setVideoContainer"==t)return function(n){return e.h.Fe(n)};if(e.g.ua()){if("getManifest"==t||"drmInfo"==t)return function(){return _e(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return _e(t+"() does not work while casting!"),Promise.resolve()}}return e.g.ua()&&0==Object.keys(e.g.g.video).length&&($o[t]||Yo[t])||!e.g.ua()?e.h[t].bind(e.h):e.g.get("player",t)}(e,o)}})}),function r0(e){var t=new Map;Bh(e,function(n,r){if(t.has(r)){var i=t.get(r);n.length<i.length?e.u.set(n,i):e.u.set(i,n)}else t.set(r,n)})}(e),e.j=new ge,e.j.Ec=e.l,e.o=new ge,e.o.Ec=e.s}(this)}function Bh(e,t){function n(l){return"constructor"!=l&&"function"==typeof r[l]&&!i.has(l)}var r=e.h,i=new Set;for(o in r)n(o)&&(i.add(o),t(o,r[o]));for(var o=Object.getPrototypeOf(r),s=Object.getPrototypeOf({});o&&o!=s;){for(var u=m(Object.getOwnPropertyNames(o)),a=u.next();!a.done;a=u.next())n(a=a.value)&&(i.add(a),t(a,r[a]));o=Object.getPrototypeOf(o)}}function pa(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null};e.i.pause();for(var n=m(ua),r=n.next();!r.done;r=n.next())t.video[r=r.value]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=m(bh)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(r=(n=m(Ph)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function Fh(e){var t=new ee("caststatuschanged");e.dispatchEvent(t)}function Vh(e){var t=new ee(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Hh(e){for(var t=m(bh),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;r=null,n||(r=e.g.get("video","currentTime")),i&&(e.i.autoplay=!1,t=e.h.load(i,r));var s={};for(r=(n=m(ua)).next();!r.done;r=n.next())s[r=r.value]=e.g.get("video",r);t.then(function(){if(e.i){for(var u=m(ua),a=u.next();!a.done;a=u.next())e.i[a=a.value]=s[a];for(a=(u=m(Ph)).next();!a.done;a=u.next()){var l=a.value;a=l[1],l=e.g.get("player",l[0])(),e.h[a](l)}e.i.autoplay=o,i&&e.i.play()}},function(u){u=(new Map).set("detail",u),u=new ee(Ko,u),e.h.dispatchEvent(u)})}function i0(e,t){if("addEventListener"==t)return function(r,i,o){return e.j.addEventListener(r,i,o)};if("removeEventListener"==t)return function(r,i,o){return e.j.removeEventListener(r,i,o)};if(e.g.ua()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.ua()?e.g.get("video",t):("function"==typeof(n=e.i[t])&&(n=n.bind(e.i)),n)}function Kh(e,t,n){e.g.ua()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function ot(e,t,n,r){ge.call(this);var i=this;this.g=e,this.h=t,this.j=new Ce,this.I={video:e,player:t},this.D=n||function(){},this.L=r||function(o){return o},this.i=null,this.F=!1,this.o=!0,this.m=0,this.C=!1,this.u=!0,this.s=this.l=null,this.G=new ue(function(){da(i)}),function s0(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Gh(e)},t.onSenderDisconnected=function(){return Gh(e)},t.onSystemVolumeChanged=function(){var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&gn(e,{type:"update",update:{video:{volume:i.level,muted:i.muted}}},e.l),gn(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(i){return function l0(e,t){var n=sa(t.data);switch(n.type){case"PLAY":e.g.play(),mn(e);break;case"PAUSE":e.g.pause(),mn(e);break;case"SEEK":var r=n.currentTime,i=n.resumeState;null!=r&&(e.g.currentTime=Number(r)),i&&"PLAYBACK_START"==i?(e.g.play(),mn(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),mn(e));break;case"STOP":e.h.ce().then(function(){e.h&&mn(e)});break;case"GET_STATUS":ga(e,Number(n.requestId));break;case"VOLUME":r=(i=n.volume).level,i=i.muted;var o=e.g.volume,s=e.g.muted;null!=r&&(e.g.volume=Number(r)),null!=i&&(e.g.muted=i),o==e.g.volume&&s==e.g.muted||mn(e);break;case"LOAD":e.m=0,e.C=!1,e.u=!1,i=n.currentTime,o=e.L((r=n.media).contentId),s=n.autoplay||!0,e.D(r.customData),s&&(e.g.autoplay=!0),e.h.load(o,i).then(function(){e.h&&ga(e)}).catch(function(u){var a="LOAD_FAILED";7==u.category&&7e3==u.code&&(a="LOAD_CANCELLED"),gn(e,{requestId:Number(n.requestId),type:a},e.s)});break;default:gn(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,i)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(i){return function a0(e,t){var n=sa(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.u=!0,function u0(e,t,n){var r,o,s,u,a,l,c,d;D(function(x){switch(x.g){case 1:for(r in t.player)e.h[r](t.player[r]);return e.D(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ie(x,5),w(x,e.h.load(t.manifest,t.startTime),7)):w(x,Promise.resolve(),3);case 7:ve(x,3);break;case 5:return s=ne(x),u=Ko,a=(new Map).set("detail",s),l=new ee(u,a),e.h&&e.h.dispatchEvent(l),x.return();case 3:if(!e.h)return x.return();for(c in t.video)e.g[c]=t.video[c];for(d in t.playerAfterLoad)e.h[d](t.playerAfterLoad[d]);e.g.autoplay=o,t.manifest&&(e.g.play(),mn(e)),W(x)}})}(e,n.initState,n.appData),da(e);break;case"appData":e.D(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){var o=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){o.setSystemVolumeLevel(n);break}if("muted"==i){o.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":(r=e.I[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":i=n.methodName,"player"==(r=n.targetName)&&"load"==i&&(e.m=0,e.C=!1);var s=n.id,u=t.senderId;n=(o=e.I[r])[i].apply(o,n.args),"player"==r&&"load"==i&&(n=n.then(function(){e.u=!0})),n.then(function(){return qh(e,u,s,null)},function(a){return qh(e,u,s,a)})}}(e,i)},t.start();for(var n=(t=m(Lh)).next();!n.done;n=t.next())e.j.A(e.g,n.value,function(i){return Xh(e,"video",i)});for(var r in Go)e.j.A(e.h,Go[r],function(i){return Xh(e,"player",i)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Xd(3840,2160):e.h.Xd(1920,1080),e.j.A(e.g,"loadeddata",function(){e.C=!0}),e.j.A(e.h,"loading",function(){e.o=!1,Fr(e)}),e.j.A(e.g,"playing",function(){e.o=!1,Fr(e)}),e.j.A(e.g,"pause",function(){Fr(e)}),e.j.A(e.h,"unloading",function(){e.o=!0,Fr(e)}),e.j.A(e.g,"ended",function(){new ue(function(){e.g&&e.g.ended&&(e.o=!0,Fr(e))}).S(f0)})}(this)}function Gh(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Fr(e)}function Fr(e){var t;D(function(n){return 1==n.g?w(n,Promise.resolve(),2):e.h?(t=new ee("caststatuschanged"),e.dispatchEvent(t),Wh(e)||mn(e),void W(n)):n.return()})}function Xh(e,t,n){e.h&&(da(e),gn(e,{type:"event",targetName:t,event:n},e.l))}function da(e){e.G.S(c0);for(var t={video:{},player:{}},n=m(zy),r=n.next();!r.done;r=n.next())t.video[r=r.value]=e.g[r];if(e.h.U())for(var i in aa)e.m%aa[i]==0&&(t.player[i]=e.h[i]());for(var o in $o)e.m%$o[o]==0&&(t.player[o]=e.h[o]());for(var s in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),gn(e,{type:"update",update:t},e.l),Yo)e.m%Yo[s]==0&&((t={player:{}}).player[s]=e.h[s](),gn(e,{type:"update",update:t},e.l));e.C&&(e.m+=1),Wh(e)}function Wh(e){return!(!e.u||!e.g.duration&&!e.h.U()||(ga(e),e.u=!1,0))}function ga(e,t){var n={contentId:e.h.rd(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),mn(e,void 0===t?0:t,n)}function qh(e,t,n,r){e.h&&gn(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function gn(e,t,n,r){e.F&&(e=Nh(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function mn(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?h0:e.h.sd()?d0:e.g.paused?g0:p0,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),gn(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}de(He,ge),(g=He.prototype).destroy=function(e){return e&&this.g.Bb(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,ge.prototype.release.call(this),Promise.all(e)},g.yf=function(){return this.l},g.nf=function(){return this.s},g.Pe=function(){return this.g.m&&zo},g.ua=function(){return this.g.ua()},g.Pd=function(){return this.g.Pd()},g.cast=function(){var t,e=this;return D(function(n){return 1==n.g?(t=pa(e),w(n,e.g.cast(t),2)):e.h?w(n,e.h.ce(),0):n.return()})},g.Vd=function(e){this.g.Vd(e)},g.ag=function(){!function e0(e){if(e.h){var t=e.L();chrome.cast.requestSession(function(n){return ca(e,t,n)},function(n){return _h(e,n)})}}(this.g)},g.Bb=function(){this.g.Bb()},g.Se=function(e){var t=this;return D(function(n){if(1==n.g)return e==t.C?n.return():(t.C=e,t.g.Bb(),w(n,t.g.destroy(),2));t.g=null,t.g=new la(e,function(){return Fh(t)},function(){return Vh(t)},function(r,i){return Kh(t,r,i)},function(){return Hh(t)},function(){return pa(t)}),t.g.init(),W(n)})},$("shaka.cast.CastProxy",He),He.prototype.changeReceiverId=He.prototype.Se,He.prototype.forceDisconnect=He.prototype.Bb,He.prototype.suggestDisconnect=He.prototype.ag,He.prototype.setAppData=He.prototype.Vd,He.prototype.cast=He.prototype.cast,He.prototype.receiverName=He.prototype.Pd,He.prototype.isCasting=He.prototype.ua,He.prototype.canCast=He.prototype.Pe,He.prototype.getPlayer=He.prototype.nf,He.prototype.getVideo=He.prototype.yf,He.prototype.destroy=He.prototype.destroy,de(ot,ge),(g=ot.prototype).isConnected=function(){return this.F},g.Cf=function(){return this.o},g.Xf=function(e){this.i=e},g.Ve=function(){this.i=null},g.Yf=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.Wf=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.Vf=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var t,e=this;return D(function(r){if(1==r.g)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.I=null,e.D=null,e.F=!1,e.o=!0,e.l=null,e.s=null,ge.prototype.release.call(e),w(r,Promise.all(t),2);cast.receiver.CastReceiverManager.getInstance().stop(),W(r)})},$("shaka.cast.CastReceiver",ot),ot.prototype.destroy=ot.prototype.destroy,ot.prototype.setContentArtist=ot.prototype.Vf,ot.prototype.setContentImage=ot.prototype.Wf,ot.prototype.setContentTitle=ot.prototype.Yf,ot.prototype.clearContentMetadata=ot.prototype.Ve,ot.prototype.setContentMetadata=ot.prototype.Xf,ot.prototype.isIdle=ot.prototype.Cf,ot.prototype.isConnected=ot.prototype.isConnected;var c0=.5,f0=5,h0="IDLE",p0="PLAYING",d0="BUFFERING",g0="PAUSED";function $h(e){var t=this;this.g=[],this.h=[],this.data=[],(new ke).box("moov",Fe).P("pssh",function(n){if(!(1<n.version)){var r=Te(n.reader.O,-12,n.size);if(t.data.push(r),t.g.push(li(n.reader.Za(16))),0<n.version){r=n.reader.M();for(var i=0;i<r;i++){var o=li(n.reader.Za(16));t.h.push(o)}}}}).parse(e)}function Yh(e,t){var n=e.length,r=t.length+16+n,i=new Uint8Array(r),o=vt(i),s=0;return o.setUint32(s,r),o.setUint32(s+=4,1886614376),o.setUint32(s+=4,0),i.set(t,s+=4),o.setUint32(s+=t.length,n),i.set(e,s+4),i}function zh(e,t,n){var r=function x0(e){for(var t=[],n=(e=m(e)).next();!n.done;n=e.next())(n=E0(n.value))&&t.push(n);return t}(e),i=null;e=[];var o=[],s=new Set(r.map(function(u){return u.keyId}));if(s.delete(null),1<s.size)throw new M(2,4,4010);if(t||(o=r.filter(function(u){return"urn:mpeg:dash:mp4protection:2011"!=u.ze||(i=u.init||i,!1)})).length&&(e=function T0(e,t,n){for(var r=[],i=(t=m(t)).next();!i.done;i=t.next()){var s,o=n[(i=i.value).ze];if(o)s=(s=au(i.node,"urn:microsoft:playready","pro"))?[{initData:Yh(s=Mn(s.textContent),new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149])),initDataType:"cenc",keyId:i.keyId}]:null,s=ii(o,i.init||e||s),(o=I0.get(o))&&(s.licenseServerUri=o(i)),r.push(s)}return r}(i,o,n),0==e.length&&(e=[ii("",i)])),r.length&&(t||!o.length))for(e=[],n=(t=m(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(ii(n,i));if(s=Array.from(s)[0]||null)for(n=(t=m(e)).next();!n.done;n=t.next())for(r=(n=m(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=s;return{he:s,Lg:i,drmInfos:e,le:!0}}function Qo(e){return(e=au(e.node,"urn:microsoft:playready","pro"))&&(e=function y0(e){var t=0,n=vt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0);var i=n.getUint16(e+=2,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var o=Te(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}(e=Mn(e.textContent)).filter(function(t){return t.type===S0})[0])&&(e=wi(e=Cn(e.value,!0),"WRMHEADER"))?function w0(e){for(var t=(e=m(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=m(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}function E0(e){var t=e.getAttribute("schemeIdUri"),n=zn(e,"urn:mpeg:cenc:2013","default_KID"),r=oc(e,"urn:mpeg:cenc:2013","pssh").map(po);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new M(2,4,4009);var i=[];try{i=r.map(function(o){return{initDataType:"cenc",initData:Mn(o),keyId:null}})}catch{throw new M(2,4,4007)}return{node:e,ze:t,keyId:n,init:0<i.length?i:null}}var S0=1,I0=(new Map).set("com.widevine.alpha",function(e){return(e=au(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Qo).set("com.microsoft.playready.recommendation",Qo).set("com.microsoft.playready.software",Qo).set("com.microsoft.playready.hardware",Qo);function Zo(e,t,n,r,i){var o={RepresentationID:t,Number:n,Bandwidth:r,Time:i};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(s,u,a,l){if("$$"==s)return"$";var c=o[u];if(null==c)return s;switch("RepresentationID"==u&&a&&(a=void 0),"Time"==u&&(c=Math.round(c)),l){case void 0:case"d":case"i":case"u":s=c.toString();break;case"o":s=c.toString(8);break;case"x":s=c.toString(16);break;case"X":s=c.toString(16).toUpperCase();break;default:s=c.toString()}return a=O.parseInt(a,10)||1,Array(Math.max(0,a-s.length)+1).join("0")+s})}function Jh(e,t){var n=tn(e,t,"timescale"),r=1;n&&(r=mo(n)||1);var i=tn(e,t,"duration");n=mo(i||""),"image"==e.H.contentType&&(n=yi(i||"")),n&&(n/=r);var o=tn(e,t,"startNumber");i=Number(tn(e,t,"presentationTimeOffset"))||0;var s=en(o||"");(null==o||null==s)&&(s=1);var u=es(e,t,"SegmentTimeline");if(o=null,u){o=r;var a=e.T.duration||1/0;u=Be(u,"S");for(var l=[],c=-i,p=0;p<u.length;++p){var d=u[p],v=u[p+1],x=Le(d,"t",en),E=Le(d,"d",en);if(d=Le(d,"r",bm),null!=x&&(x-=i),!E)break;if(x=x??c,0>(d=d||0))if(v){if(null==(v=Le(v,"t",en)))break;if(x>=v)break;d=Math.ceil((v-x)/E)-1}else{if(a==1/0)break;if(x/o>=a)break;d=Math.ceil((a*o-x)/E)-1}for(0<l.length&&x!=c&&(l[l.length-1].end=x/o),v=0;v<=d;++v)l.push({start:x/o,end:(c=x+E)/o,eg:x}),x=c}o=l}return{timescale:r,la:n,Mb:s,Ta:i/r||0,de:i,timeline:o}}function tn(e,t,n){return[t(e.H),t(e.ha),t(e.aa)].filter(An).map(function(r){return r.getAttribute(n)}).reduce(function(r,i){return r||i})}function es(e,t,n){return[t(e.H),t(e.ha),t(e.aa)].filter(An).map(function(r){return ho(r,n)}).reduce(function(r,i){return r||i})}function ts(e,t,n,r,i,o){if(o=void 0===o?0:o,zn(e,"http://www.w3.org/1999/xlink","href")){var s=function A0(e,t,n,r,i,o){for(var s=zn(e,"http://www.w3.org/1999/xlink","href"),u=zn(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=m(Array.from(e.attributes)),l=a.next();!l.done;l=a.next())"http://www.w3.org/1999/xlink"==(l=l.value).namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=o)return $n(new M(2,4,4028));if("onLoad"!=u)return $n(new M(2,4,4027));var c=lt([r],[s]);return i.request(0,Bt(c,t)).$(function(p){if(!(p=uc(p.data,e.tagName)))return $n(new M(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;p.childNodes.length;){var d=p.childNodes[0];p.removeChild(d),e.appendChild(d)}for(d=(p=m(Array.from(p.attributes))).next();!d.done;d=p.next())e.setAttributeNode(d.value.cloneNode(!1));return ts(e,t,n,c[0],i,o+1)})}(e,t,n,r,i,o);return n&&(s=s.$(void 0,function(){return ts(e,t,n,r,i,o)})),s}s=[];for(var u=m(Array.from(e.childNodes)),a=u.next();!a.done;a=u.next())(a=a.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==zn(a,"http://www.w3.org/1999/xlink","href")?e.removeChild(a):"SegmentTimeline"!=a.tagName&&s.push(ts(a,t,n,r,i,o)));return $l(s).$(function(){return e})}function Dn(e){this.h=vt(e),this.g=new xe(this.h,0)}function vn(e){var t=Qh(e);if(7<t.length)throw new M(2,3,3002);for(var n=0,r=(t=m(t)).next();!r.done;r=t.next())n=256*n+r.value;t=Qh(e);e:{for(var i=(r=m(R0)).next();!i.done;i=r.next())if(zt(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.X();else{if(8==t.length&&224&t[1])throw new M(2,3,3001);for(i=r=0;i<t.length;i++){var o=t[i];r=0==i?o&(1<<8-t.length)-1:256*r+o}t=r}return t=e.g.X()+t<=e.h.byteLength?t:e.h.byteLength-e.g.X(),r=vt(e.h,e.g.X(),t),e.g.skip(t),new k0(n,r)}function Qh(e){var t=e.g.X(),n=e.g.Y();if(0==n)throw new M(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Te(e.h,t,n)}Dn.prototype.na=function(){return this.g.na()};var R0=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function k0(e,t){this.id=e,this.g=t}function ma(e){if(8<e.g.byteLength)throw new M(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new M(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function N0(e){var t=new Dn(e.g);if(179!=(e=vn(t)).id)throw new M(2,3,3013);if(e=ma(e),183!=(t=vn(t)).id)throw new M(2,3,3012);t=new Dn(t.g);for(var n=0;t.na();){var r=vn(t);if(241==r.id){n=ma(r);break}}return{fg:e,Pf:n}}function Zh(e,t){var n=es(e,t,"Initialization");if(!n)return null;var r=e.H.za,i=n.getAttribute("sourceURL");i&&(r=lt(e.H.za,[i])),i=0;var o=null;return(n=Le(n,"range",go))&&(i=n.start,o=n.end),new wt(function(){return r},i,o,rp(e))}function ep(e,t,n,r,i,o,s){var u,a,l,c,p,d,v,x,E,I,S,N,C,R,j;return D(function(U){if(1==U.g)return u=e.presentationTimeline,a=!e.Wa||!e.T.td,l=e.T.start,c=e.T.duration,p=e.H.mimeType.split("/")[1],v=null,x=[(d=t)(r,i,o),"webm"==p?d(n.sa(),n.pa,n.ia):null],d=null,w(U,Promise.all(x),2);if(I=(E=U.h)[0],S=E[1]||null,C=l-s,R=l,j=c?l+c:1/0,"mp4"==p)var F=function C0(e,t,n,r,i,o,s){var u,a=(new ke).P("sidx",function(l){u=function M0(e,t,n,r,i,o,s){var u=[];s.reader.skip(4);var a=s.reader.M();if(0==a)throw new M(2,3,3005);if(0==s.version)var l=s.reader.M(),c=s.reader.M();else l=s.reader.Lb(),c=s.reader.Lb();s.reader.skip(2);var p=s.reader.Kb();for(e=e+s.size+c,c=0;c<p;c++){var d=s.reader.M(),v=(2147483648&d)>>>31;d&=2147483647;var x=s.reader.M();if(s.reader.skip(4),1==v)throw new M(2,3,3006);u.push(new Ue(l/a+n,(l+x)/a+n,function(){return o},e,e+d-1,t,n,r,i)),l+=x,e+=d}return s.parser.stop(),u}(t,r,i,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new M(2,3,3004)}(I,i,r,n,C,R,j);else{if(440786851!=vn(F=new Dn(S)).id)throw new M(2,3,3008);var V=vn(F);if(408125543!=V.id)throw new M(2,3,3009);F=V.g.byteOffset,V=new Dn(V.g);for(var H=null;V.na();){var q=vn(V);if(357149030==q.id){H=q;break}}if(!H)throw new M(2,3,3010);for(H=new Dn(H.g),q=1e6,V=null;H.na();){var Q=vn(H);if(2807729==Q.id)q=ma(Q);else if(17545==Q.id)if(4==Q.g.byteLength)V=Q.g.getFloat32(0);else{if(8!=Q.g.byteLength)throw new M(2,3,3003);V=Q.g.getFloat64(0)}}if(null==V)throw new M(2,3,3011);if(V*=H=q/1e9,475249515!=(q=vn(new Dn(I))).id)throw new M(2,3,3007);F=function D0(e,t,n,r,i,o,s,u,a){function l(){return i}var c=[];e=new Dn(e.g);for(var p=null,d=null;e.na();){var v=vn(e);if(187==v.id){var x=N0(v);x&&(v=n*x.fg,x=t+x.Pf,null!=p&&c.push(new Ue(p+s,v+s,l,d,x-1,o,s,u,a)),p=v,d=x)}}return null!=p&&c.push(new Ue(p+s,r+s,l,d,null,o,s,u,a)),c}(q,F,H,V,r,n,C,R,j)}return u.Hb(N=F),v=new fe(N),a&&v.Xa(R,j,!0),U.return(v)})}function Vr(e){return e.nc}function tp(e){var t=es(e,Vr,"RepresentationIndex");return e=go((e=tn(e,Vr,"indexRange"))||""),t&&(e=Le(t,"range",go,e)),e}function np(e,t){var n=e.H.mimeType.split("/")[1];if(e.H.contentType!=Me&&"mp4"!=n&&"webm"!=n)throw new M(2,4,4006);if("webm"==n&&!t)throw new M(2,4,4005)}function rp(e){var t=e.H;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Nc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function ip(e){return e.$a}function ns(e){return e.oc}function op(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function sp(e){var t,n,r,i,o,s,u,l,c,d,v,x,E,I,S,N,C,j,U,F,V,H,Q;return D(function(re){switch(re.g){case 1:if(t=pt,1==e.length)return re.return(e[0]);for(n=e.map(function(pe){return pe.filter(function(he){return he.type==t.cb})}),r=e.map(function(pe){return pe.filter(function(he){return he.type==t.Na})}),i=e.map(function(pe){return pe.filter(function(he){return he.type==t.Z})}),o=e.map(function(pe){return pe.filter(function(he){return he.type==t.Tb})}),s=m(i),u=s.next();!u.done;u=s.next())u.value.push(fp(t.Z));for(l=m(o),c=l.next();!c.done;c=l.next())c.value.push(fp(t.Tb));return w(re,Nn([],n,0,rs,is),2);case 2:return d=re.h,w(re,Nn([],r,0,rs,is),3);case 3:return v=re.h,w(re,Nn([],i,0,rs,is),4);case 4:return x=re.h,w(re,Nn([],o,0,rs,is),5);case 5:if(E=re.h,I=0,v.length&&d.length)for(j=m(d),U=j.next();!U.done;U=j.next())for(F=U.value,V=m(v),H=V.next();!H.done;H=V.next())Q=I++,H.value.variantIds.push(Q),F.variantIds.push(Q);else for(S=v.concat(d),N=m(S),C=N.next();!C.done;C=N.next())C.value.variantIds=[I++];return re.return(v.concat(d).concat(x).concat(E))}})}function Nn(e,t,n,r,i){var o,s,u,a,l,d,v,E,I,N,C,j,U,V;return D(function(q){switch(q.g){case 1:for(o=pt,s=[],u=0;u<t.length;u++)s.push(u>=n?new Set(t[u]):new Set);a=m(e),l=a.next();case 2:if(l.done){q.B(4);break}return w(q,function Y0(e,t,n,r,i){return D(function(o){return 1==o.g?(lp(t,e),e.matchedStreams?e.segmentIndex?w(o,up(e,n),2):o.B(2):o.return(!1)):(ap(e,n,r,i),o.return(!0))})}(l.value,t,n,i,s),5);case 5:if(!q.h)throw new M(2,4,4037);l=a.next(),q.B(2);break;case 4:for(d=m(s),v=d.next();!v.done;v=d.next())for(E=m(v.value),I=E.next();!I.done;I=E.next())(N=z0(I.value,t,r,i,s))&&e.push(N);for(C=m(s),v=C.next();!v.done;v=C.next())for(j={},U=m(v.value),I=U.next();!I.done;j={Va:j.Va},I=U.next())if(j.Va=I.value,V=j.Va.type==o.Tb&&!j.Va.tilesLayout,(j.Va.type!=o.Z||j.Va.language)&&!V&&e.some(function(Q){return function(re){return re.mimeType==Q.Va.mimeType&&Rn(re.codecs)==Rn(Q.Va.codecs)}}(j)))throw new M(2,4,4037);return q.return(e)}})}function up(e,t){var n,r,i,o,s,u,a;return D(function(l){if(1==l.g){for(n=[],i=m(r=e.matchedStreams),o=i.next();!o.done;o=i.next())n.push((s=o.value).createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return w(l,Promise.all(n),2)}if(e.segmentIndex instanceof Ve)for(u=t;u<r.length;u++)(a=r[u]).segmentIndex&&e.segmentIndex.j.push(a.segmentIndex);W(l)})}function z0(e,t,n,r,i){var o=n(e);return lp(t,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return D(function(s){return o.segmentIndex?s.B(0):(o.segmentIndex=new Ve,w(s,up(o,0),0))})}),o.matchedStreams&&o.matchedStreams.length?(ap(o,0,r,i),o):null}function ap(e,t,n,r){for(var i=e.matchedStreams,o=0;o<i.length;o++)if(o>=t){var s=i[o];n(e,s);var u=!0;"audio"==e.type&&0==Wn(e.language,s.language)&&(u=!1),u&&r[o].delete(s)}}function Ui(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())(r=r.value).segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function rs(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Hr(e,t){var s;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(s=t.keyIds,new Set([].concat(K(e.keyIds),K(s)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n=wo(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new M(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(n=m(t.closedCaptions)).next();!r.done;r=n.next()){var i=m(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Ui(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Hr(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Hr(e.trickModeVideo,t)}function is(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(K(e.keyIds),K(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,K(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(n=m(t.closedCaptions)).next();!r.done;r=n.next()){var i=m(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}}function lp(e,t){for(var n=[],r=m(e),i=r.next();!i.done;i=r.next()){for(var o=t,s={audio:cp,video:cp,text:J0,image:Q0}[o.type],u={audio:Z0,video:e1,text:t1,image:n1}[o.type],a=null,l=(i=m(i.value)).next();!l.done;l=i.next())!s(o,l=l.value)||a&&!u(o,a,l)||(a=l);if(!(o=a))return;n.push(o)}t.matchedStreams=n}function cp(e,t){var n;if(!(n=t.mimeType!=e.mimeType||Rn(t.codecs)!=Rn(e.codecs))&&(n=e.drmInfos)){var r=t.drmInfos;n=!(!(n=e.drmInfos).length||!r.length||0<wo(n,r).length)}return!n}function J0(e,t){return!(!e.language||t.language&&(0==Wn(e.language,t.language)||t.kind!=e.kind))}function Q0(e){return!!e.tilesLayout}function Z0(e,t,n){if(e.id==n.id)return!0;var r=Wn(e.language,t.language),i=Wn(e.language,n.language);return i>r||!(i<r)&&(e.roles.length?(r=t.roles.filter(function(o){return e.roles.includes(o)}),(i=n.roles.filter(function(o){return e.roles.includes(o)})).length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!((n.roles.length||!t.roles.length)&&(n.roles.length&&!t.roles.length||(t.primary||!n.primary)&&(t.primary&&!n.primary||(r=Oi(e.channelsCount,t.channelsCount,n.channelsCount))!=Ht&&(r==yn||(r=Oi(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))!=Ht&&(r==yn||!e.bandwidth||pp(e.bandwidth,t.bandwidth,n.bandwidth)!=Ht))))))}function e1(e,t,n){if(e.id==n.id)return!0;var r=Oi(e.width*e.height,t.width*t.height,n.width*n.height);if(r==Ht)return!0;if(r==yn)return!1;if(e.frameRate){if((r=Oi(e.frameRate,t.frameRate,n.frameRate))==Ht)return!0;if(r==yn)return!1}return!(!e.bandwidth||pp(e.bandwidth,t.bandwidth,n.bandwidth)!=Ht)}function t1(e,t,n){if(e.id==n.id)return!0;var r=Wn(e.language,t.language),i=Wn(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter(function(o){return e.roles.includes(o)}),(i=n.roles.filter(function(o){return e.roles.includes(o)})).length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function n1(e,t,n){return e.id==n.id||Oi(e.width*e.height,t.width*t.height,n.width*n.height)==Ht}function fp(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function hp(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new fe([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Oi(e,t,n){if(t==e&&e!=n)return yn;if(n==e&&e!=t)return Ht;if(t>e){if(n<=e||n-e<t-e)return Ht;if(n-e>t-e)return yn}else{if(n>e)return yn;if(e-n<e-t)return Ht;if(e-n>e-t)return yn}return dp}function pp(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Ht:t<e?yn:dp}op.prototype.release=function(){for(var e=m(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var Ht=1,dp=0,yn=-1;function Bi(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.N={},this.j=new op,this.F=0,this.I=new Fn(5),this.D=new ue(function(){!function a1(e){var t,n;D(function(r){switch(r.g){case 1:return t=0,ie(r,2),w(r,va(e),4);case 4:t=r.h,ve(r,3);break;case 2:n=ne(r),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return r.return();mp(e,t),W(r)}})}(e)}),this.o=new lo,this.s=null,this.L=[],this.u=1/0,this.C=!1}function va(e){var t,n,r,i,o,s,u;return D(function(a){return 1==a.g?(t=Bt(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),r=Date.now(),i=n.request(0,t),Rr(e.o,i),w(a,i.promise,2)):3!=a.g?(o=a.h,e.h?(o.uri&&!e.m.includes(o.uri)&&e.m.unshift(o.uri),w(a,function r1(e,t,n){var r,s;return D(function(a){if(1==a.g){if(!(r=uc(t,"MPD")))throw new M(2,4,4001,n);return e.g.dash.disableXlinkProcessing?a.return(gp(e,r,n)):(s=ts(r,e.g.retryParameters,e.g.dash.xlinkFailGracefully,n,e.h.networkingEngine),Rr(e.o,s),w(a,s.promise,2))}return a.return(gp(e,a.h,n))})}(e,o.data,o.uri),3)):a.return(0)):(s=Date.now(),e.I.sample(1,u=(s-r)/1e3),a.return(u))})}function gp(e,t,n){var r,i,o,s,u,a,l,c,d,v,x,I,N,C,R,j,U,F,V,Q,re,pe,he,ce,et,Ke;return D(function(rt){switch(rt.g){case 1:if((r=e.g.dash.manifestPreprocessor)&&r(t),i=[n],0<(o=Be(t,"Location").map(po).filter(An)).length&&(s=lt(i,o),i=e.m=s),u=Be(t,"BaseURL"),a=u.map(po),l=lt(i,a),c=0,u&&u.length&&(c=Le(u[0],"availabilityTimeOffset",yi)||0),d=0,e.g.dash.ignoreMinBufferTime||(d=Le(t,"minBufferTime",fn)||0),e.F=Le(t,"minimumUpdatePeriod",fn,-1),v=Le(t,"availabilityStartTime",Lm),x=Le(t,"timeShiftBufferDepth",fn),I=null,e.g.dash.ignoreSuggestedPresentationDelay||(I=Le(t,"suggestedPresentationDelay",fn)),N=null,e.g.dash.ignoreMaxSegmentDuration||(N=Le(t,"maxSegmentDuration",fn)),C=t.getAttribute("type")||"static",e.i)for(R=e.i.presentationTimeline,j=m(Object.values(e.l)),U=j.next();!U.done;U=j.next())(F=U.value).segmentIndex&&F.segmentIndex.eb(R.Qa());else V=e.g.defaultPresentationDelay||1.5*d,R=new J(v,I??V,e.g.dash.autoCorrectDrift);return R.pc("static"==C),R.U()&&!isNaN(e.g.availabilityWindowOverride)&&(x=e.g.availabilityWindowOverride),null==x&&(x=1/0),R.Zd(x),Q=t.getAttribute("profiles")||"",re={Wa:"static"!=C,presentationTimeline:R,aa:null,T:null,ha:null,H:null,bandwidth:0,qe:!1,Ab:c,profiles:Q.split(",")},pe=function i1(e,t,n,r){var i=Le(r,"mediaPresentationDuration",fn),o=[],s=0;r=Be(r,"Period");for(var u=0;u<r.length;u++){var a=r[u],l=r[u+1],c=Le(a,"start",fn,s),p=a.id,d=Le(a,"duration",fn),v=null;if(l){var x=Le(l,"start",fn);null!=x&&(v=x-c)}else null!=i&&(v=i-c);if(null==v&&(v=d),!(null!==e.s&&null!==p&&null!==c&&c<e.s)||e.L.includes(p)||u+1==r.length){if(null!==c&&(null===e.s||c>e.s)&&(e.s=c),s=o1(e,t,n,{start:c,duration:v,node:a,td:null==v||!l}),o.push(s),t.aa.id&&v&&(e.N[t.aa.id]=v),null==v){s=null;break}s=c+v}}return e.L=o.map(function(E){return E.id}),null!=i?{periods:o,duration:i,je:!1}:{periods:o,duration:s,je:!0}}(e,re,l,t),he=pe.duration,ce=pe.periods,"static"!=C&&pe.je||R.Ja(he||1/0),e.u&&!e.C&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.C=e.h.isLowLatencyMode()),e.C?R.Ce(e.u):e.u&&_e("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),R.Id(N||1),w(rt,function G0(e,t,n){var r,i,o,s,u,a,l,c,p,d,v,E,I,N,C,R,j,U,F,V,H,q,Q,re,pe,he,ce,ze;return D(function(et){switch(et.g){case 1:if(r=pt,function X0(e){for(var t=(e=m(e)).next();!t.done;t=e.next()){for(var n=[],r=m((t=t.value).yc),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=m(n),u=s.next();!u.done;u=s.next())i.id!=(u=u.value).id&&i.channelsCount==u.channelsCount&&i.language==u.language&&i.bandwidth==u.bandwidth&&i.label==u.label&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&f(i.roles,u.roles)&&i.audioSamplingRate==u.audioSamplingRate&&i.primary==u.primary&&(o=!0);o||n.push(i)}t.yc=n}}(t),function q0(e){for(var t=(e=m(e)).next();!t.done;t=e.next()){for(var n=[],r=m((t=t.value).Wc),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=m(n),u=s.next();!u.done;u=s.next())i.id!=(u=u.value).id&&i.width==u.width&&i.frameRate==u.frameRate&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&i.label==u.label&&f(i.roles,u.roles)&&Dm(i.closedCaptions,u.closedCaptions)&&i.bandwidth==u.bandwidth&&(o=!0);o||n.push(i)}t.Wc=n}}(t),function W0(e){for(var t=(e=m(e)).next();!t.done;t=e.next()){for(var n=[],r=m((t=t.value).textStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=m(n),u=s.next();!u.done;u=s.next())i.id!=(u=u.value).id&&i.language==u.language&&i.label==u.label&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&i.bandwidth==u.bandwidth&&f(i.roles,u.roles)&&(o=!0);o||n.push(i)}t.textStreams=n}}(t),function $0(e){for(var t=(e=m(e)).next();!t.done;t=e.next()){for(var n=[],r=m((t=t.value).imageStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=m(n),u=s.next();!u.done;u=s.next())i.id!=(u=u.value).id&&i.width==u.width&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&(o=!0);o||n.push(i)}t.imageStreams=n}}(t),!n&&1==t.length){e.g=(i=t[0]).yc,e.h=i.Wc,e.j=i.textStreams,e.i=i.imageStreams,et.B(2);break}for(o=-1,s=0;s<t.length;s++)e.m.has((u=t[s]).id)||(e.m.add(u.id),-1==o&&(o=s));if(-1==o)return et.return();for(a=t.map(function(Ke){return Ke.yc}),l=t.map(function(Ke){return Ke.Wc}),c=t.map(function(Ke){return Ke.textStreams}),p=t.map(function(Ke){return Ke.imageStreams}),d=m(c),v=d.next();!v.done;v=d.next())v.value.push(hp(r.Z));for(E=m(p),I=E.next();!I.done;I=E.next())I.value.push(hp(r.Tb));return w(et,Nn(e.g,a,o,Ui,Hr),3);case 3:return w(et,Nn(e.h,l,o,Ui,Hr),4);case 4:return w(et,Nn(e.j,c,o,Ui,Hr),5);case 5:return w(et,Nn(e.i,p,o,Ui,Hr),2);case 2:if(N=0,C=[],e.h.length&&e.g.length)for(H=m(e.g),q=H.next();!q.done;q=H.next())for(Q=q.value,re=m(e.h),pe=re.next();!pe.done;pe=re.next())ce=wo(Q.drmInfos,(he=pe.value).drmInfos),Q.drmInfos.length&&he.drmInfos.length&&!ce.length||(ze=N++,C.push({id:ze,language:Q.language,primary:Q.primary,audio:Q,video:he,bandwidth:(Q.bandwidth||0)+(he.bandwidth||0),drmInfos:ce,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(R=e.h.concat(e.g),j=m(R),U=j.next();!U.done;U=j.next())V=N++,C.push({id:V,language:(F=U.value).language,primary:F.primary,audio:F.type==r.cb?F:null,video:F.type==r.Na?F:null,bandwidth:F.bandwidth||0,drmInfos:F.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=C,W(et)}})}(e.j,ce,re.Wa),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),rt.B(3);break}if(e.i={presentationTimeline:R,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:d||0},!R.He()){rt.B(4);break}return et=Be(t,"UTCTiming"),w(rt,function f1(e,t,n){var r,i,o,s,u,a,l,c;return D(function(p){switch(p.g){case 1:r=n.map(function(d){return{scheme:d.getAttribute("schemeIdUri"),value:d.getAttribute("value")}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=m(r),s=o.next();case 2:if(s.done){p.B(4);break}switch(u=s.value,ie(p,5),l=u.value,a=u.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return p.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return p.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),p.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":_e("NTP UTCTiming scheme is not supported");break;default:_e("Unrecognized scheme in UTCTiming element",a)}p.B(9);break;case 7:return w(p,vp(e,t,l,"HEAD"),10);case 10:return p.return(p.h);case 8:return w(p,vp(e,t,l,"GET"),11);case 11:return p.return(p.h);case 9:ve(p,3);break;case 5:ne(p);case 3:s=o.next(),p.B(2);break;case 4:return _e("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),p.return(0)}})}(e,l,et),5);case 5:if(Ke=rt.h,!e.h)return rt.return();R.De(Ke);case 4:R.Cd();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),W(rt)}})}function o1(e,t,n,r){t.aa=ya(r.node,null,n),t.T=r,t.aa.Ab=t.Ab,t.aa.id||(t.aa.id="__shaka_period_"+r.start);var i=Be(r.node,"EventStream");n=t.presentationTimeline.Qa();for(var o=(i=m(i)).next();!o.done;o=i.next())h1(e,r.start,r.duration,o.value,n);if(n=Be(r.node,"AdaptationSet").map(function(c){return function s1(e,t,n){function r(U){switch(U){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ha=ya(n,t.aa,null);var p,i=!1,o=Be(n,"Role"),s=o.map(function(U){return U.getAttribute("value")}).filter(An),u=void 0,a=t.ha.contentType==Me;a&&(u="subtitle");for(var l=(o=m(o)).next();!l.done;l=o.next()){var c=(l=l.value).getAttribute("schemeIdUri");if(null==c||"urn:mpeg:dash:role:2011"==c)switch(l=l.getAttribute("value"),l){case"main":i=!0;break;case"caption":case"subtitle":u=l}}o=null,l=!1;for(var d=(c=m(c=Be(n,"EssentialProperty"))).next();!d.done;d=c.next()){var v=(d=d.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==v?o=d.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==v?p=r(parseInt(d.getAttribute("value"),10)):l=!0}for(d=(c=m(c=Be(n,"SupplementalProperty"))).next();!d.done;d=c.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(d=d.value).getAttribute("schemeIdUri")&&(p=r(parseInt(d.getAttribute("value"),10)));c=Be(n,"Accessibility");var x=new Map;for(d=(c=m(c)).next();!d.done;d=c.next())if(d=(v=d.value).getAttribute("schemeIdUri"),v=v.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==d)if(d=1,null!=v)for(var E=m(v=v.split(";")),I=E.next();!I.done;I=E.next()){var S=I.value,N=I=void 0;S.includes("=")?(I=(S=S.split("="))[0].startsWith("CC")?S[0]:"CC"+S[0],N=S[1]||"und"):(I="CC"+d,2==v.length?d+=2:d++,N=S),x.set(I,ye(N))}else x.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==d)if(d=1,null!=v)for(I=(v=m(v.split(";"))).next();!I.done;I=v.next())S=E=void 0,(I=I.value).includes("=")?(E="svc"+(I=I.split("="))[0],S=I[1].split(",")[0].split(":").pop()):(E="svc"+d,d++,S=I),x.set(E,ye(S));else x.set("svc1","und");else"urn:mpeg:dash:role:2011"==d&&null!=v&&(s.push(v),"captions"==v&&(u="caption"));if(l)return null;var C=zh(l=Be(n,"ContentProtection"),e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),R=ye(n.getAttribute("lang")||"und"),j=n.getAttribute("label");if((l=Be(n,"Label"))&&l.length&&((l=l[0]).textContent&&(j=l.textContent)),n=(l=Be(n,"Representation")).map(function(U){return(U=function u1(e,t,n,r,i,o,s,u,a,l){if(t.H=ya(l,t.ha,null),e.u=Math.min(e.u,t.H.Ab),!function c1(e){var t=e.nc?1:0;return t+=e.$a?1:0,0==(t+=e.oc?1:0)?e.contentType==Me||"application"==e.contentType:(1!=t&&(e.nc&&(e.$a=null),e.oc=null),!0)}(t.H))return null;var c=t.T.start;t.bandwidth=Le(l,"bandwidth",mo)||0;var p=t.H.contentType,d=p==Me||"application"==p;p="image"==p;try{var v=function(U,F,V){return function p1(e,t,n,r){var i,o,u;return D(function(l){return 1==l.g?(i=ln,o=Ri(t,n,r,e.g.retryParameters),u=e.h.networkingEngine.request(i,o),Rr(e.o,u),w(l,u.promise,2)):l.return(l.h.data)})}(e,U,F,V)};if(t.H.nc)var x=function L0(e,t){var n=Number(tn(e,Vr,"presentationTimeOffset"))||0,r=tn(e,Vr,"timescale"),i=1;r&&(i=mo(r)||1);var o=n/i||0,s=Zh(e,Vr);!function b0(e,t){if(np(e,t),!tp(e))throw new M(2,4,4002)}(e,s);var u=zl(e);return{Cb:function(){var a=es(u,Vr,"RepresentationIndex"),l=u.H.za;return a&&(a=a.getAttribute("sourceURL"))&&(l=lt(u.H.za,[a])),a=tp(u),ep(u,t,s,l,a.start,a.end,o)}}}(t,v);else if(t.H.$a)x=function P0(e,t){var n=Zh(e,ip),r=function _0(e){var t=function U0(e){return[e.H.$a,e.ha.$a,e.aa.$a].filter(An).map(function(t){return Be(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){return t.getAttribute("indexRange")&&!e.qe&&(e.qe=!0),{Gf:t.getAttribute("media"),start:(t=Le(t,"mediaRange",go,{start:0,end:null})).start,end:t.end}})}(e),n=(e=Jh(e,ip)).Mb;0==n&&(n=1);var r=0;return e.la?r=e.la*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{la:e.la,startTime:r,Mb:n,Ta:e.Ta,timeline:e.timeline,Eb:t}}(e);if(!r.la&&!r.timeline&&1<r.Eb.length)throw new M(2,4,4002);if(!r.la&&!e.T.duration&&!r.timeline&&1==r.Eb.length)throw new M(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new M(2,4,4002);var i=null,o=null;e.aa.id&&e.H.id&&(o=t[e.aa.id+","+e.H.id])&&(i=o.segmentIndex);var s=function j0(e,t,n,r,i){var o=r.Eb.length;r.timeline&&r.timeline.length!=r.Eb.length&&(o=Math.min(r.timeline.length,r.Eb.length));for(var s=e-r.Ta,u=t?e+t:1/0,a=[],l=r.startTime,c={},p=0;p<o;c={cd:c.cd},p++){var v,d=r.Eb[p];c.cd=lt(n,[d.Gf]),a.push(new Ue(e+l,e+(v=null!=r.la?l+r.la:r.timeline?r.timeline[p].end:l+t),function(x){return function(){return x.cd}}(c),d.start,d.end,i,s,e,u)),l=v}return a}(e.T.start,e.T.duration,e.H.za,r,n);return n=!i,i?i.Gb(s,e.presentationTimeline.Qa()):i=new fe(s),e.presentationTimeline.Hb(s),e.Wa&&e.T.td||i.Xa(e.T.start,e.T.duration?e.T.start+e.T.duration:1/0,n),o&&(o.segmentIndex=i),{Cb:function(){return i&&0!=i.K.length||i.Fb(s),Promise.resolve(i)}}}(t,e.l);else if(t.H.oc)x=function O0(e,t,n,r,i,o){var s=function K0(e){var t=tn(e,ns,"initialization");if(!t)return null;var n=e.H.id,r=e.bandwidth||null,i=e.H.za;return new wt(function(){var o=Zo(t,n,null,r,null);return lt(i,[o])},0,null,rp(e))}(e),u=function B0(e){var t=Jh(e,ns),n=tn(e,ns,"media");return e=tn(e,ns,"index"),{la:t.la,timescale:t.timescale,Mb:t.Mb,Ta:t.Ta,de:t.de,timeline:t.timeline,Gd:n,ic:e}}(e);!function F0(e){var t=e.ic?1:0;if(t+=e.timeline?1:0,0==(t+=e.la?1:0))throw new M(2,4,4002);if(1!=t&&(e.ic&&(e.timeline=null),e.la=null),!e.ic&&!e.Gd)throw new M(2,4,4002)}(u);var a=zl(e);if(u.ic)return np(e,s),{Cb:function(){var v=Zo(u.ic,a.H.id,null,a.bandwidth||null,null);return v=lt(a.H.za,[v]),ep(a,t,s,v,0,null,u.Ta)}};if(u.la)return r||"image"===e.ha.contentType||(e.presentationTimeline.Id(u.la),e.presentationTimeline.Jd(e.T.start)),{Cb:function(){return function V0(e,t,n,r,i){function o(H){var q=(H-v)*d,Q=q+t.Ta,re=q+l;return q=re+d,(re=new Ue(re,Math.min(q,u()),function(){var he=Zo(E,S,H,I,Q*x);return lt(N,[he])},0,null,r,C,l,u())).l=q,re}function s(){var H=[Math.max(a.Qa(),l),Math.min(a.hb(),u())].map(function(q){return q-l});return[Math.ceil(H[0]/d),Math.ceil(H[1]/d)-1].map(function(q){return q+v})}function u(){var H=null!=c&&i[c]||p;return H?l+H:1/0}var a=e.presentationTimeline,l=e.T.start,c=e.aa.id,p=e.T.duration,d=t.la,v=t.Mb,x=t.timescale,E=t.Gd,I=e.bandwidth||null,S=e.H.id,N=e.H.za,C=l-t.Ta,R=s();e=e.Wa?Math.max(R[0],R[1]-n+1):R[0],R=R[1],n=[];for(var j=e;j<=R;++j){var U=o(j);n.push(U)}var F=new fe(n);if(n=a.hb()<u(),j=a.U(),n||j){var V=Math.max(e,R+1);F.Uc(d,function(){var H=a.Qa();F.eb(H);var q=m(s());q.next(),q=q.next().value;for(var Q=[];V<=q;){var re=o(V);Q.push(re),V++}return H>u()&&!Q.length?null:Q})}return Promise.resolve(F)}(a,u,i,s,o)}};var l=null;r=r=null,e.aa.id&&e.H.id&&(r=n[r=e.aa.id+","+e.H.id])&&(l=r.segmentIndex);var c=function H0(e,t,n){var r=e.T.start,i=e.T.duration,o=r-t.Ta;i=i?r+i:1/0;for(var s=[],u={},a=0;a<t.timeline.length;u={bd:u.bd,fd:u.fd,jd:u.jd,Zc:u.Zc,ld:u.ld,$c:u.$c},a++){var l=t.timeline[a],c=l.start,p=l.eg;l=l.end,u.jd=a+t.Mb,u.ld=p+t.de,u.fd=e.H.id,u.Zc=e.bandwidth||null,u.bd=t.Gd,u.$c=e.H.za,s.push(new Ue(r+c,r+l,function(d){return function(){var v=Zo(d.bd,d.fd,d.jd,d.Zc||null,d.ld);return lt(d.$c,[v]).map(function(x){return x.toString()})}}(u),0,null,n,o,r,i))}return s}(a,u,s);n=e.T.start;var p=e.T.duration?e.T.start+e.T.duration:1/0,d=!(e.Wa&&e.T.td);return l?(d&&new fe(c).Xa(n,p,!0),l.Gb(c,e.presentationTimeline.Qa())):l=new fe(c),e.presentationTimeline.Hb(c),d&&l.Xa(n,p),r&&e.Wa&&(r.segmentIndex=l),{Cb:function(){return l&&0!=l.K.length||l.Fb(c),Promise.resolve(l)}}}(t,v,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.N);else{var E=t.H.za,I=t.T.duration||0;x={Cb:function(){return Promise.resolve(Ro(c,I,E))}}}}catch(U){if((d||p)&&4002==U.code)return null;throw U}v=function v0(e,t,n,r){var i=zh(e,n,r);if(t.le)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.le=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return i.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),0==t.drmInfos.length))throw new M(2,4,4008);return i.he||t.he}(v=Be(l,"ContentProtection"),n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),v=new Set(v?[v]:[]);var S=!1;Be(l,"SupplementalProperty").some(function(U){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==U.getAttribute("schemeIdUri")&&"JOC"==U.getAttribute("value")})&&(S=!0);var C,R,N=!1;if(d&&(N=u.includes("forced_subtitle")||u.includes("forced-subtitle")),p&&((l=Be(l,"EssentialProperty").find(function(U){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(U.getAttribute("schemeIdUri"))}))&&(C=l.getAttribute("value")),!C))return null;l=t.H.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(R="PQ");var j=(l=t.H.id?t.aa.id+","+t.H.id:"")&&e.l[l]?e.l[l]:{id:e.G++,originalId:t.H.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){j.segmentIndex&&(j.segmentIndex.release(),j.segmentIndex=null)},segmentIndex:null,mimeType:t.H.mimeType,codecs:t.H.codecs,frameRate:t.H.frameRate,pixelAspectRatio:t.H.pixelAspectRatio,bandwidth:t.bandwidth,width:t.H.width,height:t.H.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:v,language:i,label:o,type:t.ha.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.H.emsgSchemeIdUris,roles:u,forced:N,channelsCount:t.H.Nc,audioSamplingRate:t.H.audioSamplingRate,spatialAudio:S,closedCaptions:a,hdr:R,tilesLayout:C,matchedStreams:[]};return j.createSegmentIndex=function(){var U;return D(function(F){if(1==F.g)return j.segmentIndex?F.B(0):(U=j,w(F,x.Cb(),3));U.segmentIndex=F.h,W(F)})},l&&t.Wa&&!e.l[l]&&(e.l[l]=j),j}(e,t,C,u,R,j,i,s,x,U))&&(U.hdr=U.hdr||p),U}).filter(function(U){return!!U}),0==n.length){if(o="image"==t.ha.contentType,e.g.dash.ignoreEmptyAdaptationSet||a||o)return null;throw new M(2,4,4003)}if(!t.ha.contentType||"application"==t.ha.contentType)for(t.ha.contentType=yp(n[0].mimeType,n[0].codecs),c=(a=m(n)).next();!c.done;c=a.next())c.value.type=t.ha.contentType;for(c=(a=m(n)).next();!c.done;c=a.next())for(c=c.value,v=(d=m(C.drmInfos)).next();!v.done;v=d.next())(v=v.value).keyIds=v.keyIds&&c.keyIds?new Set([].concat(K(v.keyIds),K(c.keyIds))):v.keyIds||c.keyIds;return a=l.map(function(U){return U.getAttribute("id")}).filter(An),{id:t.ha.id||"__fake__"+e.G++,contentType:t.ha.contentType,language:R,Mg:i,streams:n,drmInfos:C.drmInfos,be:o,Sf:a}}(e,t,c)}).filter(An),t.Wa){for(r=[],o=(i=m(n)).next();!o.done;o=i.next())for(var s=(o=m(o.value.Sf)).next();!s.done;s=o.next())r.push(s.value);if(r.length!=new Set(r).size)throw new M(2,4,4018)}for(r=n.filter(function(c){return!c.be}),i=(n=m(n=n.filter(function(c){return c.be}))).next();!i.done;i=n.next()){o=(i=i.value).be.split(" ");for(var u=(s=m(r)).next();!u.done;u=s.next()){var a=u.value;if(o.includes(a.id)){u={};for(var l=(a=m(a.streams)).next();!l.done;u={wc:u.wc},l=a.next())u.wc=l.value,u.wc.trickModeVideo=i.streams.find(function(c){return function(p){return Rn(c.wc.codecs)==Rn(p.codecs)}}(u))}}}if(i=e.g.disableAudio?[]:os(r,"audio"),s=e.g.disableVideo?[]:os(r,"video"),o=e.g.disableText?[]:os(r,Me),n=e.g.disableThumbnails?[]:os(r,"image"),!s.length&&!i.length)throw new M(2,4,4004);for(r=[],u=(i=m(i)).next();!u.done;u=i.next())r.push.apply(r,K(u.value.streams));for(i=[],u=(s=m(s)).next();!u.done;u=s.next())i.push.apply(i,K(u.value.streams));for(s=[],u=(o=m(o)).next();!u.done;u=o.next())s.push.apply(s,K(u.value.streams));for(o=[],u=(n=m(n)).next();!u.done;u=n.next())o.push.apply(o,K(u.value.streams));return{id:t.aa.id,yc:r,Wc:i,textStreams:s,imageStreams:o}}function os(e,t){return e.filter(function(n){return n.contentType==t})}function mp(e,t){0>e.F||e.D.S(Math.max(3,e.F-t,$t(e.I)))}function ya(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Nc:null,audioSamplingRate:null,Ab:0},n=n||t.za;for(var r=Be(e,"BaseURL"),i=r.map(po),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs,a=Le(e,"frameRate",Pm)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=Be(e,"InbandEventStream"),p=t.emsgSchemeIdUris.slice(),d=(c=m(c)).next();!d.done;d=c.next())d=d.value.getAttribute("schemeIdUri"),p.includes(d)||p.push(d);c=function l1(e){for(var t=(e=m(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(c=Be(e,"AudioChannelConfiguration"))||t.Nc,d=Le(e,"audioSamplingRate",en)||t.audioSamplingRate,o||(o=yp(s,u));var v=ho(e,"SegmentBase"),x=ho(e,"SegmentTemplate"),E=v&&Le(v,"availabilityTimeOffset",yi)||0,I=x&&Le(x,"availabilityTimeOffset",yi)||0;return r=r&&r.length&&Le(r[0],"availabilityTimeOffset",yi)||0,r=t.Ab+r+E+I,{za:lt(n,i),nc:v||t.nc,$a:ho(e,"SegmentList")||t.$a,oc:x||t.oc,width:Le(e,"width",en)||t.width,height:Le(e,"height",en)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:a,pixelAspectRatio:l,emsgSchemeIdUris:p,id:e.getAttribute("id"),Nc:c,audioSamplingRate:d,Ab:r}}function vp(e,t,n,r){var i,o,s,u,a,l;return D(function(c){if(1==c.g)return i=lt(t,[n]),(o=Bt(i,e.g.retryParameters)).method=r,s=e.h.networkingEngine.request(4,o),Rr(e.o,s),w(c,s.promise,2);if(u=c.h,"HEAD"==r){if(!u.headers||!u.headers.date)return c.return(0);a=u.headers.date}else a=ct(u.data);return l=Date.parse(a),isNaN(l)?c.return(0):c.return(l-Date.now())})}function h1(e,t,n,r,i){for(var o=r.getAttribute("schemeIdUri")||"",s=r.getAttribute("value")||"",u=Le(r,"timescale",en)||1,a=(r=m(Be(r,"Event"))).next();!a.done;a=r.next()){var l=Le(a=a.value,"presentationTime",en)||0,c=Le(a,"duration",en)||0;c=(l=l/u+t)+c/u,null!=n&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),c<i||(a={schemeIdUri:o,value:s,startTime:l,endTime:c,id:a.getAttribute("id")||"",eventElement:a},e.h.onTimelineRegionAdded(a))}}function yp(e,t){return pi(Qt(e,t))?Me:e.split("/")[0]}function wp(e,t,n,r){this.h=e,this.type=t,this.g=n,this.segments=r||null}function wa(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=void 0===r?null:r}function oe(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Qe(e,t){var n=e.getAttribute(t);if(!n)throw new M(2,4,4023,t);return n.value}function Tp(e,t,n){n=void 0===n?[]:n,this.g=t,this.h=e,this.i=n}function xp(e,t){this.name=e,this.value=t}function wn(e,t){return e.filter(function(n){return n.name==t})}function Ep(e,t){return e.filter(function(n){return Qe(n,"TYPE")==t})}function gt(e,t){var n=wn(e,t);return n.length?n[0]:null}function Ta(e,t,n){return n=void 0===n?0:n,(e=gt(e,t))?Number(e.value):n}function Kr(e){this.h=e,this.g=0}function Gr(e){Ln(e,/[ \t]+/gm)}function Ln(e,t){t.lastIndex=e.g;var n=t.exec(e.h);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||null==n||n.position!=e.g?null:(e.g+=n.length,n.results)}function sr(e){return e.g==e.h.length?null:(e=Ln(e,/[^ \t\n]*/gm))?e[0]:null}function d1(){this.g=0}function xa(e,t,n){var r=(t=(t=ct(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new M(2,4,4015);t=0;for(var i=!0,o=m(r),s=o.next();!s.done;s=o.next())if(/^#(?!EXT)/m.test(s=s.value)||i)i=!1;else{if(s=Ea(e,s),--e.g,Sp.includes(s.name)){t=1;break}"EXT-X-STREAM-INF"==s.name&&(i=!0)}for(o=[],i=!0,s=0;s<r.length;s++){var u=r[s],a=r[s+1];if(/^#(?!EXT)/m.test(u)||i)i=!1;else{if(u=Ea(e,u),g1.includes(u.name)){if(1!=t)throw new M(2,4,4017);var l=r.splice(s,r.length-s);r=n,i=[],s=[],a=[],u=null;for(var c=(l=m(l)).next();!c.done;c=l.next())/^(#EXT)/.test(c=c.value)?(c=Ea(e,c),Sp.includes(c.name)?o.push(c):"EXT-X-MAP"==c.name?u=c:"EXT-X-PART"==c.name?a.push(c):"EXT-X-PRELOAD-HINT"==c.name?"PART"==oe(c,"TYPE")?a.push(c):"MAP"==oe(c,"TYPE")&&(c.name="EXT-X-MAP",u=c):s.push(c)):/^#(?!EXT)/m.test(c)||(c=lt([r],[c.trim()])[0],u&&s.push(u),i.push(new Tp(c,s,a)),s=[],a=[]);return a.length&&(u&&s.push(u),i.push(new Tp("",s,a))),new wp(n,t,o,i)}o.push(u),"EXT-X-STREAM-INF"==u.name&&(u.g.push(new xp("URI",a)),i=!0)}}return new wp(n,t,o)}function Ea(e,t){var n=e.g++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new M(2,4,4016,t);var s,i=r[1],o=r[2];if(r=[],o){var u;(u=Ln(o=new Kr(o),/^([^,=]+)(?:,|$)/g))&&(s=u[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=Ln(o,a);)r.push(new xp(u[1],u[2]||u[3])),Gr(o)}return new wa(n,i,r,s)}(g=Bi.prototype).configure=function(e){this.g=e},g.start=function(e,t){var r,n=this;return D(function(i){if(1==i.g)return n.C=t.isLowLatencyMode(),n.m=[e],n.h=t,w(i,va(n),2);if(r=i.h,n.h&&mp(n,r),!n.h)throw new M(2,7,7001);return i.return(n.i)})},g.stop=function(){for(var e=m(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},g.update=function(){var t,e=this;return D(function(n){return 1==n.g?(ie(n,2),w(n,va(e),4)):2!=n.g?ve(n,0):(t=ne(n),e.h&&t?(e.h.onError(t),void W(n)):n.return())})},g.onExpirationUpdated=function(){},$("shaka.dash.DashParser",Bi),Qn.mpd=function(){return new Bi},kt["application/dash+xml"]=function(){return new Bi},kt["video/vnd.mpeg.dash.mpd"]=function(){return new Bi},wa.prototype.toString=function(){var t="#"+this.name,n=this.g?this.g.map(function e(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t},wa.prototype.getAttribute=function(e){var t=this.g.filter(function(n){return n.name==e});return t.length?t[0]:null};var Sp="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),g1="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Ip(){}function Ap(e){try{var t=Sa(e);return Cr({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return $n(n)}}function Sa(e){var t=e.split(":");if(2>t.length||"data"!=t[0])throw new M(2,1,1004,e);if(2>(t=t.slice(1).join(":").split(",")).length)throw new M(2,1,1004,e);var n=t[0];e=O.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;return 1<t.length&&"base64"==t[t.length-1]&&(r=!0,t.pop()),{data:r?Mn(e):Xn(e),contentType:n}}function Fi(){var e=this;this.g=this.i=null,this.Ga=1,this.o=new Map,this.u=new Map,this.ya=new Set,this.h=new Map,this.j=null,this.N="",this.da=new d1,this.xa=0,this.C=new ue(function(){!function P1(e){var n;D(function(r){return 1==r.g?e.i?(ie(r,2),w(r,e.update(),4)):r.return():2!=r.g?(e.C.S(e.xa),ve(r,0)):(n=ne(r),e.i?(n.severity=1,e.i.onError(n),e.C.S(.1),void W(r)):r.return())})}(e)}),this.m=Tn,this.D=null,this.fa=0,this.G=1/0,this.ca=this.ga=0,this.F=new lo,this.W=[],this.L=new Map,this.Ma=!1,this.s=new Map,this.V=null,this.ea=new Map,this.I=new Map,this.l=!1}function Cp(e,t){var n,i,o,s,u,a,l,c,p,d,v;return D(function(E){if(1==E.g)return n=Op,i=new Mt(t.Le),e.l&&t.Qe&&eo(i,new dr("_HLS_skip=YES")),w(E,Ra(e,i.toString()),2);if(3!=E.g){if(1!=(s=xa(e.da,(o=E.h).data,o.uri)).type)throw new M(2,4,4017);return u=wn(s.g,"EXT-X-DEFINE"),a=Mp(e,u),w(E,bp(e,t.Vc,s,(l=t.stream).type,l.mimeType,t.Fd,a,t.Xe,l.codecs,l.bandwidth),3)}l.segmentIndex.Gb(c=E.h,e.j.Qa()),c.length&&(p=Ta(s.g,"EXT-X-MEDIA-SEQUENCE",0),d=t.Fd.get(p),l.segmentIndex.eb(d)),v=c[c.length-1],gt(s.g,"EXT-X-ENDLIST")&&(ss(e,n.Ke),e.j.Ja(v.endTime)),W(E)})}function Mp(e,t){for(var n=new Map,r=m(t),i=r.next();!i.done;i=r.next()){var o=i.value;i=oe(o,"NAME");var s=oe(o,"VALUE");o=oe(o,"IMPORT"),i&&s&&n.set(i,s),o&&(i=e.o.get(o))&&n.set(o,i)}return n}function Rp(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec);var r=oe(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;for(var i=[],o=(r=m(r)).next();!o.done;o=r.next()){var s=hi(o=o.value)[0];n.has(s)||(i.push(o),n.add(s))}return i}function Ia(e){return ye(e=oe(e,"LANGUAGE")||"und")}function Aa(e,t){var n,r,i,o,s,u,a,l,c,p,d,v,E;return D(function(I){if(1==I.g){n=Qe(t,"GROUP-ID"),r="";var S=Qe(t,"TYPE").toLowerCase();return"subtitles"==S&&(S=Me),(i=S)!=Me&&n&&e.s.has(n)&&(r=e.s.get(n)),o=Xr(Qe(t,"URI"),e.o),e.h.has(o)?I.return(e.h.get(o)):(s=Ia(t),u=oe(t,"NAME"),a=oe(t,"DEFAULT"),l="YES"==a,S="audio"==i&&(S=oe(t,"CHANNELS"))?parseInt(S.split("/")[0],10):null,c=S,S="audio"==i&&!!(S=oe(t,"CHANNELS"))&&S.includes("/JOC"),p=S,d=oe(t,"CHARACTERISTICS"),v=oe(t,"FORCED"),w(I,Ca(e,o,r,i,s,l,u,c,null,d,"YES"==v,p),2))}return E=I.h,e.u.has(n)?e.u.get(n).push(E):e.u.set(n,[E]),null==E?I.return(null):e.h.has(o)?I.return(e.h.get(o)):(e.h.set(o,E),I.return(E))})}function Ca(e,t,n,r,i,o,s,u,a,l,c,p,d){var v,x,E,I,S,N,R,j,U,F,V,H,q,Q,re,pe,he,ce,ze,Ke,rt,Sn,$r,Tt,Ds,lr,ol,_g,jg,Ug,Og,sl,ul,Ns,Fg,Vg,Hg;return D(function(At){switch(At.g){case 1:return v=lt([e.N],[t])[0],w(At,Ra(e,v),2);case 2:if(1!=(E=xa(e.da,(x=At.h).data,v=x.uri)).type)throw new M(2,4,4017);if(I=[],E.segments)for(S=m(E.segments),N=S.next();!N.done;N=S.next())R=wn(N.value.g,"EXT-X-KEY"),I.push.apply(I,K(R));for(j=!1,U=[],F=new Set,V=m(I),H=V.next();!H.done;H=V.next())if("NONE"!=(Q=Qe(q=H.value,"METHOD"))){if(j=!0,"AES-128"==Q)return e.Ma=!0,At.return(null);if(re=Qe(q,"KEYFORMAT"),he=(pe=j1[re])?pe(q):null){if(he.keyIds)for(ce=m(he.keyIds),ze=ce.next();!ze.done;ze=ce.next())F.add(ze.value);U.push(he)}}if(j&&!U.length)throw new M(2,4,4026);return Ke=wn(E.g,"EXT-X-DEFINE"),rt=Mp(e,Ke),kp(e,E),w(At,function b1(e,t,n,r,i){var o,s,u,a,l,c,p,d,x;return D(function(I){return 1==I.g?(o=pt,s=ln,u=Xr(r.segments[0].h,i),a=new Mt(u),l=a.wa.split(".").pop(),(p=(c=_1[t])[l])?I.return(p):t==o.Z?I.return(n&&"vtt"!=n&&"wvtt"!=n?"application/mp4":"text/vtt"):t!=o.Tb||n&&"jpeg"!=n?((d=Bt([u],e.g.retryParameters)).method="HEAD",w(I,Vi(e,d,s),2)):I.return("image/jpeg")):(x=I.h.headers["content-type"])?I.return(x.split(";")[0]):I.return(c.mp4)})}(e,r,n,E,rt),3);case 3:return _p.includes(Sn=At.h)&&(n=""),$r=new Map,Tt=new Map,Ds=e.l,ie(At,4),w(At,bp(e,t,E,r,Sn,$r,rt,Tt,n,d),6);case 6:lr=At.h,ve(At,5);break;case 4:if(4035==(ol=ne(At)).code)return _e("Skipping unsupported HLS stream",Sn,t),At.return(null);throw ol;case 5:if(Ds!=e.l&&kp(e,E),_g=lr[0].startTime,jg=lr[lr.length-1].endTime,Ug=new fe(lr),Og=r==Me?"subtitle":void 0,sl=[],l)for(ul=m(l.split(",")),Ns=ul.next();!Ns.done;Ns=ul.next())sl.push(Ns.value);return Vg=!!(Fg=gt(E.g,"EXT-X-SERVER-CONTROL"))&&null!=Fg.getAttribute("CAN-SKIP-UNTIL"),Hg={id:e.Ga++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ug,mimeType:Sn,codecs:n,kind:Og,encrypted:j,drmInfos:U,keyIds:F,language:i,label:s,type:r,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:sl,forced:c,channelsCount:u,audioSamplingRate:null,spatialAudio:p,closedCaptions:a,hdr:void 0,tilesLayout:void 0},At.return({stream:Hg,Vc:t,Le:v,se:_g,Ff:jg,Fd:$r,Xe:Tt,Qe:Vg})}})}function kp(e,t){var n=gt(t.g,"EXT-X-PLAYLIST-TYPE"),r=gt(t.g,"EXT-X-ENDLIST");if(r=n&&"VOD"==n.value||r,n=n&&"EVENT"==n.value&&!r,n=!r&&!n,r)ss(e,Tn);else{if(ss(e,n?Up:jp),!(r=gt(t.g,"EXT-X-TARGETDURATION")))throw new M(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),n=gt(t.g,"EXT-X-PART-INF"),e.l&&n?(e.ga=Number(Qe(n,"PART-TARGET")),e.G=Math.min(e.ga,e.G),n=gt(t.g,"EXT-X-SERVER-CONTROL"),e.ca=n?Number(Qe(n,"PART-HOLD-BACK")):0):e.G=Math.min(r,e.G),e.fa=Math.max(r,e.fa)}}function Dp(e,t,n,r){return(n=gt(n,"EXT-X-MAP"))?(t=[r=Xr(lt([t],[Qe(n,"URI")])[0],r),oe(n,"BYTERANGE","")].join("-"),e.ea.has(t)||(n=function R1(e,t){var n=0,r=null,i=oe(t,"BYTERANGE");return i&&(n=i.split("@"),r=Number(n[0]),r=(n=Number(n[1]))+r-1),new wt(function(){return[e]},n,r)}(r,n),e.ea.set(t,n)),e.ea.get(t)):null}function Np(e,t,n,r,i,o,s,u,a){var l=r.g,c=Xr(r.h,s),p=gt(l,"EXTINF"),d=s=0,v=null;if(!p){if(0==r.i.length)throw new M(2,4,4024,"EXTINF");if(!e.l)return null}var x=[];if(e.l)for(var E={},I=0;I<r.i.length;E={dd:E.dd},I++){var S=r.i[I],N=0==I?n:x[x.length-1],C=0==I?i:N.endTime,R=Number(oe(S,"DURATION"))||e.ga;if(R){R=C+R;var j=0,U=null;"EXT-X-PRELOAD-HINT"==S.name?j=(N=oe(S,"BYTERANGE-START"))?Number(N):0:(j=(N=m(Lp(N,j=oe(S,"BYTERANGE")))).next().value,U=N.next().value),(S=oe(S,"URI"))&&(E.dd=lt([u],[S])[0],x.push(new Ue(C,R,function(F){return function(){return[F.dd]}}(E),j,U,t,o,0,1/0)))}}return s=p?i+Number(p.value.split(",")[0]):x[x.length-1].endTime,(e=gt(l,"EXT-X-BYTERANGE"))?(d=(v=m(Lp(n,e.value))).next().value,v=v.next().value):x.length&&(d=x[0].pa,v=x[x.length-1].ia),n="",e=null,"image"==a&&(n="1x1",a=gt(l,"EXT-X-TILES"))&&(n=Qe(a,"LAYOUT"),(a=oe(a,"DURATION"))&&(e=Number(a))),new Ue(i,s,function(){return c.length?[c]:[]},d,v,t,o,0,1/0,x,n,e)}function Lp(e,t){var n=0,r=null;return t&&(n=t.split("@"),r=Number(n[0]),r=(n=n[1]?Number(n[1]):e.ia+1)+r-1),[n,r]}function bp(e,t,n,r,i,o,s,u,a,l){var c,p,d,v,x,E,I,S,C,R,j,U,F,V,H,q,pe,he;return D(function(ce){switch(ce.g){case 1:if(c=n.segments,d=Ta(n.g,"EXT-X-MEDIA-SEQUENCE",0),x=(v=gt(n.g,"EXT-X-SKIP"))?Number(oe(v,"SKIPPED-SEGMENTS")):0,E=d+x,e.m!=Tn&&o.has(E)){I=o.get(E),ce.B(2);break}if(null!=e.V){ce.B(3);break}return p=Dp(e,n.h,c[0].g,s),S=e,w(ce,Pp(e,t,p,i,E,!1,c[0],s,r,a,l),4);case 4:S.V=ce.h;case 3:I=e.V;case 2:if(c[0].h.split("/").pop(),C=Ta(n.g,"EXT-X-DISCONTINUITY-SEQUENCE"),e.l&&(u.has(C)||u.set(C,E),x))for(R=u;R.has(C+1)&&R.get(C+1)<E;)C++;j=e.I.get(C)||0,U=[],F=0;case 5:if(!(F<c.length)){ce.B(7);break}if(V=c[F],H=U[U.length-1],o.set(E=d+x+F,q=0==F?I:H.endTime),p=Dp(e,n.h,V.g,s),!gt(V.g,"EXT-X-DISCONTINUITY")){ce.B(8);break}return C++,u.set(C,E),w(ce,function D1(e,t,n,r,i,o,s,u,a,l,c,p){var d;return D(function(x){return 1==x.g?(d=0,e.I.has(t)?(d=e.I.get(t),x.B(2)):w(x,Pp(e,n,r,i,o,!0,s,u,l,c,p),3)):(2!=x.g&&e.I.set(t,d=a-x.h),x.return(d))})}(e,C,t,p,i,E,V,s,q,r,a,l),9);case 9:j=ce.h;case 8:!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),pe=gt(V.g,"EXTINF"),e.l||pe?(he=Np(e,p,H,V,q,j,s,n.h,r))&&U.push(he):e.l||_e("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),F++,ce.B(5);break;case 7:return ce.return(U)}})}function Ma(e,t,n,r,i,o){var s,u,a,c;return D(function(d){switch(d.g){case 1:return s=ln,u=Ri(t.sa(),t.pa,t.ia,e.g.retryParameters),e.i.modifySegmentRequest(u,{type:n,init:t instanceof wt,duration:t.endTime-t.startTime,mimeType:r,codecs:i,bandwidth:o}),e.g.hls.useFullSegmentsForStartTime?d.return(Vi(e,u,s)):(a=Ri(t.sa(),t.pa,t.pa+2048-1,e.g.retryParameters),e.i.modifySegmentRequest(a,{type:n,init:t instanceof wt,duration:t.endTime-t.startTime,mimeType:r,codecs:i,bandwidth:o}),ie(d,2),w(d,Vi(e,a,s),4));case 4:case 5:return d.return(d.h);case 2:if(7001==(c=ne(d)).code)throw c;return _e("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",a.uris[0]),w(d,Vi(e,u,s),5)}})}function Pp(e,t,n,r,i,o,s,u,a,l,c){var p,d,v,x,E,I,N;return D(function(C){switch(C.g){case 1:if(p=Np(e,n,null,s,0,0,u,"",a),e.D&&!o&&(d=e.h.get(t),null!=(v=d.Fd.get(i))))return C.return(v);if(r=r.toLowerCase(),_p.includes(r))throw _e("Raw formats are not yet supported.  Skipping "+r),new M(1,4,4035);if("video/webm"==r)throw _e("WebM in HLS is not yet supported.  Skipping."),new M(1,4,4035);if("video/mp4"!=r&&"audio/mp4"!=r){C.B(2);break}return x=[Ma(e,p,a,r,l,c)],n&&x.push(Ma(e,n,a,r,l,c)),w(C,Promise.all(x),3);case 3:return C.return(function N1(e,t,n,r){var i=0;if((new ke).box("moov",Fe).box("trak",Fe).box("mdia",Fe).P("mdhd",function(u){i=wu(u.reader,u.version).timescale,u.parser.stop()}).parse(r,!0),!i)throw new M(2,4,4030,e,t);var o=0,s=!1;if((new ke).box("moof",Fe).box("traf",Fe).P("tfdt",function(u){o=yu(u.reader,u.version).pd/i,s=!0,u.parser.stop()}).parse(n,!0),!s)throw new M(2,4,4030,e,t);return o}(t,(I=(E=C.h)[0]).uri,I.data,(E[1]||E[0]).data));case 2:if("video/mp2t"!=r){C.B(4);break}return w(C,Ma(e,p,a,r,l,c),5);case 5:return C.return(function L1(e,t,n){function r(){o.seek(s+188),71!=(u=o.Y())&&(o.seek(s+192),u=o.Y()),71!=u&&(o.seek(s+204),u=o.Y()),71!=u&&i(),o.xe(1)}function i(){throw new M(2,4,4030,e,t)}var o=new xe(n,0),s=0,u=0;for(n=Math.min(o.O.byteLength-188,940);;){if(s=o.X(),71!=(u=o.Y())){if(0<n){--n;continue}i()}n=0;var a=o.Kb();if(8191==(8191&a))r();else if(16384&a){if(0!=(a=(48&o.Y())>>4)&&2!=a||i(),3==a&&(a=o.Y(),o.skip(a)),o.M()>>8==1)return o.skip(3),0!=(n=o.Y()>>6)&&1!=n||i(),0==o.Y()&&i(),(1073741824*((14&(n=o.Y()))>>1)+((65534&(a=o.Kb()))<<14|(65534&o.Kb())>>1))/9e4;r()}else r()}}(t,(N=C.h).uri,N.data));case 4:throw new M(2,4,4030,t)}})}function Xr(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),r=n.match(/{\$\w*}/g);if(r)for(var i=(r=m(r)).next();!i.done;i=r.next()){var o=(i=i.value).slice(2,i.length-1),s=t.get(o);if(!s)throw new M(2,4,4039,o);n=n.replace(i,s)}return n}function Ra(e,t){var n=Bt([t],e.g.retryParameters);return e.i.modifyManifestRequest(n,{format:"h"}),Vi(e,n,0)}function ss(e,t){e.m=t,e.j&&e.j.pc(e.m==Tn),e.m!=Tn||e.C.stop()}function Vi(e,t,n){if(!e.F)throw new M(2,7,7001);return t=e.i.networkingEngine.request(n,t),Rr(e.F,t),t.promise}$("shaka.net.DataUriPlugin",Ip),Ip.parse=Ap,an("data",Ap),(g=Fi.prototype).configure=function(e){this.g=e},g.start=function(e,t){var r,i,n=this;return D(function(o){return 1==o.g?(n.i=t,n.l=t.isLowLatencyMode(),w(o,Ra(n,e),2)):3!=o.g?(n.N=(r=o.h).uri,w(o,function m1(e,t){var n,r,i,o,s,u,a,l,c,p,d,v,x,E,I,S,N,C,R,j,U,F,V,q,Q,re,pe,he,ce,ze,et,Ke,rt,Sn;return D(function(Tt){switch(Tt.g){case 1:if(0!=(n=xa(e.da,t,e.N)).type)throw new M(2,4,4022);for(r=wn(n.g,"EXT-X-DEFINE"),function v1(e,t){for(var n=m(t),r=n.next();!r.done;r=n.next()){var i=r.value;r=oe(i,"NAME"),i=oe(i,"VALUE"),r&&i&&(e.o.has(r)||e.o.set(r,i))}}(e,r),i=wn(n.g,"EXT-X-MEDIA"),o=wn(n.g,"EXT-X-STREAM-INF"),s=wn(n.g,"EXT-X-IMAGE-STREAM-INF"),function y1(e,t){for(var n=m(t),r=n.next();!r.done;r=n.next()){var i=r.value,o=oe(i,"AUDIO");r=oe(i,"VIDEO");var s=oe(i,"SUBTITLES");if(i=Rp(e,i),s){var u=gr(Me,i);e.s.set(s,u),y(i,u)}o&&((s=gr("audio",i))||(s=e.g.hls.defaultAudioCodec),e.s.set(o,s)),r&&((o=gr("video",i))||(o=e.g.hls.defaultVideoCodec),e.s.set(r,o))}}(e,o),u=wn(n.g,"EXT-X-SESSION-DATA"),a=m(u),l=a.next();!l.done;l=a.next())p=oe(c=l.value,"DATA-ID"),d=oe(c,"URI"),v=oe(c,"LANGUAGE"),x=oe(c,"VALUE"),E=(new Map).set("id",p),d&&E.set("uri",lt([e.N],[d])[0]),v&&E.set("language",v),x&&E.set("value",x),I=new ee("sessiondata",E),e.i&&e.i.onEvent(I);return w(Tt,function x1(e,t){var n;return D(function(r){return 1==r.g?(t=t.filter(function(i){var o=oe(i,"URI")||"";return"SUBTITLES"!=oe(i,"TYPE")&&""!=o}),t.length?w(r,Aa(e,t[0]),2):r.B(2)):(n=t.slice(1).map(function(i){return Aa(e,i)}),w(r,Promise.all(n),0))})}(e,i),2);case 2:return function A1(e,t){for(var n=Ep(t,"CLOSED-CAPTIONS"),r=(n=m(n)).next();!r.done;r=n.next()){var i=r.value;r=Ia(i);var o=Qe(i,"GROUP-ID");i=Qe(i,"INSTREAM-ID"),e.L.get(o)||e.L.set(o,new Map),e.L.get(o).set(i,r)}}(e,i),w(Tt,function E1(e,t){var n,i;return D(function(o){return 1==o.g?(n=t.map(function(s){var u,a,l,c,p,d,v,x;return D(function(E){if(1==E.g)return u=oe(s,"FRAME-RATE"),a=Number(oe(s,"AVERAGE-BANDWIDTH"))||Number(Qe(s,"BANDWIDTH")),l=oe(s,"RESOLUTION"),c=m(l?l.split("x"):[null,null]),p=c.next().value,d=c.next().value,v=oe(s,"VIDEO-RANGE"),w(E,function S1(e,t,n){var r,i,o,s,u,a,l,c,p,d,v,x,E,I;return D(function(S){if(1==S.g)return r=pt,i=Rp(e,t),o=oe(t,"AUDIO"),s=oe(t,"VIDEO"),a=(u=o||s)&&e.u.has(u)?e.u.get(u):[],l={audio:o?a:[],video:s?a:[]},p=!1,d=Qe(t,"URI"),v=l.audio.find(function(N){return N&&N.Vc==d}),x=gr(r.Na,i),(E=gr(r.cb,i))&&!x?c=r.cb:!a.length&&E&&x?(c=r.Na,i=[[x,E].join()]):l.audio.length&&v?(c=r.cb,p=!0):c=l.video.length&&!l.audio.length?r.cb:r.Na,p?S.B(2):w(S,function M1(e,t,n,r,i){var o,s,u,a;return D(function(l){if(1==l.g){if(o=Xr(Qe(t,"URI"),e.o),e.h.has(o))return l.return(e.h.get(o));var c=oe(t,"CLOSED-CAPTIONS");return s="video"==r&&c&&"NONE"!=c?e.L.get(c):null,u=oi(r,n),w(l,Ca(e,o,u,r,"und",!1,null,null,s,null,!1,!1,i),2)}return null==(a=l.h)?l.return(null):e.h.has(o)?l.return(e.h.get(o)):(e.h.set(o,a),l.return(a))})}(e,t,i,c,n),3);if(2!=S.g&&(I=S.h),I)l[I.stream.type]=[I];else if(null===I)return S.return(null);return function I1(e){for(var t=(e=m(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter(function(r){return"mp4a.40.34"!=r}),t.stream.codecs=n.join(",")}}(l),S.return(l)})}(e,s,a),2);if(x=E.h){for(var I=E.return,S=x.audio,N=x.video,C=m(N),R=C.next();!R.done;R=C.next())(R=R.value.stream)&&(R.width=Number(p)||void 0,R.height=Number(d)||void 0,R.frameRate=Number(u)||void 0,R.hdr=v||void 0);for(C=e.g.disableAudio,(!S.length||C)&&(S=[null]),C=e.g.disableVideo,(!N.length||C)&&(N=[null]),C=[],R=(S=m(S)).next();!R.done;R=S.next()){R=R.value;for(var j=m(N),U=j.next();!U.done;U=j.next()){var F=U.value,V=F?F.stream:null,H=R?R.stream.drmInfos:null,q=F?F.stream.drmInfos:null;F=(F?F.Vc:"")+" - "+(R?R.Vc:""),(U=R?R.stream:null)&&V&&H.length&&q.length&&!(0<wo(H,q).length)||e.ya.has(F)||(U={id:e.Ga++,language:U?U.language:"und",primary:!!U&&U.primary||!!V&&V.primary,audio:U,video:V,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},C.push(U),e.ya.add(F))}}E=I.call(E,C)}else E=E.return([]);return E})}),w(o,Promise.all(n),2)):(i=(i=o.h.reduce(Hs,[])).filter(function(s){return null!=s}),o.return(i))})}(e,o),3);case 3:return S=Tt.h,w(Tt,function w1(e,t){var n,r,i,o,s,a,l,c,p,d;return D(function(x){if(1==x.g)return n=Ep(t,"SUBTITLES"),r=n.map(function(E){var N;return D(function(C){if(1==C.g)return e.g.disableText?C.return(null):(ie(C,2),w(C,Aa(e,E),4));if(2!=C.g)return C.return(C.h.stream);if(N=ne(C),e.g.hls.ignoreTextStreamFailures)return C.return(null);throw N})}),w(x,Promise.all(r),2);for(i=x.h,o=m(n),s=o.next();!s.done;s=o.next())if(a=Qe(s.value,"GROUP-ID"),(l=e.s.get(a))&&(c=e.u.get(a)))for(p=m(c),d=p.next();!d.done;d=p.next())d.value.stream.codecs=l;return x.return(i.filter(function(E){return E}))})}(e,i),4);case 4:return N=Tt.h,w(Tt,function T1(e,t){var n;return D(function(i){return 1==i.g?(n=t.map(function(o){var a;return D(function(l){if(1==l.g)return e.g.disableThumbnails?l.return(null):(ie(l,2),w(l,function C1(e,t){var n,r,i,o,s,u,a,l,c,p;return D(function(d){return 1==d.g?(n=Xr(Qe(t,"URI"),e.o),r=oe(t,"CODECS","jpeg")||"",e.h.has(n)?d.return(e.h.get(n)):(i=Ia(t),o=oe(t,"NAME"),s=oe(t,"CHARACTERISTICS"),w(d,Ca(e,n,r,"image",i,!1,o,null,null,s,!1,!1),2))):null==(u=d.h)?d.return(null):e.h.has(n)?d.return(e.h.get(n)):((a=oe(t,"RESOLUTION"))&&(l=u.stream.segmentIndex.get(0),(c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1]))),(p=oe(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(p)),e.h.set(n,u),d.return(u))})}(e,o),4));if(2!=l.g)return l.return(l.h.stream);if(a=ne(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}),w(i,Promise.all(n),2)):i.return(i.h.filter(function(o){return o}))})}(e,s),5);case 5:if(C=Tt.h,!e.i)throw new M(2,7,7001);if(e.Ma&&0==S.length)throw new M(2,4,4034);for(j=R=1/0,U=m(e.h.values()),F=U.next();!F.done;F=U.next())V=F.value,R=Math.min(R,V.se),"text"!=V.stream.type&&(j=Math.min(j,V.Ff-V.se));if(e.m!=Tn?(e.j=new J(0,e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.ca?e.ca:3*e.fa),e.j.pc(!1)):(e.j=new J(null,0),e.j.pc(!0)),e.m!=Tn)e.xa=e.G,e.m==Op.Je&&(q=e.j.Sc,isNaN(e.g.availabilityWindowOverride)||(q=e.g.availabilityWindowOverride),e.j.Zd(q));else for(e.j.Ja(j),e.j.offset(-R),Q=m(e.h.values()),F=Q.next();!F.done;F=Q.next())(re=F.value).stream.segmentIndex.offset(-R),re.stream.segmentIndex.Xa(0,j);for(e.W=[],pe=[],he=m(S),ce=he.next();!ce.done;ce=he.next())for(et=m([(ze=ce.value).video,ze.audio]),Ke=et.next();!Ke.done;Ke=et.next())(rt=Ke.value)&&pe.push(rt);return w(Tt,Promise.all(pe.map(function(Ds){return D(function(lr){return w(lr,Ds.createSegmentIndex(),0)})})),6);case 6:for(Sn=m(pe),Ke=Sn.next();!Ke.done;Ke=Sn.next())e.W.push(Ke.value.segmentIndex.K);(function k1(e){if(e.j){for(var t=m(e.W),n=t.next();!n.done;n=t.next())e.j.Hb(n.value);e.W=[]}})(e),e.j.Cd(),e.D={presentationTimeline:e.j,variants:S,textStreams:N,imageStreams:C,offlineSessionIds:[],minBufferTime:0},e.i.makeTextStreamsForClosedCaptions(e.D),W(Tt)}})}(n,r.data),3)):(0<(i=n.xa)&&n.C.S(i),o.return(n.D))})},g.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.F&&(e.push(this.F.destroy()),this.F=null),this.g=this.i=null,this.ya.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},g.update=function(){var t,n,r,e=this;return D(function(i){if(1==i.g)return e.m==Tn?i.return():(t=[],e.V=null,(n=Array.from(e.h.values())).length?w(i,Cp(e,n[0]),2):i.B(2));for(r=1;r<n.length;r++)t.push(Cp(e,n[r]));return w(i,Promise.all(t),0)})},g.onExpirationUpdated=function(){},$("shaka.hls.HlsParser",Fi);var _p=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],_1={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},j1={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Qe(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=ii("com.widevine.alpha",[{initDataType:"cenc",initData:t=Te((t=Sa(t=Qe(e,"URI"))).data)}]),(e=oe(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Qe(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?ii("com.microsoft.playready",[{initDataType:"cenc",initData:e=Yh(e=Te((e=Sa(e=Qe(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]))}]):null}},Tn="VOD",jp="EVENT",Up="LIVE",Op={Ke:Tn,og:jp,Je:Up};function Bp(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=ro(t)}catch{}throw new M(401==n||403==n?2:1,1,1001,r,n,i,e,o)}function ka(){}function us(e,t,n,r,i){var o=new V1;vi(t.headers).forEach(function(l,c){o.append(c,l)});var s=new B1,u={ee:!1,Ge:!1};if(e=function U1(e,t,n,r,i,o,s){var u,a,l,c,p,d,v,x,E,I,N,C;return D(function(R){switch(R.g){case 1:return u=O1,a=F1,d=p=0,v=Date.now(),ie(R,2),w(R,u(e,n),4);case 4:if(o(Fp((l=R.h).headers)),"HEAD"==n.method){R.B(5);break}return x=l.clone().body.getReader(),I=(E=l.headers.get("Content-Length"))?parseInt(E,10):0,new a({start:function(j){!function U(){var F,V;return D(function(H){switch(H.g){case 1:return ie(H,2),w(H,x.read(),4);case 4:F=H.h,ve(H,3);break;case 2:return ne(H),H.return();case 3:if(F.done){H.B(5);break}if(p+=F.value.byteLength,!s){H.B(5);break}return w(H,s(F.value),5);case 5:(100<(V=Date.now())-v||F.done)&&(i(V-v,p-d,I-p),d=p,v=V),F.done?j.close():(j.enqueue(F.value),U()),W(H)}})}()}}),w(R,l.arrayBuffer(),6);case 6:c=R.h;case 5:ve(R,3);break;case 2:throw N=ne(R),r.ee?new M(1,1,7001,e,t):r.Ge?new M(1,1,1003,e,t):new M(1,1,1002,e,N,t);case 3:return C=Fp(l.headers),R.return(Bp(C,c,l.status,e,l.url,t))}})}(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,r,i,t.streamDataCallback),e=new Pe(e,function(){return u.ee=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var a=new ue(function(){u.Ge=!0,s.abort()});a.S(t/1e3),e.finally(function(){a.stop()})}return e}function Fp(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function Vp(){if(!O.ReadableStream)return!1;try{new ReadableStream({})}catch{return!1}return!!O.Response&&!!new Response("").body&&!(!O.fetch||!O.AbortController)}Qn.m3u8=function(){return new Fi},kt["application/x-mpegurl"]=function(){return new Fi},kt["application/vnd.apple.mpegurl"]=function(){return new Fi},$("shaka.net.HttpFetchPlugin",ka),ka.isSupported=Vp,ka.parse=us;var O1=O.fetch,B1=O.AbortController,F1=O.ReadableStream,V1=O.Headers;function Hp(){}function as(e,t,n,r,i){var o=new H1,s=Date.now(),u=0;return new Pe(new Promise(function(l,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new M(1,1,7001,e,n))};var p=!1;for(var d in o.onreadystatechange=function(){if(2==o.readyState&&!p){var v=Kp(o);i(v),p=!0}},o.onload=function(){var v=Kp(o),x=o.response;try{var E=Bp(v,x,o.status,e,o.responseURL,n);l(E)}catch(I){c(I)}},o.onerror=function(v){c(new M(1,1,1002,e,v,n))},o.ontimeout=function(){c(new M(1,1,1003,e,n))},o.onprogress=function(v){var x=Date.now();(100<x-s||v.lengthComputable&&v.loaded==v.total)&&(r(x-s,v.loaded-u,v.total-v.loaded),u=v.loaded,s=x)},t.headers)o.setRequestHeader(d.toLowerCase(),t.headers[d]);o.send(t.body)}),function(){return o.abort(),Promise.resolve()})}function Kp(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=m(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Vp()&&(an("http",us,2,!0),an("https",us,2,!0),an("blob",us,2,!0)),$("shaka.net.HttpXHRPlugin",Hp),Hp.parse=as;var H1=O.XMLHttpRequest;function Gp(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function Da(e){return e.sa().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.pa+":"+e.ia}function K1(e,t){return Ri(e.g.sa(),e.g.pa,e.g.ia,t.streaming.retryParameters)}function Xp(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Wp(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function qp(e){var t=this;this.o=e,this.j=new Map,this.i=new Yn(function(){return Na(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Xp}function Na(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function X1(e,t,n,r,i,o){Ne(e.i);var s=(e.j.get(t)||Promise.resolve()).then(function(){var u,a,l,c,p;return D(function(x){if(1==x.g)return w(x,function q1(e,t){var r,i,o;return D(function(s){return 1==s.g?(r=e.o.request(ln,t),e.h.push(i=function(){return r.abort()}),w(s,r.promise,2)):(o=s.h,y(e.h,i),s.return(o.data))})}(e,n),2);if(u=x.h,e.i.g)throw new M(2,9,7001);if(i)for(c in a=Te(u),(l=new $h(a)).data)p=Number(c),e.l(l.data[p],l.g[p]);e.g.close(r,u.byteLength);var E=e.g;return e.m(0==E.i?0:E.j/E.i,e.g.h),x.return(o(u))})});e.j.set(t,s)}function ls(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new De,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function La(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var o;return D(function(s){if(1==s.g)return null==i.result?(n(),s.return()):w(s,t((o=i.result).key,o.value,o),2);o.continue(),W(s)})}})}function ba(e){this.h=e,this.g=[]}function ur(e,t){return cs(e,t,"readwrite")}function cs(e,t,n){var r=new ls(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then(function(){y(e.g,r)},function(){y(e.g,r)}),r}function ar(e,t,n){this.h=new ba(e),this.i=t,this.g=n}function $p(e){return Promise.reject(new M(2,9,9011,"Cannot add new value to "+e))}function Yp(e,t,n,r){t=(e=ur(e.h,t)).store();for(var i={},o=(n=m(n)).next();!o.done;i={uc:i.uc},o=n.next())i.uc=o.value,t.delete(i.uc).onsuccess=function(s){return function(){return r(s.uc)}}(i);return e.promise()}function zp(e,t,n){var r,i,o,s,u,a,l;return D(function(c){if(1==c.g){for(r=cs(e.h,t,"readonly"),i=r.store(),o={},s=[],u={},a=m(n),l=a.next();!l.done;u={Sb:u.Sb,Qb:u.Qb},l=a.next())u.Qb=l.value,u.Sb=i.get(u.Qb),u.Sb.onsuccess=function(p){return function(){null==p.Sb.result&&s.push(p.Qb),o[p.Qb]=p.Sb.result}}(u);return w(c,r.promise(),2)}if(s.length)throw new M(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(p){return o[p]}))})}function Hi(e){this.g=new ba(e)}function dt(){this.g=new Map}function Jp(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(i,o){i.hasFixedKeySpace()||t||(t={path:{Ca:r,ma:o},ma:i})})}),t)return t;throw new M(2,9,9013,"Could not find a cell that supports add-operations")}function fs(e,t,n){if(!(e=e.g.get(t)))throw new M(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new M(2,9,9013,"Could not find cell with name "+n);return t}function Qp(e,t){Ki.set(e,t)}an("http",as,1,!0),an("https",as,1,!0),an("blob",as,1,!0),Xp.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},qp.prototype.destroy=function(){return this.i.destroy()},ls.prototype.abort=function(){var e=this;return D(function(t){if(1==t.g){try{e.i.abort()}catch{}return ie(t,2),w(t,e.g,4)}if(2!=t.g)return ve(t,0);ne(t),W(t)})},ls.prototype.store=function(){return this.h},ls.prototype.promise=function(){return this.g},ba.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(g=ar.prototype).destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return $p(this.i)},g.removeSegments=function(e,t){return Yp(this,this.i,e,t)},g.getSegments=function(e){var t=this;return D(function(r){return 1==r.g?w(r,zp(t,t.i,e),2):r.return(r.h.map(function(i){return t.fe(i)}))})},g.addManifests=function(){return $p(this.g)},g.updateManifest=function(){return Promise.reject(new M(2,9,9016,"Cannot modify values in "+this.g))},g.updateManifestExpiration=function(e,t){var n=ur(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(i){(i=i.target.result)&&(i.expiration=t,r.put(i,e))},n.promise()},g.removeManifests=function(e,t){return Yp(this,this.g,e,t)},g.getManifests=function(e){var t=this;return D(function(r){return 1==r.g?w(r,zp(t,t.g,e),2):r.return(Promise.all(r.h.map(function(i){return t.$b(i)})))})},g.getAllManifests=function(){var t,n,e=this;return D(function(r){return 1==r.g?(t=cs(e.h,e.g,"readonly"),n=new Map,w(r,La(t,function(i,o){return D(function(u){if(1==u.g)return w(u,e.$b(o),2);n.set(i,u.h),W(u)})}),2)):3!=r.g?w(r,t.promise(),3):r.return(n)})},g.fe=function(e){return e},g.$b=function(e){return Promise.resolve(e)},g.add=function(e,t){var r,i,o,s,u,a,n=this;return D(function(c){if(1==c.g){for(r=ur(n.h,e),i=r.store(),o=[],s={},u=m(t),a=u.next();!a.done;s={vc:s.vc},a=u.next())s.vc=i.add(a.value),s.vc.onsuccess=function(p){return function(){o.push(p.vc.result)}}(s);return w(c,r.promise(),2)}return c.return(o)})},Hi.prototype.destroy=function(){return this.g.destroy()},Hi.prototype.getAll=function(){var t,n,e=this;return D(function(r){return 1==r.g?(t=cs(e.g,"session-ids","readonly"),n=[],w(r,La(t,function(i,o){n.push(o)}),2)):3!=r.g?w(r,t.promise(),3):r.return(n)})},Hi.prototype.add=function(e){for(var t=ur(this.g,"session-ids"),n=t.store(),r=(e=m(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},Hi.prototype.remove=function(e){var n,t=this;return D(function(r){return 1==r.g?w(r,La(n=ur(t.g,"session-ids"),function(i,o,s){e.includes(o.sessionId)&&s.delete()}),2):w(r,n.promise(),0)})},dt.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},dt.prototype.init=function(){var e=this;Ki.forEach(function(i,o){var s=i();s&&e.g.set(o,s)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},$("shaka.offline.StorageMuxer",dt),dt.unregister=function(e){Ki.delete(e)},dt.register=Qp,dt.prototype.destroy=dt.prototype.destroy;var Ki=new Map;function Gi(){ar.apply(this,arguments)}function Z1(e,t){!function tw(e){var t=e.streams.filter(function(u){return"audio"==u.contentType});if(e=e.streams.filter(function(u){return"video"==u.contentType}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=m(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var i=n++,o=m(e);for(r=o.next();!r.done;r=o.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=(o=m(t)).next();!r.done;r=o.next())r.value.variantIds.push(i);if(e.length&&t.length)for(r=(t=m(t)).next();!r.done;r=t.next())for(r=r.value,o=(i=m(e)).next();!o.done;o=i.next()){o=o.value;var s=n++;r.variantIds.push(s),o.variantIds.push(s)}}}(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(i){return function ew(e,t,n){var r=e.initSegmentUri?Zp(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=Zp(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(i,e.startTime,t)})}function Zp(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new M(2,9,9004,"Could not parse uri "+e)}function hs(){ar.apply(this,arguments)}function nw(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function Pa(){ar.apply(this,arguments)}function ed(){this.m=this.j=this.i=this.h=this.g=this.l=null}function nn(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function _a(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new nn(t,n,r,Number(e[4])):null}function td(e,t){this.h=e,this.g=t}function nd(e,t){var n=new J(null,0);n.Ja(t.duration);var r=t.streams.filter(function(l){return"audio"==l.type}),i=t.streams.filter(function(l){return"video"==l.type});r=function iw(e,t,n,r){for(var i=new Set,o=m(t),s=o.next();!s.done;s=o.next()){var u=m(s.value.variantIds);for(s=u.next();!s.done;s=u.next())i.add(s.value)}for(s=(o=m(n)).next();!s.done;s=o.next())for(s=(u=m(s.value.variantIds)).next();!s.done;s=u.next())i.add(s.value);for(o=new Map,s=(i=m(i)).next();!s.done;s=i.next())o.set(s=s.value,{id:s,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(i=(t=m(t)).next();!i.done;i=t.next())for(s=ps(e,i=i.value,r),i=(u=m(i.variantIds)).next();!i.done;i=u.next())(i=o.get(i.value)).language=s.language,i.primary=i.primary||s.primary,i.audio=s;for(t=(n=m(n)).next();!t.done;t=n.next())for(t=ps(e,i=t.value,r),i=(s=m(i.variantIds)).next();!i.done;i=s.next())(i=o.get(i.value)).primary=i.primary||t.primary,i.video=t;return o}(e,r,i,n),i=t.streams.filter(function(l){return l.type==Me}).map(function(l){return ps(e,l,n)});var o=t.streams.filter(function(l){return"image"==l.type}).map(function(l){return ps(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=m(r.values()),a=u.next();!a.done;a=u.next())(a=a.value).audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:o}}function ps(e,t,n){var r=t.segments.map(function(i){return function ow(e,t){var n=new nn("segment",e.h,e.g,t.dataKey);return new Ue(t.startTime,t.endTime,function(){return[n.toString()]},0,null,null!=t.initSegmentKey?function sw(e,t){var n=new nn("segment",e.h,e.g,t);return new wt(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,i)});return n.Hb(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new fe(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function rd(){this.g=null}function id(){}function od(e){var t=_a(e);return e=t&&"manifest"==t.g?Cr(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.g?function uw(e,t){var n=new dt;return Cr(void 0).$(function(){return n.init()}).$(function(){return fs(n,t.Ca(),t.ma())}).$(function(r){return r.getSegments([t.key()])}).$(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}(t.key(),t):$n(new M(2,1,9004,e))}function sd(e,t,n){var r,i,o,u;return D(function(l){switch(l.g){case 1:r=[];for(var c=[],p=m(n),d=p.next();!d.done;d=p.next()){d=d.value;for(var v=!1,x=m(c),E=x.next();!E.done;E=x.next())if(lw((E=E.value).info,d)){E.sessionIds.push(d.sessionId),v=!0;break}v||c.push({info:d,sessionIds:[d.sessionId]})}i=m(c),o=i.next();case 2:if(o.done){l.B(4);break}return u=function aw(e,t,n){var r,i;return D(function(o){switch(o.g){case 1:return r=new vo({nb:t,onError:function(){},Pc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ie(o,2),r.configure(e),w(o,function Om(e,t,n,r,i,o){var s=new Map;return(i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,i),pc(e,s,[])}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ve(o,3);break;case 2:return ne(o),w(o,r.destroy(),5);case 5:case 9:return o.return([]);case 3:return ie(o,6),w(o,lu(r),8);case 8:ve(o,7);break;case 6:return ne(o),w(o,r.destroy(),9);case 7:return i=[],w(o,Promise.all(n.sessionIds.map(function(s){return D(function(u){return 1==u.g?(ie(u,2),w(u,function Bm(e,t){var n,r,i;return D(function(o){return 1==o.g?w(o,dc(e,t),2):3!=o.g?(n=o.h)?(r=[],(i=e.i.get(n))&&(i.Ka=new De,r.push(i.Ka)),r.push(n.remove()),w(o,Promise.all(r),3)):o.return():(e.i.delete(n),void W(o))})}(r,s),4)):2!=u.g?(i.push(s),ve(u,0)):(ne(u),void W(u))})})),10);case 10:return w(o,r.destroy(),11);case 11:return o.return(i)}})}(e,t,o.value),w(l,u,5);case 5:r=r.concat(l.h),o=i.next(),l.B(2);break;case 4:return l.return(r)}})}function lw(e,t){function n(r,i){return r.robustness==i.robustness&&r.contentType==i.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&f(e.audioCapabilities,t.audioCapabilities,n)&&f(e.videoCapabilities,t.videoCapabilities,n)}function ja(e,t){var n=nd(new td(e.Ca(),e.ma()),t),r=t.appMetadata||{};return n=ud(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function ud(e){for(var t=[],n=function gm(e){return e.filter(function(t){return mi(t)})}(e.variants),r=(n=m(n)).next();!r.done;r=n.next())t.push(qn(r.value));for(n=(e=m(e.textStreams)).next();!n.done;n=e.next())t.push(gi(n.value));return t}function fw(){this.g={}}function hw(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(o=t.bandwidth),e.g[n.id]=i,e.g[r.id]=o}}function pw(e,t){e.g[t.id]=t.bandwidth||2048}function ad(e,t){var n=e.g[t];return null==n&&(n=0),n}function Ye(e){var t=this;if(e&&e.constructor!=_)throw new M(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.dc()):(this.h=Li(),this.g=new Re),this.i=[],this.j=[];var n=!e;this.l=new Yn(function(){var r,i,o,s;return D(function(a){switch(a.g){case 1:return w(a,Promise.all(t.j.map(function(l){return Na(l)})),2);case 2:for(r=function(){},i=[],o=m(t.i),s=o.next();!s.done;s=o.next())i.push(s.value.then(r,r));return w(a,Promise.all(i),3);case 3:if(!n){a.B(4);break}return w(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,W(a)}})})}function Ua(){if(Ot())e:{for(var e=m(Ki.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function ld(e){var t,n,r;return D(function(o){switch(o.g){case 1:return w(o,(t=new dt).init(),2);case 2:return w(o,Jp(t),3);case 3:return r=new nn("manifest",(n=o.h).path.Ca,n.path.ma,e),w(o,t.destroy(),4);case 4:return w(o,(new Ye).remove(r.toString()),0)}})}function cd(e,t,n,r,i,o){var s,u,a,l,p,d,v,x,E,I;return D(function(S){switch(S.g){case 1:for(s=!1,ie(S,2),u=!0,a=m(n.streams),l=a.next();!l.done;l=a.next())for(p=m(l.value.segments),d=p.next();!d.done;d=p.next())null!=(x=(v=d.value).pendingSegmentRefId?r[v.pendingSegmentRefId]:null)&&(v.dataKey=x,v.pendingSegmentRefId=void 0),null!=(x=v.pendingInitSegmentRefId?r[v.pendingInitSegmentRefId]:null)&&(v.initSegmentKey=x,v.pendingInitSegmentRefId=void 0),v.pendingSegmentRefId&&(u=!1),v.pendingInitSegmentRefId&&(u=!1);return n.size+=i,u&&(n.isIncomplete=!1),w(S,e.updateManifest(t,n),4);case 4:s=!0,o(),ve(S,0);break;case 2:return E=ne(S),w(S,ld(t),5);case 5:if(s){S.B(6);break}return I=Object.values(r),w(S,e.removeSegments(I,function(){}),6);case 6:throw E}})}function Oa(e){return e.variants.some(function(t){return t.video&&t.video.encrypted||t.audio&&t.audio.encrypted})}function fd(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function hd(e,t){for(var n=[],r=m(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:Qt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:Qt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function Tw(e,t,n){return D(function(r){return w(r,function Nw(e,t,n,r){var i,o,s;return D(function(u){return 1==u.g?r.drmInfo?(i=function J1(e){var t=Array.from(e.g.keys());if(!t.length)throw new M(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),o=r.sessionIds.map(function(a){return{sessionId:a,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:hd(r,!1),videoCapabilities:hd(r,!0)}}),w(u,sd(t,e,o),2)):u.return():3!=u.g?w(u,i.remove(s=u.h),3):w(u,i.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function xw(e,t,n){function r(){}var i=function Dw(e){for(var t=new Set,n=(e=m(e.streams)).next();!n.done;n=e.next())for(var r=(n=m(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return ja(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function Mw(e,t,n,r,i){var o={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,kind:r.kind,language:r.language,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout};return function Rw(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.Qa(),function(s){var u=Da(s),a=void 0;if(!i.has(u)){var l=s.endTime-s.startTime;l=ad(t,r.id)*l,l=Wp(e.g,l),i.set(u,new Gp(s,l,r.id,!1))}s.g&&(a=Da(s.g),i.has(a)||(l=.5*ad(t,r.id),l=Wp(e.g,l),i.set(a,new Gp(s.g,l,r.id,!0)))),o.segments.push({pendingInitSegmentRefId:a,initSegmentKey:a?0:null,startTime:s.startTime,endTime:s.endTime,appendWindowStart:s.appendWindowStart,appendWindowEnd:s.appendWindowEnd,timestampOffset:s.timestampOffset,tilesLayout:s.tilesLayout,pendingSegmentRefId:u,dataKey:0})}),o}function at(e){if(e.l.g)throw new M(2,9,7001)}function ds(){if(!Ua())throw new M(2,9,9e3)}function Ba(e,t){return D(function(n){return 1==n.g?(e.i.push(t),In(n),w(n,t,4)):2!=n.g?n.return(n.h):(bt(n),y(e.i,t),Wt(n,0))})}function pd(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(r=(n=m(e.imageStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=m(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}de(Gi,ar),Gi.prototype.updateManifestExpiration=function(e,t){var r,i,o,n=this;return D(function(s){return r=ur(n.h,n.g),i=r.store(),o=new De,i.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,i.put(u),o.resolve()):o.reject(new M(2,9,9012,"Could not find values for "+e))},w(s,Promise.all([r.promise(),o]),0)})},Gi.prototype.$b=function(e){var t,n,o;return D(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n)o=Z1(e.periods[n],(n==e.periods.length-1?e.duration:e.periods[n+1].startTime)-e.periods[n].startTime),t.push(o);return w(u,sp(t),2)}return u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:u.h,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})})},Gi.prototype.fe=function(e){return{data:e.data}},de(hs,ar),hs.prototype.$b=function(e){var t,n,i;return D(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n){i=(n==e.periods.length-1?e.duration:e.periods[n+1].startTime)-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=m(a.streams),p=c.next();!p.done;p=c.next())0!=(p=p.value).variantIds.length&&l.push(nw(p,a.startTime,a.startTime+i));t.push(l)}return w(u,sp(t),2)}return u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:u.h})})},de(Pa,ar),(g=Pa.prototype).hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return function $1(e,t,n){var r=(e=ur(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},g.$b=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(g=ed.prototype).init=function(){var e=this,t=new De,n=!1,r=new ue(function(){n=!0,t.reject(new M(2,9,9017))});r.S(5);var i=O.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){if(!n){var o=i.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new Gi(o,"segment","manifest"):null,e.g=s,s=(s=o.objectStoreNames).contains("manifest-v2")&&s.contains("segment-v2")?new hs(o,"segment-v2","manifest-v2"):null,e.h=s,s=(s=o.objectStoreNames).contains("manifest-v3")&&s.contains("segment-v3")?new hs(o,"segment-v3","manifest-v3"):null,e.i=s,s=(s=o.objectStoreNames).contains("manifest-v5")&&s.contains("segment-v5")?new Pa(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new Hi(o):null,e.m=o,r.stop(),t.resolve()}},i.onupgradeneeded=function(){for(var o=i.result,s=m(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())o.objectStoreNames.contains(u=u.value)||o.createObjectStore(u,{autoIncrement:!0})},i.onerror=function(o){n||(t.reject(new M(2,9,9001,i.error)),r.stop(),o.preventDefault())},t},g.destroy=function(){var e=this;return D(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return w(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return w(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return w(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return w(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return w(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),W(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return D(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return w(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return w(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return w(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return w(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),w(t,function rw(){var e=new De,t=O.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new M(2,9,9001,t.error)),n.preventDefault()},e}(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,w(t,e.init(),0)}})},Qp("idb",function(){return yr()||to()||!O.indexedDB?null:new ed}),nn.prototype.Ca=function(){return this.i},nn.prototype.ma=function(){return this.h},nn.prototype.key=function(){return this.l},nn.prototype.toString=function(){return this.j},(g=rd.prototype).configure=function(){},g.start=function(e,t){var r,i,u,a,l,n=this;return D(function(c){switch(c.g){case 1:if(r=_a(e),n.g=r,null==r||"manifest"!=r.g)throw new M(2,1,9004,e);return i=new dt,In(c),w(c,i.init(),4);case 4:return w(c,fs(i,r.Ca(),r.ma()),5);case 5:return w(c,c.h.getManifests([r.key()]),6);case 6:return u=c.h[0],a=new td(r.Ca(),r.ma()),l=nd(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return bt(c),w(c,i.destroy(),7);case 7:Wt(c,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var r,i,o,u,a,l,n=this;return D(function(c){switch(c.g){case 1:return r=n.g,i=new dt,ie(c,2,3),w(c,i.init(),5);case 5:return w(c,fs(i,r.Ca(),r.ma()),6);case 6:return w(c,(o=c.h).getManifests([r.key()]),7);case 7:if(a=(u=c.h[0]).sessionIds.includes(e),l=null==u.expiration||u.expiration>t,!a||!l){c.B(3);break}return w(c,o.updateManifestExpiration(r.key(),t),3);case 3:return bt(c),w(c,i.destroy(),10);case 10:Wt(c,0);break;case 2:ne(c),c.B(3)}})},kt["application/x-offline-manifest"]=function(){return new rd},$("shaka.offline.OfflineScheme",id),id.plugin=od,an("offline",od),(g=Ye.prototype).destroy=function(){return this.l.destroy()},g.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ku(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(yt("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),_r(this.h,e)},g.getConfiguration=function(){var e=Li();return _r(e,this.h,Li()),e},g.dc=function(){return this.g},g.store=function(e,t,n){var r=this,i=this.getConfiguration(),o=new qp(this.g);this.j.push(o),t=function dw(e,t,n,r,i,o){var s,u,a,l,c,p,d,x,E,I,S,N,C;return D(function(R){switch(R.g){case 1:return ds(),u=s=null,a=new dt,p=c=l=null,ie(R,2,3),w(R,r(),5);case 5:return w(R,function Iw(e,t,n,r){var i,s,u,a;return D(function(l){if(1==l.g)return i=null,s={networkingEngine:e.g,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){i=c},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},n.configure(r.manifest),at(e),w(l,n.start(t,s),2);if(3!=l.g)return u=l.h,at(e),a=pd(u),w(l,Promise.all(ic(a,function(c){return c.createSegmentIndex()})),3);if(at(e),i)throw i;return l.return(u)})}(e,t,s=R.h,i),6);case 6:if(d=R.h,at(e),d.presentationTimeline.U()||d.presentationTimeline.mb())throw new M(2,9,9005,t);return w(R,function Aw(e,t,n,r){var i;return D(function(o){switch(o.g){case 1:return(i=new vo({nb:e.g,onError:n,Pc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(r.drm),w(o,function Um(e,t,n){return e.fa=!0,e.C=[],e.L=n,lc(e,t)}(i,t.variants,r.offline.usePersistentLicense),2);case 2:return w(o,lu(i),3);case 3:return w(o,cc(i),4);case 4:return o.return(i)}})}(e,d,function(j){p=p||j},i),7);case 7:if(u=R.h,at(e),p)throw p;return w(R,function mw(e,t){var r,a,l,p,d,x,E,S,N,C,R,j,H,q,Q,re,pe,he;return D(function(ce){switch(ce.g){case 1:return function cm(e,t,n){e.variants=e.variants.filter(function(r){return Zs(r,t,n)})}(e,t.restrictions,{width:1/0,height:1/0}),w(ce,Dl(e,t.offline.usePersistentLicense),2);case 2:for(r=[],Rl(e,t.preferredVideoCodecs,t.preferredAudioCodecs,t.preferredAudioChannelCount,t.preferredDecodingAttributes),a=m(e.variants),l=a.next();!l.done;l=a.next())r.push(qn(l.value));for(p=m(e.textStreams),d=p.next();!d.done;d=p.next())r.push(gi(d.value));for(x=m(e.imageStreams),E=x.next();!E.done;E=x.next())r.push(Pl(E.value));return w(ce,t.offline.trackSelectionCallback(r),3);case 3:for(S=ce.h,N=e.presentationTimeline.getDuration(),C=0,R=m(S),j=R.next();!j.done;j=R.next())C+=j.value.bandwidth*N/8;return ie(ce,4),w(ce,t.offline.downloadSizeCallback(C),6);case 6:if(!ce.h)throw new M(2,9,9014);ve(ce,5);break;case 4:throw(H=ne(ce))instanceof M?H:new M(2,9,9015);case 5:for(q=new Set,Q=new Set,re=new Set,pe=m(S),j=pe.next();!j.done;j=pe.next())"variant"==(he=j.value).type&&q.add(he.id),"text"==he.type&&Q.add(he.id),"image"==he.type&&re.add(he.id);e.variants=e.variants.filter(function(ze){return q.has(ze.id)}),e.textStreams=e.textStreams.filter(function(ze){return Q.has(ze.id)}),e.imageStreams=e.imageStreams.filter(function(ze){return re.has(ze.id)}),function Lw(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next())for(var i=(r=m(t)).next();!i.done;i=r.next());for(n=(t=m(e)).next();!n.done;n=t.next())for(r=(n=m(e)).next();!r.done;r=n.next());}(e),W(ce)}})}(d,i),8);case 8:return w(R,a.init(),9);case 9:return at(e),w(R,Jp(a),10);case 10:return l=R.h,at(e),x=function vw(e,t,n,r,i,o){var s=function cw(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=ud(t),appMetadata:n,isIncomplete:!1}}(n,t,r),u=i.offline.progressCallback;!function G1(e,t,n){e.m=t,e.l=n}(o,function(v,x){s.size=x,u(s,v)},function(v,x){a&&i.offline.usePersistentLicense&&l==x&&yo(e,"cenc",v)});var a=Oa(t)&&!fd(t),l=null;a&&(l=bw.get(e.g.keySystem));for(var c=new fw,p=m(t.textStreams),d=p.next();!d.done;d=p.next())c.g[d.value.id]=52;for(d=(p=m(t.imageStreams)).next();!d.done;d=p.next())pw(c,d.value);for(p=(d=m(t.variants)).next();!p.done;p=d.next())hw(c,p.value);return c=function Cw(e,t,n){for(var r=new Map,i=pd(n),o=new Map,s=(i=m(i)).next();!s.done;s=i.next()){var u=Mw(e,t,n,s=s.value,r);o.set(s.id,u)}for(t=(e=m(n.variants)).next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),ae:Array.from(r.values())}}(o,c,t),o=c.streams,c=c.ae,p=i.offline.usePersistentLicense,(d=e.g)&&p&&(d.initData=[]),{Df:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cc(),streams:o,sessionIds:p?hc(e):[],drmInfo:d,appMetadata:r,isIncomplete:!0},ae:c}}(u,d,t,n,i,o),I=x.ae,w(R,l.ma.addManifests([E=x.Df]),11);case 11:if(S=R.h,at(e),c=S[0],at(e),p)throw p;return w(R,function gw(e,t,n,r,i,o,s,u,a){var l,c,p,d,v,x,E,I,S,N;return D(function(C){switch(C.g){case 1:if(l={},c=0,p=function(R,j){var U,F,V,H,q,Q,re;return D(function(pe){if(1==pe.g){for(U={},F=m(R),V=F.next();!V.done;U={bb:U.bb},V=F.next())U.bb=V.value,H=K1(U.bb,o),q=U.bb.i,Q=U.bb.h,re=function(he){return function(ce){var ze,Ke;return D(function(rt){if(1==rt.g)return w(rt,s.addSegments([{data:ce}]),2);ze=rt.h,at(e),Ke=Da(he.bb.g),l[Ke]=ze[0],c+=ce.byteLength,W(rt)})}}(U),X1(i,U.bb.groupId,H,q,Q,re);return w(pe,function W1(e){return D(function(t){return 1==t.g?w(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}(i),2)}return j?(at(e),function yw(e,t,n,r){if(t.expiration=n.cc(),n=hc(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Oa(e)&&r.offline.usePersistentLicense&&!n.length)throw new M(2,9,9007)}(u,r,a,o),w(pe,s.updateManifest(n,r),0)):pe.B(0)})},d=!1,ie(C,2),!Oa(u)||!d||fd(u)){C.B(4);break}return w(C,p(t.filter(function(R){return R.h}),!0),5);case 5:return at(e),t=t.filter(function(R){return!R.h}),v=l,x=c,l={},c=0,w(C,cd(s,n,r,v,x,function(){return at(e)}),6);case 6:at(e);case 4:if(d){C.B(7);break}return w(C,p(t,!1),8);case 8:return at(e),E=l,I=c,l={},c=0,w(C,cd(s,n,r,E,I,function(){return at(e)}),9);case 9:at(e);case 7:ve(C,0);break;case 2:return S=ne(C),N=Object.values(l),w(C,s.removeSegments(N,function(){}),10);case 10:throw S}})}(e,I,c,E,o,i,l.ma,d,u),12);case 12:return at(e),N=new nn("manifest",l.path.Ca,l.path.ma,c),R.return(ja(N,E));case 3:return bt(R),w(R,a.destroy(),13);case 13:if(!s){R.B(14);break}return w(R,s.stop(),14);case 14:if(!u){R.B(16);break}return w(R,u.destroy(),16);case 16:Wt(R,0);break;case 2:if(C=ne(R),null==c){R.B(18);break}return w(R,ld(c),18);case 18:throw p||C}})}(this,e,t||{},function(){return D(function(a){return 1==a.g?w(a,wc(e,r.g,i.manifest.retryParameters,n||null),2):a.return(Kn(a.h))})},i,o);var s=new Pe(t,function(){return Na(o)});return s.finally(function(){y(r.j,o)}),s.then=function(u){return yt("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),s.promise.then(u)},function kw(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){y(e.i,n)})}(this,s)},g.rf=function(){return yt("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},g.remove=function(e){return Ba(this,function ww(e,t){var n,r,i,o,u;return D(function(a){switch(a.g){case 1:if(ds(),null==(n=_a(t))||"manifest"!=n.g)throw new M(2,9,9004,t);return r=n,i=new dt,In(a),w(a,i.init(),4);case 4:return w(a,fs(i,r.Ca(),r.ma()),5);case 5:return w(a,(o=a.h).getManifests([r.key()]),6);case 6:return u=a.h[0],w(a,Promise.all([Tw(e,u,i),xw(o,r,u)]),2);case 2:return bt(a),w(a,i.destroy(),8);case 8:Wt(a,0)}})}(this,e))},g.Rf=function(){return Ba(this,function Ew(e){var t,n,r,i,o,s,u,a,l,c;return D(function(p){switch(p.g){case 1:return ds(),t=e.g,n=e.h.drm,r=new dt,i=!1,In(p),w(p,r.init(),4);case 4:o=[],function z1(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}(r,function(d){return o.push(d)}),s=m(o),u=s.next();case 5:if(u.done){p.B(2);break}return w(p,(a=u.value).getAll(),8);case 8:return w(p,sd(n,t,l=p.h),9);case 9:return w(p,a.remove(c=p.h),10);case 10:c.length!=l.length&&(i=!0),u=s.next(),p.B(5);break;case 2:return bt(p),w(p,r.destroy(),11);case 11:Wt(p,3);break;case 3:return p.return(!i)}})}(this))},g.list=function(){return Ba(this,function Sw(){var e,t,n;return D(function(r){switch(r.g){case 1:return ds(),e=[],t=new dt,In(r),w(r,t.init(),4);case 4:return n=Promise.resolve(),function Y1(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(i,o){t({Ca:r,ma:o},i)})})}(t,function(i,o){n=n.then(function(){return D(function(u){if(1==u.g)return w(u,o.getAllManifests(),2);u.h.forEach(function(a,l){var c=ja(new nn("manifest",i.Ca,i.ma,l),a);e.push(c)}),W(u)})})}),w(r,n,2);case 2:return bt(r),w(r,t.destroy(),6);case 6:Wt(r,3);break;case 3:return r.return(e)}})}())},$("shaka.offline.Storage",Ye),Ye.deleteAll=function(){var e;return D(function(t){return 1==t.g?(e=new dt,In(t),w(t,function Q1(e){var t,n;return D(function(i){return 1==i.g?(t=Array.from(e.g.values()),(n=0<t.length)||Ki.forEach(function(o){(o=o())&&t.push(o)}),w(i,Promise.all(t.map(function(o){return o.erase()})),2)):n?i.B(0):w(i,Promise.all(t.map(function(o){return o.destroy()})),0)})}(e),2)):5!=t.g?(bt(t),w(t,e.destroy(),5)):Wt(t,0)})},Ye.prototype.list=Ye.prototype.list,Ye.prototype.removeEmeSessions=Ye.prototype.Rf,Ye.prototype.remove=Ye.prototype.remove,Ye.prototype.getStoreInProgress=Ye.prototype.rf,Ye.prototype.store=Ye.prototype.store,Ye.prototype.getNetworkingEngine=Ye.prototype.dc,Ye.prototype.getConfiguration=Ye.prototype.getConfiguration,Ye.prototype.configure=Ye.prototype.configure,Ye.prototype.destroy=Ye.prototype.destroy,Ye.support=Ua;var bw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Ze(){}function st(e,t){for(var n={priority:t||0,Oe:e},r=0;r<Xi.length;r++)if(Xi[r].priority<n.priority)return void Xi.splice(r,0,n);Xi.push(n)}ra.offline=Ua,$("shaka.polyfill",Ze),Ze.register=st,Ze.installAll=function(){for(var e=m(Xi),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Oe()}catch(n){_e("Error installing polyfill!",n)}}};var Xi=[];function dd(){}function gd(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Pw(t.value)}function Pw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){null==n||null==n?this.removeAttribute(t):this.setAttribute(t,n)}})}function md(){}function vd(){Pg()}function yd(){}function wd(){if(O.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Wr),document.addEventListener("webkitfullscreenerror",Wr),document.addEventListener("mozfullscreenchange",Wr),document.addEventListener("mozfullscreenerror",Wr),document.addEventListener("MSFullscreenChange",Wr),document.addEventListener("MSFullscreenError",Wr)}}function Wr(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function Td(){}function xd(){}function Fa(){}function Ed(){(yr()||no()||ai()||nt("PlayStation 5")||ui()||sn()||nt("PC=EOS")||nt("Hisense")||nt("VIDAA")||!navigator.mediaCapabilities)&&(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Sd=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=_w)}function _w(e){var t,n,r,i,o,d,v,x,S,N;return D(function(C){switch(C.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return C.return(t);if(n=e.video,r=e.audio,"media-source"==e.type){if(!Ot())return C.return(t);if(n){if(yr())if(O.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var R=n.contentType;n.width&&n.height&&(R+="; width="+n.width+"; height="+n.height),n.framerate&&(R+="; framerate="+n.framerate),"pq"===n.transferFunction&&(R+="; eotf=smpte2084"),i=cast.__platform__.canDisplayType(R)}else i=MediaSource.isTypeSupported(n.contentType);else sn()?(o=n.contentType,n.width&&n.height&&(o+="; width="+n.width,o+="; height="+n.height),n.framerate&&(o+="; framerate="+n.framerate),n.bitrate&&(o+="; bitrate="+n.bitrate),i=MediaSource.isTypeSupported(o)):i=MediaSource.isTypeSupported(n.contentType);if(!i)return C.return(t)}if(r&&!MediaSource.isTypeSupported(r.contentType))return C.return(t)}else{if("file"!=e.type)return C.return(t);if(n&&!vr(n.contentType)||r&&!vr(r.contentType))return C.return(t)}return e.keySystemConfiguration?(v=[],x=[],(d=e.keySystemConfiguration).audio&&v.push({robustness:d.audio.robustness||"",contentType:e.audio.contentType}),d.video&&x.push({robustness:d.video.robustness||"",contentType:e.video.contentType}),S={initDataTypes:[d.initDataType],distinctiveIdentifier:d.distinctiveIdentifier,persistentState:d.persistentState,sessionTypes:d.sessionTypes},v.length&&(S.audioCapabilities=v),x.length&&(S.videoCapabilities=x),ie(C,3),w(C,navigator.requestMediaKeySystemAccess(d.keySystem,[S]),5)):(t.supported=!0,C.return(Promise.resolve(t)));case 5:N=C.h,ve(C,4);break;case 3:ne(C);case 4:N&&(t.supported=!0,t.keySystemAccess=N);case 2:return C.return(t)}})}Ze.Aria=dd,dd.install=gd,st(gd),Ze.EncryptionScheme=md,md.install=vd,st(vd,-2),Ze.Fullscreen=yd,yd.install=wd,st(wd),Ze.MathRound=Td,Td.install=xd,st(xd),Ze.MediaCapabilities=Fa,Fa.install=Ed;var Sd=null;function Id(){}function Ad(){var e=yl();O.MediaSource&&(O.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function Ow(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some(function(r){return r.startsWith("codecs=")})?cast.__platform__.canDisplayType(t):e(t)}}():e?(Md(),12>=e?(Cd(),function jw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):15>=e&&Cd()):navigator.userAgent.match(/Edge?\//)?Md():(nt("Tizen 2")||nt("Tizen 3")||nt("Tizen 4"))&&function Uw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=hi(t)[0]&&e(t)}}()),O.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function Bw(){var e=MediaSource.isTypeSupported;ui()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(i[o]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function Cd(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ct.apply(0,arguments));return t.abort=function(){},t}}function Md(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}function Rd(){}function kd(){screen.orientation||null!=O.orientation&&function Fw(){function e(){switch(O.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new gs;screen.orientation=t,e(),O.addEventListener("orientationchange",function(){e();var n=new ee("change");t.dispatchEvent(n)})}()}function gs(){ge.call(this),this.type="",this.angle=0}function Dd(){}function Nd(){O.HTMLVideoElement&&O.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Hw,O.MediaKeys=vs,O.MediaKeySystemAccess=ms,navigator.requestMediaKeySystemAccess=Vw)}function Vw(e,t){try{var n=new ms(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Hw(e){var t=this.mediaKeys;return t&&t!=e&&Ld(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ld(e,this):Promise.resolve()}function Kw(e){if(vt(e=Te(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Xn(e=Cn(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Ut(e),this.dispatchEvent(t)}function ms(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=m(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var o=!1,s=!1;if(i.audioCapabilities)for(var u=m(i.audioCapabilities),a=u.next();!a.done;a=u.next())(a=a.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(r.audioCapabilities.push(a),s=!0));if(i.videoCapabilities)for(a=(i=m(i.videoCapabilities)).next();!a.done;a=i.next())(u=a.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(r.videoCapabilities.push(u),s=!0));o||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=s?r:null}if(r)return void(this.g=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function vs(e){this.h=new WebKitMediaKeys(e),this.g=new Ce}function Ld(e,t){if(e.g.Sa(),!t)return Promise.resolve();e.g.A(t,"webkitneedkey",Kw);try{return nr(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function Va(e){ge.call(this),this.i=null,this.l=e,this.h=this.g=null,this.j=new Ce,this.sessionId="",this.expiration=NaN,this.closed=new De,this.keyStatuses=new bd}function ys(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ee("keystatuseschange"),e.dispatchEvent(n)}function bd(){this.size=0,this.g=void 0}function Pd(){}function _d(){!O.HTMLVideoElement||!O.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,O.MediaKeys=Ts,O.MediaKeySystemAccess=ws,navigator.requestMediaKeySystemAccess=Gw,HTMLMediaElement.prototype.setMediaKeys=Ww)}function Gw(e,t){try{var n=new ws(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Xw(e){if(e.initData){var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=Ut(function m0(e){if(!e)return e;var t=new $h(e);if(1>=t.data.length)return e;e=[];for(var n={},r=(t=m(t.data)).next();!r.done;n={sc:n.sc},r=t.next())n.sc=r.value,e.some(function(i){return function(o){return zt(o,i.sc)}}(n))||e.push(n.sc);return ci.apply(Jt,K(e))}(e.initData)),this.dispatchEvent(t)}}function ws(e,t){this.keySystem=e;for(var n=!1,r=m(t),i=r.next();!i.done;i=r.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(i=i.value).initDataTypes,sessionTypes:["temporary"],label:i.label},s=!1;if(i.audioCapabilities)for(var u=m(i.audioCapabilities),a=u.next();!a.done;a=u.next())(a=a.value).contentType&&(s=!0,MSMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(o.audioCapabilities.push(a),n=!0));if(i.videoCapabilities)for(a=(u=m(i.videoCapabilities)).next();!a.done;a=u.next())(a=a.value).contentType&&(s=!0,MSMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(o.videoCapabilities.push(a),n=!0));if(s||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.g=o)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ww(e){var t=this.mediaKeys;return t&&t!=e&&jd(t,null),delete this.mediaKeys,(this.mediaKeys=e)?jd(e,this):Promise.resolve()}function Ts(e){this.h=new MSMediaKeys(e),this.g=new Ce}function jd(e,t){if(e.g.Sa(),!t)return Promise.resolve();e.g.A(t,"msneedkey",Xw);try{return nr(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.msSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function Ha(e){ge.call(this),this.i=null,this.l=e,this.h=this.g=null,this.j=new Ce,this.sessionId="",this.expiration=NaN,this.closed=new De,this.keyStatuses=new Ud}function Wi(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ee("keystatuseschange"),e.dispatchEvent(n)}function Ud(){this.size=0,this.g=void 0}function Od(){}function Bd(){!O.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=qw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$w,O.MediaKeys=Ka,O.MediaKeySystemAccess=Ga)}function qw(){return Promise.reject(Error("The key system specified is not supported."))}function $w(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ka(){throw new TypeError("Illegal constructor.")}function Ga(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Fd(){}function Vd(){if(!(!O.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Ya="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Yw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=zw,O.MediaKeys=Es,O.MediaKeySystemAccess=xs}}function Xa(e){return Ya?Ya+e.charAt(0).toUpperCase()+e.slice(1):e}function Yw(e,t){try{var n=new xs(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function zw(e){var t=this.mediaKeys;return t&&t!=e&&Hd(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Hd(e,this),Promise.resolve()}function xs(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=m(t),s=o.next();!s.done;s=o.next()){var u={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(s=s.value).initDataTypes,sessionTypes:["temporary"],label:s.label},a=!1;if(s.audioCapabilities)for(var l=m(s.audioCapabilities),c=l.next();!c.done;c=l.next())(c=c.value).contentType&&(a=!0,i.canPlayType(c.contentType.split(";")[0],this.g)&&(u.audioCapabilities.push(c),r=!0));if(s.videoCapabilities)for(c=(l=m(s.videoCapabilities)).next();!c.done;c=l.next())(c=c.value).contentType&&(a=!0,i.canPlayType(c.contentType,this.g)&&(u.videoCapabilities.push(c),r=!0));if(a||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==s.persistentState&&(n?(u.persistentState="required",u.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=u)}throw n="Unsupported keySystem",("org.w3.clearkey"==e||"com.widevine.alpha"==e)&&(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Es(e){this.l=e,this.h=null,this.g=new Ce,this.i=[],this.j=new Map}function Hd(e,t){e.h=t,e.g.Sa();var n=Ya;t&&(e.g.A(t,n+"needkey",function(r){var i=new CustomEvent("encrypted");i.initDataType="cenc",i.initData=Ut(r.initData),e.h.dispatchEvent(i)}),e.g.A(t,n+"keymessage",function(r){var i=Wa(e,r.sessionId);i&&(r=new ee("message",r=(new Map).set("messageType",null==i.keyStatuses.g?"licenserequest":"licenserenewal").set("message",r.message)),i.h&&(i.h.resolve(),i.h=null),i.dispatchEvent(r))}),e.g.A(t,n+"keyadded",function(r){(r=Wa(e,r.sessionId))&&(Ss(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.A(t,n+"keyerror",function(r){var i=Wa(e,r.sessionId);i&&i.handleError(r)}))}function Wa(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function qa(e,t,n){ge.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new De,this.keyStatuses=new Gd}function Kd(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=Te(Xn("LOAD_SESSION|"+n));else{var i=Xn("PERSISTENT|");r=ci(i,t)}else r=Te(t)}catch(s){return Promise.reject(s)}e.h=new De;var o=Xa("generateKeyRequest");try{e.j[o](e.i,r)}catch(s){if("InvalidStateError"!=s.name)return e.h=null,Promise.reject(s);new ue(function(){try{e.j[o](e.i,r)}catch(u){e.h.reject(u),e.h=null}}).S(.01)}return e.h}function $a(e,t,n){if(e.g)e.g.then(function(){return $a(e,t,n)}).catch(function(){return $a(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=ct(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Mn(i.keys[0].k),i=Mn(i.keys[0].kid)}else r=Te(n),i=null;var o=Xa("addKey");try{e.j[o](e.i,r,i,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function Ss(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ee("keystatuseschange"),e.dispatchEvent(n)}function Gd(){this.size=0,this.g=void 0}Fa.originalMcap=Sd,st(Ed,-1),Ze.MediaSource=Id,Id.install=Ad,st(Ad),Ze.Orientation=Rd,Rd.install=kd,de(gs,ge),gs.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):!!screen.msLockOrientation&&screen.msLockOrientation(r)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},gs.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},st(kd),Ze.PatchedMediaKeysApple=Dd,Dd.install=Nd,ms.prototype.createMediaKeys=function(){var e=new vs(this.keySystem);return Promise.resolve(e)},ms.prototype.getConfiguration=function(){return this.g},vs.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Va(this.h,e)},vs.prototype.setServerCertificate=function(){return Promise.resolve(!1)},de(Va,ge),(g=Va.prototype).generateRequest=function(e,t){var n=this;this.g=new De;try{var r=this.l.createSession("video/mp4",Te(t));this.i=r,this.sessionId=r.sessionId||"",this.j.A(this.i,"webkitkeymessage",function(i){n.g&&(n.g.resolve(),n.g=null),i=new ee("message",i=(new Map).set("messageType",null==n.keyStatuses.g?"license-request":"license-renewal").set("message",Ut(i.message))),n.dispatchEvent(i)}),this.j.A(r,"webkitkeyadded",function(){n.h&&(ys(n,"usable"),n.h.resolve(),n.h=null)}),this.j.A(r,"webkitkeyerror",function(){var i=Error("EME PatchedMediaKeysApple key error");if(i.errorCode=n.i.error,null!=n.g)n.g.reject(i),n.g=null;else if(null!=n.h)n.h.reject(i),n.h=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ys(n,"output-not-allowed");break;default:ys(n,"internal-error")}}),ys(this,"status-pending")}catch(i){this.g.reject(i)}return this.g},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.h=new De;try{this.i.update(Te(e))}catch(t){this.h.reject(t)}return this.h},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Sa()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(g=bd.prototype).forEach=function(e){this.g&&e(this.g,kr.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=kr.value();return!(!this.g||!zt(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){},st(Nd),Ze.PatchedMediaKeysMs=Pd,Pd.install=_d,ws.prototype.createMediaKeys=function(){var e=new Ts(this.keySystem);return Promise.resolve(e)},ws.prototype.getConfiguration=function(){return this.g},Ts.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Ha(this.h,e)},Ts.prototype.setServerCertificate=function(){return Promise.resolve(!1)},de(Ha,ge),(g=Ha.prototype).generateRequest=function(e,t){var n=this;this.g=new De;try{this.i=this.l.createSession("video/mp4",Te(t),null),this.j.A(this.i,"mskeymessage",function(r){n.g&&(n.g.resolve(),n.g=null),r=new ee("message",r=(new Map).set("messageType",null==n.keyStatuses.g?"license-request":"license-renewal").set("message",Ut(r.message))),n.dispatchEvent(r)}),this.j.A(this.i,"mskeyadded",function(){n.g?(Wi(n,"usable"),n.g.resolve(),n.g=null):n.h&&(Wi(n,"usable"),n.h.resolve(),n.h=null)}),this.j.A(this.i,"mskeyerror",function(){var r=Error("EME PatchedMediaKeysMs key error");if(r.errorCode=n.i.error,null!=n.g)n.g.reject(r),n.g=null;else if(null!=n.h)n.h.reject(r),n.h=null;else switch(n.i.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Wi(n,"output-not-allowed");break;default:Wi(n,"internal-error")}}),Wi(this,"status-pending")}catch(r){this.g.reject(r)}return this.g},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.h=new De;try{this.i.update(Te(e))}catch(t){this.h.reject(t)}return this.h},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Sa()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(g=Ud.prototype).forEach=function(e){this.g&&e(this.g,kr.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=kr.value();return!(!this.g||!zt(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){},st(_d),Ze.PatchedMediaKeysNop=Od,Od.install=Bd,Ka.prototype.createSession=function(){},Ka.prototype.setServerCertificate=function(){},Ga.prototype.getConfiguration=function(){},Ga.prototype.createMediaKeys=function(){},st(Bd,-10),Ze.PatchedMediaKeysWebkit=Fd,Fd.install=Vd,xs.prototype.createMediaKeys=function(){var e=new Es(this.g);return Promise.resolve(e)},xs.prototype.getConfiguration=function(){return this.h},Es.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new qa(t,this.l,e),this.i.push(e),e},Es.prototype.setServerCertificate=function(){return Promise.resolve(!1)},de(qa,ge),(g=qa.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ss(this,"output-restricted"):Ss(this,1==t?"expired":"internal-error"))},g.generateRequest=function(e,t){return Kd(this,t,null)},g.load=function(e){return"persistent-license"==this.l?Kd(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new De;return $a(this,t,e),t},g.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Xa("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},g.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(g=Gd.prototype).forEach=function(e){this.g&&e(this.g,kr.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=kr.value();return!(!this.g||!zt(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var Ya="";function Xd(){}function Wd(){if(O.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=Qw,Object.defineProperty(e,"disablePictureInPicture",{get:eT,set:tT,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Zw,document.addEventListener("webkitpresentationmodechanged",Jw,!0))}}function Jw(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Qw(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Zw(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function eT(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function tT(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function qd(){}function $d(){O.crypto&&("randomUUID"in O.crypto||(O.crypto.randomUUID=nT))}function nT(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function Yd(){}function zd(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=rT)}function rT(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(n,r){e({usage:n,quota:r})},t)})}function Jd(){}function Qd(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:iT})}function iT(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Zd(){}function eg(){if(O.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}function tg(){}function ng(){if(O.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||nt("Web0S")&&nt("Chrome/38.0.2125.122 Safari/537.36"))&&(e.getVideoPlaybackQuality=oT)}}function oT(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function rg(){}function ig(){if(!O.VTTCue&&O.TextTrackCue){var e=null,t=TextTrackCue.length;if(3==t)e=za;else if(6==t)e=sT;else{try{var n=!!za(1,2,"")}catch{n=!1}n&&(e=za)}e&&(O.VTTCue=function(r,i,o){return e(r,i,o)})}}function za(e,t,n){return new O.TextTrackCue(e,t,n)}function sT(e,t,n){return new O.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}function bn(){}st(Vd),Ze.PiPWebkit=Xd,Xd.install=Wd,st(Wd),Ze.RandomUUID=qd,qd.install=$d,st($d),Ze.StorageEstimate=Yd,Yd.install=zd,st(zd),Ze.Symbol=Jd,Jd.install=Qd,st(Qd),Ze.VideoPlayPromise=Zd,Zd.install=eg,st(eg),Ze.VideoPlaybackQuality=tg,tg.install=ng,st(ng),Ze.VTTCue=rg,rg.install=ig,st(ig),bn.prototype.parseInit=function(){},bn.prototype.parseMedia=function(e,t){for(var n=null,r=[],i=ct(e).split(/\r?\n/),o=(i=m(i)).next();!o.done;o=i.next())if((o=o.value)&&!/^\s+$/.test(o)&&(o=uT.exec(o))){var s=aT.exec(o[1]);o=new T(s=60*parseInt(s[1],10)+parseFloat(s[2].replace(",",".")),t.segmentEnd?t.segmentEnd:s+2,o[2]),n&&(n.endTime=s,r.push(n)),n=o}return n&&r.push(n),r},$("shaka.text.LrcTextParser",bn),bn.prototype.parseMedia=bn.prototype.parseMedia,bn.prototype.parseInit=bn.prototype.parseInit;var uT=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,aT=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function xn(){}function og(e,t,n,r,i,o,s,u,a,l,c){var p=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!c)return null;var d=document.createElement("span");d.textContent=e.textContent}else d=e;for(var v=null,x=m(gT),E=x.next();!E.done&&!(v=As(d,"backgroundImage",r,"#",E.value)[0]);E=x.next());if(x=c,("p"==e.nodeName||v)&&(c=!0),u="default"==(d.getAttribute("xml:space")||(u?"default":"preserve")),e=[],!(E=Array.from(d.childNodes).every(function(R){return R.nodeType==Node.TEXT_NODE})))for(var I=m(d.childNodes),S=I.next();!S.done;S=I.next())(S=og(S.value,t,n,r,i,o,s,u,a,d,c))&&e.push(S);r=null!=l,I=/\S/.test(d.textContent);var N=d.hasAttribute("begin")||d.hasAttribute("end")||d.hasAttribute("dur");if(!(N||I||"br"==d.tagName||0!=e.length||r&&!u))return null;for(I=(S=ag(d,n)).start,S=S.end;p&&p.nodeType==Node.ELEMENT_NODE&&"tt"!=p.tagName;)I=(S=cT(p,n,I,S)).start,S=S.end,p=p.parentNode;if(null==I&&(I=0),I+=t.periodStart,S=null==S?1/0:S+t.periodStart,I=Math.max(I,t.segmentStart),S=Math.min(S,t.segmentEnd),!N&&0<e.length)for(I=1/0,S=0,n=(t=m(e)).next();!n.done;n=t.next())n=n.value,I=Math.min(I,n.startTime),S=Math.max(S,n.endTime);if("br"==d.tagName)return(i=new T(I,S,"")).lineBreak=!0,i;if(t="",E&&(t=d.textContent,u&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new T(I,S,t)).nestedCues=e,c||(t.isContainer=!0),a&&(t.cellResolution=a),a=As(d,"region",o,"")[0],d.hasAttribute("region")&&a&&a.getAttribute("xml:id")){var C=a.getAttribute("xml:id");t.region=s.filter(function(R){return R.id==C})[0]}return s=a,l&&r&&!d.getAttribute("region")&&!d.getAttribute("style")&&(s=As(l,"region",o,"")[0]),function lT(e,t,n,r,i,o,s){if("rtl"==ft(t,n,i,"direction",o=o||s)&&(e.direction="rtl"),"tb"==(s=ft(t,n,i,"writingMode",o))||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=Oe),(s=ft(t,n,i,"textAlign",!0))?(e.positionAlign=dT[s],e.lineAlign=pT[s],e.textAlign=se[s.toUpperCase()]):e.textAlign=P,(s=ft(t,n,i,"displayAlign",!0))&&(e.displayAlign=je[s.toUpperCase()]),(s=ft(t,n,i,"color",o))&&(e.color=s),(s=ft(t,n,i,"backgroundColor",o))&&(e.backgroundColor=s),(s=ft(t,n,i,"border",o))&&(e.border=s),s=ft(t,n,i,"fontFamily",o))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s}if((s=ft(t,n,i,"fontWeight",o))&&"bold"==s&&(e.fontWeight=700),s=ft(t,n,i,"wrapOption",o),e.wrapLine=!(s&&"noWrap"==s),(s=ft(t,n,i,"lineHeight",o))&&s.match(qr)&&(e.lineHeight=s),(s=ft(t,n,i,"fontSize",o))&&(s.match(qr)||s.match(hT))&&(e.fontSize=s),(s=ft(t,n,i,"fontStyle",o))&&(e.fontStyle=fl[s.toUpperCase()]),r){s=r.getAttribute("imageType")||r.getAttribute("imagetype");var u=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==s&&"Base64"==u&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(r=ft(t,n,i,"textOutline",o))&&((r=r.split(" "))[0].match(qr)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(qr)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=ft(t,n,i,"letterSpacing",o))&&r.match(qr)&&(e.letterSpacing=r),(r=ft(t,n,i,"linePadding",o))&&r.match(qr)&&(e.linePadding=r),(o=ft(t,n,i,"opacity",o))&&(e.opacity=parseFloat(o)),(n=Is(n,i,"textDecoration"))&&sg(e,n),(t=Ja(t,i,"textDecoration"))&&sg(e,t)}(t,d,s,v,i,x,0==e.length),t}function sg(e,t){for(var n=m(t.split(" ")),r=n.next();!r.done;r=n.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&y(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&y(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&y(e.textDecoration,"overline")}}function ft(e,t,n,r,i){return i=void 0===i||i,(e=Ja(e,n,r))?e:i?Is(t,n,r):null}function Is(e,t,n){return e?cn(e,Cs,n)||ug(e,t,n):null}function Ja(e,t,n){return cn(e,Cs,n)||ug(e,t,n)}function ug(e,t,n){e=As(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var o=zn(e[i],"urn:ebu:tt:style",n);o||(o=cn(e[i],Cs,n)),o||(o=Ja(e[i],t,n)),o&&(r=o)}return r}function As(e,t,n,r,i){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;s&&!(e=i?zn(s,i,t):s.getAttribute(t))&&(s=s.parentNode)instanceof Element;);if(t=e)for(i=(t=m(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,s=(e=m(n)).next();!s.done;s=e.next())if(r+(s=s.value).getAttribute("xml:id")==i){o.push(s);break}return o}function cT(e,t,n,r){return e=ag(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function ag(e,t){var n=Qa(e.getAttribute("begin"),t),r=Qa(e.getAttribute("end"),t),i=Qa(e.getAttribute("dur"),t);return null==r&&null!=i&&(r=n+i),{start:n,end:r}}function Qa(e,t){var n=null;if(lg.test(e)){n=lg.exec(e);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),s=Number(n[4]);n=(o+=(s+=(Number(n[5])||0)/t.h)/t.frameRate)+60*i+3600*r}else if(cg.test(e))n=Za(cg,e);else if(fg.test(e))n=Za(fg,e);else if(hg.test(e))n=hg.exec(e),n=Number(n[1])/t.frameRate;else if(pg.test(e))n=pg.exec(e),n=Number(n[1])/t.g;else if(dg.test(e))n=Za(dg,e);else if(e)throw new M(2,2,2001,"Could not parse cue time range in TTML");return n}function Za(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function fT(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}it["application/x-subtitle-lrc"]=function(){return new bn},xn.prototype.parseInit=function(){},xn.prototype.parseMedia=function(e,t){var n=ct(e),r=[];if(""==n)return r;var i=wi(n,"tt");if(!i)throw new M(2,2,2005,"Failed to parse TTML.");if(!(n=i.getElementsByTagName("body")[0]))return[];var o=cn(i,qi,"frameRate"),s=cn(i,qi,"subFrameRate"),u=cn(i,qi,"frameRateMultiplier"),a=cn(i,qi,"tickRate"),l=cn(i,qi,"cellResolution"),c=i.getAttribute("xml:space")||"default",p=cn(i,Cs,"extent");if("default"!=c&&"preserve"!=c)throw new M(2,2,2005,"Invalid xml:space value: "+c);c="default"==c,o=new fT(o,s,u,a),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{columns:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,s=(s=i.getElementsByTagName("metadata")[0])?function Nm(e){return Array.from(e.childNodes).filter(function(t){return t instanceof Element})}(s):[],u=Array.from(i.getElementsByTagName("style")),a=[];for(var d=m(i=Array.from(i.getElementsByTagName("region"))),v=d.next();!v.done;v=d.next()){var x=v.value;v=new pr;var E=x.getAttribute("xml:id");if(E){v.id=E;var S,N,I=null;p&&(I=el.exec(p)||tl.exec(p)),E=I?Number(I[1]):null,I=I?Number(I[2]):null,(S=Is(x,u,"extent"))&&null!=(S=(N=el.exec(S))||tl.exec(S))&&(v.width=Number(S[1]),v.height=Number(S[2]),N||(null!=E&&(v.width=100*v.width/E),null!=I&&(v.height=100*v.height/I)),v.widthUnits=N||null!=E?Yt:0,v.heightUnits=N||null!=I?Yt:0),(x=Is(x,u,"origin"))&&null!=(S=(N=el.exec(x))||tl.exec(x))&&(v.viewportAnchorX=Number(S[1]),v.viewportAnchorY=Number(S[2]),N||(null!=I&&(v.viewportAnchorY=100*v.viewportAnchorY/I),null!=E&&(v.viewportAnchorX=100*v.viewportAnchorX/E)),v.viewportAnchorUnits=N||null!=E?Yt:0)}else v=null;v&&a.push(v)}if(Be(n,"p").length)throw new M(2,2,2001,"<p> can only be inside <div> in TTML");for(d=(p=m(Be(n,"div"))).next();!d.done;d=p.next())if(Be(d.value,"span").length)throw new M(2,2,2001,"<span> can only be inside <p> in TTML");return(n=og(n,t,o,s,u,i,a,c,l,null,!1))&&(n.backgroundColor||(n.backgroundColor="transparent"),r.push(n)),r},$("shaka.text.TtmlTextParser",xn),xn.prototype.parseMedia=xn.prototype.parseMedia,xn.prototype.parseInit=xn.prototype.parseInit;var el=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,hT=/^(\d{1,2}(?:\.\d+)?|100)%$/,qr=/^(\d+px|\d+em|\d*\.?\d+c)$/,tl=/^(\d+)px (\d+)px$/,lg=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,cg=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,fg=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,hg=/^(\d*(?:\.\d*)?)f$/,pg=/^(\d*(?:\.\d*)?)t$/,dg=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),pT={left:Hn,center:"center",right:"end",start:Hn,end:"end"},dT={left:"line-left",center:"center",right:"line-right"},qi=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Cs=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],gT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Kt(){this.g=new xn}function Gt(){}function gg(e){for(var t=m(Object.entries(al)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var i=new T(0,0,"");i.color=r,e.set("."+n,i)}for(n=(t=m(Object.entries(ll))).next();!n.done;n=t.next())n=(r=m(n.value)).next().value,r=r.next().value,(i=new T(0,0,"")).backgroundColor=r,e.set("."+n,i)}function mg(e,t,n){0===n.size&&gg(n);e:{var r=e;e=[];for(var i=-1,o="",s=0;s<r.length;s++)if("/"===r[s]&&0<s&&"<"===r[s-1]){var u=r.indexOf(">",s);if(u<=s){e=r;break e}if((u=r.substring(s+1,u))&&"c"===u){var a=e.pop();a?a===u?(o+="/"+u+">",s+=u.length+1):a.startsWith("c.")?(s+=u.length+1,o+="/"+a+">"):o+=r[s]:o+=r[s]}else o+=r[s]}else"<"===r[s]?"c"!=r[i=s+1]&&(i=-1):">"===r[s]&&0<i&&(e.push(r.substr(i,s-i)),i=-1),o+=r[s];e=o}e:{for(i=e,o=[],s=-1,r="",e=!1,u=0;u<i.length;u++)if("/"===i[u]){if(-1===(a=i.indexOf(">",u))){e=i;break e}if((a=i.substring(u+1,a))&&"v"==a){e=!0;var l=null;if(o.length&&(l=o[o.length-1]),l){if(l===a)r+="/"+a+">";else{if(!l.startsWith("v")){r+=i[u];continue}r+="/"+l+">"}u+=a.length+1}else r+=i[u]}else r+=i[u]}else"<"===i[u]?"v"!=i[s=u+1]&&(s=-1):">"===i[u]&&0<s&&(o.push(i.substr(s,u-s)),s=-1),r+=i[u];for(o=(i=m(o)).next();!o.done;o=i.next())s=(o=o.value).replace(" ",".voice-"),r=(r=r.replace("<"+o+">","<"+s+">")).replace("</"+o+">","</"+s+">"),e||(r+="</"+s+">");e=r}if(i=wi("<span>"+e+"</span>","span")){if(r=[],1==(i=i.childNodes).length&&((o=i[0]).nodeType==Node.TEXT_NODE||o.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=rl(e));for(i=(e=m(i)).next();!i.done;i=e.next())vg(i.value,t,r,n);t.nestedCues=r}else t.payload=rl(e)}function Ms(e,t){return e&&0<e.length?e:t}function vg(e,t,n,r){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var o=m(e.nodeName.split(/(?=[ .])+/g)),s=o.next();!s.done;s=o.next()){var u=s=s.value;if(u.startsWith(".voice-")){var a=u.split("-").pop();r.has(u='v[voice="'+a+'"]')||(u="v[voice="+a+"]")}switch(r.has(u)&&(u=r.get(u))&&(i.backgroundColor=Ms(u.backgroundColor,i.backgroundColor),i.color=Ms(u.color,i.color),i.fontFamily=Ms(u.fontFamily,i.fontFamily),i.fontSize=Ms(u.fontSize,i.fontSize),i.fontWeight=u.fontWeight,i.fontStyle=u.fontStyle,i.opacity=u.opacity,i.wrapLine=u.wrapLine),s){case"br":(s=t.clone()).lineBreak=!0,n.push(s);break;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline")}}if(sc(e))for(o=!0,r=m(e.textContent.split("\n")),e=r.next();!e.done;e=r.next())e=e.value,o||((o=t.clone()).lineBreak=!0,n.push(o)),0<e.length&&((o=i.clone()).payload=rl(e),n.push(o)),o=!1;else for(e=(t=m(e.childNodes)).next();!e.done;e=t.next())vg(e.value,i,n,r)}function yg(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?e.textAlign="middle"==(t=r[1])?P:se[t.toUpperCase()]:(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(e.positionAlign="line-left"==(t=r[2])||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function mT(e,t){var n=e.filter(function(r){return r.id==t});return n.length?n[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Os[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Us,e.line=Number(n[1]),n[2]&&(e.lineAlign=Os[n[2].toUpperCase()]))}function nl(e){if(null==(e=Ln(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function rl(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xa0","&lrm;":"\u200e","&rlm;":"\u200f"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(i){return t[i]||"'"}):e||""}function Pn(){this.g=null}function vT(e,t,n){var r,i,o;return(new ke).box("payl",Dr(function(s){r=ct(s)})).box("iden",Dr(function(s){i=ct(s)})).box("sttg",Dr(function(s){o=ct(s)})).parse(e),r?function yT(e,t,n,r,i){if(mg(e,r=new T(r,i,""),new Map),t&&(r.id=t),n)for(t=sr(e=new Kr(n));t;)yg(r,t,[]),Gr(e),t=sr(e);return r}(r,i,o,t,n):null}function _n(){}function wg(e){if(null==(e=Ln(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function En(){this.g=new Gt}function Tg(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=m((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function jn(){}function wT(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=xg(n))&&(e.color=n),(n=t.BackColour)&&(n=xg(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=be,e.textAlign="start";break;case 2:e.displayAlign=be,e.textAlign=P;break;case 3:e.displayAlign=be,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=P;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=P;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=t.AlphaLevel)&&(e.opacity=parseFloat(n))}function xg(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Eg(e){return 3600*((e=xT.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}it["application/ttml+xml"]=function(){return new xn},Kt.prototype.parseInit=function(e){var t=!1;if((new ke).box("moov",Fe).box("trak",Fe).box("mdia",Fe).box("minf",Fe).box("stbl",Fe).P("stsd",xo).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new M(2,2,2007)},Kt.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if((new ke).box("mdat",Dr(function(o){r=!0,i=i.concat(n.g.parseMedia(o,t))})).parse(e,!1),!r)throw new M(2,2,2007);return i},$("shaka.text.Mp4TtmlParser",Kt),Kt.prototype.parseMedia=Kt.prototype.parseMedia,Kt.prototype.parseInit=Kt.prototype.parseInit,it['application/mp4; codecs="stpp"']=function(){return new Kt},it['application/mp4; codecs="stpp.ttml"']=function(){return new Kt},it['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Kt},it['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Kt},Gt.prototype.parseInit=function(){},Gt.prototype.parseMedia=function(e,t){var n=ct(e),r=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new M(2,2,2e3);if(n=t.periodStart,r[0].includes("X-TIMESTAMP-MAP")){var i=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=r[0].match(/MPEGTS:(\d+)/m);if(i&&o){if(null==(n=nl(new Kr(i[1]))))throw new M(2,2,2e3);for(o=Number(o[1]),i=t.segmentStart;95443.7176888889<=i;)i-=95443.7176888889,o+=8589934592;n=t.periodStart+o/9e4-n}}o=[];for(var s=(i=m(r[0].split("\n"))).next();!s.done;s=i.next())if(/^Region:/.test(s=s.value)){s=new Kr(s);var u=new pr;sr(s),Gr(s);for(var a=sr(s);a;){var l=u,c=a;(a=/^id=(.*)$/.exec(c))?l.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(c))?l.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(c))?(l.height=Number(a[1]),l.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.regionAnchorX=Number(a[1]),l.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.viewportAnchorX=Number(a[1]),l.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(c)&&(l.scroll="up"),Gr(s),a=sr(s)}o.push(u)}for(gg(i=new Map),s=[],u=(r=m(r.slice(1))).next();!u.done;u=r.next()){if((1!=(u=u.value.split("\n")).length||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&"STYLE"==u[0]){for(l=[],a=-1,c=1;c<u.length;c++)u[c].includes("::cue")&&(l.push([]),a=l.length-1),-1!=a&&(l[a].push(u[c]),u[c].includes("}")&&(a=-1));for(a=(l=m(l)).next();!a.done;a=l.next()){var p=a.value;a="global",(c=p[0].match(/\((.*)\)/))&&(a=c.pop()),c=p.slice(1,-1),p[0].includes("}")&&(p=/\{(.*?)\}/.exec(p[0]))&&(c=p[1].split(";")),(p=i.get(a))||(p=new T(0,0,""));for(var d=!1,v=0;v<c.length;v++){var x=/^\s*([^:]+):\s*(.*)/.exec(c[v]);if(x){var E=x[2].trim().replace(";","");switch(x[1].trim()){case"background-color":case"background":d=!0,p.backgroundColor=E;break;case"color":d=!0,p.color=E;break;case"font-family":d=!0,p.fontFamily=E;break;case"font-size":d=!0,p.fontSize=E;break;case"font-weight":(700<=parseInt(E,10)||"bold"==E)&&(d=!0,p.fontWeight=700);break;case"font-style":switch(E){case"normal":d=!0,p.fontStyle=Bs;break;case"italic":d=!0,p.fontStyle="italic";break;case"oblique":d=!0,p.fontStyle="oblique"}break;case"opacity":d=!0,p.opacity=parseFloat(E);break;case"text-shadow":d=!0,p.textShadow=E;break;case"white-space":d=!0,p.wrapLine="noWrap"!=E}}}d&&i.set(a,p)}}if(d=n,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])u=null;else{if(l=null,u[0].includes("--\x3e")||(l=u[0],u.splice(0,1)),c=nl(a=new Kr(u[0])),v=Ln(a,/[ \t]+--\x3e[ \t]+/g),p=nl(a),null==c||null==v||null==p)throw new M(2,2,2001,"Could not parse cue time range in WebVTT");for(c+=d,p+=d,d=u.slice(1).join("\n").trim(),i.has("global")?((u=i.get("global").clone()).startTime=c,u.endTime=p,u.payload=""):u=new T(c,p,""),mg(d,u,i),Gr(a),c=sr(a);c;)yg(u,c,o),Gr(a),c=sr(a);null!=l&&(u.id=l)}u&&s.push(u)}return s},$("shaka.text.VttTextParser",Gt),Gt.prototype.parseMedia=Gt.prototype.parseMedia,Gt.prototype.parseInit=Gt.prototype.parseInit,it["text/vtt"]=function(){return new Gt},it['text/vtt; codecs="vtt"']=function(){return new Gt},it['text/vtt; codecs="wvtt"']=function(){return new Gt},Pn.prototype.parseInit=function(e){var t=this,n=!1;if((new ke).box("moov",Fe).box("trak",Fe).box("mdia",Fe).P("mdhd",function(r){r=wu(r.reader,r.version),t.g=r.timescale}).box("minf",Fe).box("stbl",Fe).P("stsd",xo).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new M(2,2,2008);if(!n)throw new M(2,2,2008)},Pn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new M(2,2,2008);var i,n=0,r=[],o=[],s=!1,u=!1,a=!1,l=null;if((new ke).box("moof",Fe).box("traf",Fe).P("tfdt",function(R){s=!0,n=yu(R.reader,R.version).pd}).P("tfhd",function(R){l=Gc(R.reader,R.flags).ie}).P("trun",function(R){u=!0,r=Xc(R.reader,R.version,R.flags).ye}).box("mdat",Dr(function(R){a=!0,i=R})).parse(e,!1),!a&&!s&&!u)throw new M(2,2,2008);for(var c=n,p=new xe(i,0),d=m(r),v=d.next();!v.done;v=d.next()){var x=(v=v.value).Sd||l,E=v.Tc?n+v.Tc:c;c=E+(x||0);var I=0;do{var S=p.M();I+=S;var C=null;"vttc"==Sc(p.M())?8<S&&(C=p.Za(S-8)):p.skip(S-8),x&&C&&(S=vT(C,t.periodStart+E/this.g,t.periodStart+c/this.g),o.push(S))}while(v.sampleSize&&I<v.sampleSize)}return o.filter(An)},$("shaka.text.Mp4VttParser",Pn),Pn.prototype.parseMedia=Pn.prototype.parseMedia,Pn.prototype.parseInit=Pn.prototype.parseInit,it['application/mp4; codecs="wvtt"']=function(){return new Pn},_n.prototype.parseInit=function(){},_n.prototype.parseMedia=function(e){var t=ct(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=m(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new Kr((n=n.value.split("\n"))[0]),i=wg(r),o=Ln(r,/,/g);if(r=wg(r),null==i||null==o||null==r)throw new M(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new T(i,r,n.slice(1).join("\n").trim()))}return e},$("shaka.text.SbvTextParser",_n),_n.prototype.parseMedia=_n.prototype.parseMedia,_n.prototype.parseInit=_n.prototype.parseInit,it["text/x-subviewer"]=function(){return new _n},En.prototype.parseInit=function(){},En.prototype.parseMedia=function(e,t){var n=ct(e);return n=Te(Xn(n=Tg(n))),this.g.parseMedia(n,t)},$("shaka.text.SrtTextParser",En),En.srt2webvtt=Tg,En.prototype.parseMedia=En.prototype.parseMedia,En.prototype.parseInit=En.prototype.parseInit,it["text/srt"]=function(){return new En},jn.prototype.parseInit=function(){},jn.prototype.parseMedia=function(e){for(var t="",n="",r=(e=m(e=ct(e).split(/\r?\n\s*\r?\n/))).next();!r.done;r=e.next()){var i=TT.exec(r.value);i&&(r=i[1],i=i[2],"V4 Styles"==r||"V4+ Styles"==r?t=i:"Events"==r&&(n=i))}e=[],r=null;for(var o=(t=m(t.split(/\r?\n/))).next();!o.done;o=t.next())if(!/^\s*;/.test(i=o.value)&&(o=Sg.exec(i)))if(i=o[1].trim(),o=o[2].trim(),"Format"==i)r=o.split(Rs);else if("Style"==i){i=o.split(Rs),o={};for(var s=0;s<r.length&&s<i.length;s++)o[r[s]]=i[s];e.push(o)}for(r=[],t=null,i={},o=(n=m(n.split(/\r?\n/))).next();!o.done;i={kd:i.kd},o=n.next())if(!/^\s*;/.test(o=o.value)&&(s=Sg.exec(o)))if(o=s[1].trim(),s=s[2].trim(),"Format"==o)t=s.split(Rs);else if("Dialogue"==o){s=s.split(Rs),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];s=new T(u=Eg(o.Start),Eg(o.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),i.kd=o.Style,(o=e.find(function(l){return function(c){return c.Name==l.kd}}(i)))&&wT(s,o),r.push(s)}return r},$("shaka.text.SsaTextParser",jn),jn.prototype.parseMedia=jn.prototype.parseMedia,jn.prototype.parseInit=jn.prototype.parseInit;var $i,Yi,TT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Sg=/^\s*([^:]+):\s*(.*)/,Rs=/\s*,\s*/,xT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Ig(){}function Ag(){$i?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?($i=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=ET):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function ET(e,t){var r,n=this;return D(function(i){return 1==i.g?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),w(i,$i.call(n,e,t),2)):bg(r=i.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=$i,i.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Cg,i.return(Cg.call(n,e,t)))})}function Cg(e,t){var r,i,o,s,u,a,l,c,p,n=this;return D(function(v){if(1==v.g){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=Lg(e),i=[],o=m(t),s=o.next();!s.done;s=o.next())a=Mg((u=s.value).videoCapabilities,r),l=Mg(u.audioCapabilities,r),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||((c=Object.assign({},u)).videoCapabilities=a,c.audioCapabilities=l,i.push(c));if(!i.length)throw(p=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",p.code=DOMException.NOT_SUPPORTED_ERR,p;return w(v,$i.call(n,e,i),2)}return v.return(new ks(v.h,r))})}function Mg(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}function Rg(){}function kg(){Yi?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Yi=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ST):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function ST(e){var n,r,i,t=this;return D(function(o){switch(o.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),w(o,Yi.call(t,e),2);case 2:if(n=o.h,!e.keySystemConfiguration)return o.return(n);if((r=n.keySystemAccess)&&bg(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Yi,o.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Dg,r){o.B(3);break}return i=n,w(o,Ng(e),4);case 4:return i.keySystemAccess=o.h,o.return(n);case 3:return o.return(Dg.call(t,e))}})}function Dg(e){var n,r,o,s,u,a,l,t=this;return D(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(o=(r=e.keySystemConfiguration).audio&&r.audio.encryptionScheme,s=r.video&&r.video.encryptionScheme,n=Lg(r.keySystem),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=n||s&&s!=n)?c.return(u):w(c,Yi.call(t,e),2);case 2:if((a=c.h).keySystemAccess){a.keySystemAccess=new ks(a.keySystemAccess,n),c.B(3);break}if(!e.keySystemConfiguration){c.B(3);break}return l=a,w(c,Ng(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(a)}})}function Ng(e){return D(function(r){if(1==r.g){var i=e.keySystemConfiguration,o=[],s=[];return i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType}),i.video&&s.push({robustness:i.video.robustness||"",contentType:e.video.contentType}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},o.length&&(i.audioCapabilities=o),s.length&&(i.videoCapabilities=s),w(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[i]),2)}return r.return(r.h)})}function ks(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Lg(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function bg(e){return!(!(e=(e=e.getConfiguration()).videoCapabilities&&e.videoCapabilities[0]||e.audioCapabilities&&e.audioCapabilities[0])||void 0===e.encryptionScheme)}function il(){}function Pg(){Ag(),kg()}it["text/x-ssa"]=function(){return new jn},$("EmeEncryptionSchemePolyfill",Ig),Ig.install=Ag,$("McEncryptionSchemePolyfill",Rg),Rg.install=kg,ks.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=m(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},ks.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},$("EncryptionSchemePolyfills",il),il.install=Pg,typeof Y<"u"&&Y.exports&&(Y.exports=il)}.call(Z,me,me,void 0),Z.shaka)Ee[Ie]=Z.shaka[Ie]}()}}]);